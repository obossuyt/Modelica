<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.Sensors.Conversions.Examples</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Collection of models that illustrate model use and test models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Examples<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.Sensors.Conversions.Examples"></a><a href="Buildings_Fluid_Sensors_Conversions.html#Buildings.Fluid.Sensors.Conversions"
>Buildings.Fluid.Sensors.Conversions</a>.Examples</h2>
<p>
<b>Collection of models that illustrate model use and test models</b><br>
</p>
<h3>Information</h3>

<p>
This package contains examples for the use of models that can be found in
<a href="Buildings_Fluid_Sensors_Conversions.html#Buildings.Fluid.Sensors.Conversions"
>
Buildings.Fluid.Sensors.Conversions</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage"
>Modelica.Icons.ExamplesPackage</a> (Icon for packages containing runnable examples).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.C83fc9374ae695197ctionS.png" alt="Buildings.Fluid.Sensors.Conversions.Examples.To_VolumeFraction" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors_Conversions_Examples.html#Buildings.Fluid.Sensors.Conversions.Examples.To_VolumeFraction"
>To_VolumeFraction</a>
</td>
<td>Example problem for conversion model</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE To_VolumeFraction<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.C83fc9374ae695197ctionI.png" alt="Buildings.Fluid.Sensors.Conversions.Examples.To_VolumeFraction" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.Conversions.Examples.To_VolumeFraction"></a><a href="Buildings_Fluid_Sensors_Conversions_Examples.html#Buildings.Fluid.Sensors.Conversions.Examples"
>Buildings.Fluid.Sensors.Conversions.Examples</a>.To_VolumeFraction</h2>
<p>
<b>Example problem for conversion model</b>
<br>
<br><img src="Buildings.Fluid.Sensors.C83fc9374ae695197ctionD.png" alt="Buildings.Fluid.Sensors.Conversions.Examples.To_VolumeFraction">
</p>
<h3>Information</h3>

This example demonstrates the modeling of a room with one person and CO<sub>2</sub> control.
The room has a volume of <i>4*4*2.7 m<sup>3</sup></i>, and the CO<sub>2</sub> inflow is from
one person.
A control system regulates the outside air to maintain a CO<sub>2</sub> concentration of 1000 PPM
in the room. The outside air has a CO<sub>2</sub> concentration of 300 PPM.
Note that for simplicity, we allow zero outside air flow rate if the CO<sub>2</sub> concentration is below
the setpoint, which does not comply with ASHRAE regulations.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> To_VolumeFraction <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Example problem for conversion model&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Media_Air.html#Buildings.Media.Air"
>Buildings.Media.Air</a>(extraPropertiesNames={&quot;CO2&quot;});

  <a href="Buildings_Fluid_Sensors_Conversions.html#Buildings.Fluid.Sensors.Conversions.To_VolumeFraction"
>Buildings.Fluid.Sensors.Conversions.To_VolumeFraction</a> conMasVolFra(MMMea=
        Modelica.Media.IdealGases.Common.SingleGasesData.CO2.MM) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Conversion from mass fraction CO2 to volume fraction CO2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</a> volFra(k=1000E-6) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set point for volume fraction of 700PPM CO2&quot;</span>;
  <a href="Buildings_Controls_Continuous.html#Buildings.Controls.Continuous.LimPID"
>Buildings.Controls.Continuous.LimPID</a> limPID(
    controllerType=Modelica.Blocks.Types.SimpleController.PI,
    reverseAction=true,
    Ti=600,
    k=2,
    Td=1);
  <a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TraceSubstances"
>Buildings.Fluid.Sensors.TraceSubstances</a> senCO2(<span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        Medium, substanceName=&quot;CO2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;CO2 sensor&quot;</span>;
  <a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</a> vol(
    nPorts=4,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    V=4*4*2.7,
    C_start={300E-6}*44.009544/28.9651159,
    m_flow_nominal=0.1,
    energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Volume of air&quot;</span>;
  <a href="Buildings_Fluid_Sources.html#Buildings.Fluid.Sources.TraceSubstancesFlowSource"
>Buildings.Fluid.Sources.TraceSubstancesFlowSource</a> souCO2(
    use_m_flow_in=true,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    nPorts=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;CO2 source&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> CO2Per(k=15/1000/3600*1.977) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;CO2 emission per person&quot;</span>;
  <a href="Buildings_Fluid_Sources.html#Buildings.Fluid.Sources.MassFlowSource_T"
>Buildings.Fluid.Sources.MassFlowSource_T</a> sou(
    use_m_flow_in=true,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    C={300E-6}*44.009544/28.9651159,
    nPorts=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Source of fresh air with 300 PPM CO2&quot;</span>;
  <a href="Buildings_Fluid_Sources.html#Buildings.Fluid.Sources.FixedBoundary"
>Buildings.Fluid.Sources.FixedBoundary</a> sin(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    p=100000,
    C={300E-6}*44.009544/28.9651159,
    nPorts=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sink for exhaust air&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> gai(k=50/3600) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Gain for mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</a> nPeo(k=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Number of people&quot;</span>;
  <a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.VolumeFlowRate"
>Buildings.Fluid.Sensors.VolumeFlowRate</a> senVolFlo(<span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        Medium, m_flow_nominal=0.1);
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> norSet(k=1/1000E-6) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Normalization for set point (to scale control input)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> norMea(k=1/1000E-6) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Normalization for measured concentration (to scale control input)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> conVolFlo(k=3600, y(unit=&quot;m3/h&quot;)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Conversion from m3/s to m3/h&quot;</span>;
  <a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TraceSubstancesTwoPort"
>Buildings.Fluid.Sensors.TraceSubstancesTwoPort</a> senTraSubPeo(m_flow_nominal=0.1,
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    C_start=0,
    initType=Modelica.Blocks.Types.Init.InitialState) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;CO2 concentration in absorptance from people&quot;</span>;
  <a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TraceSubstancesTwoPort"
>Buildings.Fluid.Sensors.TraceSubstancesTwoPort</a> senTraSubFre(m_flow_nominal=0.1,
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    C_start=0,
    initType=Modelica.Blocks.Types.Init.InitialState) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;CO2 concentration in fresh air supply&quot;</span>;

  <a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> res(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    dp_nominal=10,
    m_flow_nominal=50/3600) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure drop to decouple the state of the volume from the state of the boundary condition&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(souCO2.m_flow_in, CO2Per.y);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(gai.y, sou.m_flow_in);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(limPID.y, gai.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(nPeo.y, CO2Per.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(sou.ports[1], senVolFlo.port_a);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(senCO2.C, conMasVolFra.m);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conMasVolFra.V, norMea.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(norMea.y, limPID.u_m);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(volFra.y, norSet.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(norSet.y, limPID.u_s);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conVolFlo.u, senVolFlo.V_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(souCO2.ports[1], senTraSubPeo.port_a);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(senTraSubPeo.port_b, vol.ports[1]);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(senVolFlo.port_b, senTraSubFre.port_a);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(senTraSubFre.port_b, vol.ports[2]);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(vol.ports[3], senCO2.port);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(vol.ports[4], res.port_a);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(res.port_b, sin.ports[1]);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>To_VolumeFraction;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:25:56 2015.
</address>
</body>
</html>
