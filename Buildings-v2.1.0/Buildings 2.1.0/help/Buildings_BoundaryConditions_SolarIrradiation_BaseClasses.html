<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with base classes for Buildings.BoundaryConditions.SolarIrradiation&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"></a><a href="Buildings_BoundaryConditions_SolarIrradiation.html#Buildings.BoundaryConditions.SolarIrradiation"
>Buildings.BoundaryConditions.SolarIrradiation</a>.BaseClasses</h2>
<p>
<b>Package with base classes for Buildings.BoundaryConditions.SolarIrradiation</b><br>
</p>
<h3>Information</h3>

<p>
This package contains base classes that are used to construct the models in
<a href="Buildings_BoundaryConditions_SolarIrradiation.html#Buildings.BoundaryConditions.SolarIrradiation"
>Buildings.BoundaryConditions.SolarIrradiation</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi3b8f0fddb5c350e2cientS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.BrighteningCoefficient" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.BrighteningCoefficient"
>BrighteningCoefficient</a>
</td>
<td>Circumsolar and horizon brightening coefficients</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi08e045cbfcfd61b2ropicS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffuseIsotropic" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffuseIsotropic"
>DiffuseIsotropic</a>
</td>
<td>Diffuse solar irradiation on a tilted surface with an isotropic model</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi2ddff23bb35469e7PerezS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffusePerez" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffusePerez"
>DiffusePerez</a>
</td>
<td>Hemispherical diffuse irradiation on a tilted surface with Perez&#39;s anisotropic model</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditidf605925bb011a47rfaceS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DirectTiltedSurface" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DirectTiltedSurface"
>DirectTiltedSurface</a>
</td>
<td>Direct solar irradiation on a tilted surface</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi1a5fb1311274395eationS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.PartialSolarIrradiation" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.PartialSolarIrradiation"
>PartialSolarIrradiation</a>
</td>
<td>Partial model that is used to compute the direct and diffuse solar irradiation</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi53b9d95fa01f6480rMassS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.RelativeAirMass" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.RelativeAirMass"
>RelativeAirMass</a>
</td>
<td>Relative air mass</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi67c9583feaebba7ctnessS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyBrightness" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyBrightness"
>SkyBrightness</a>
</td>
<td>Sky brightness</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditie87571ee32fa72e3rnessS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyClearness" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyClearness"
>SkyClearness</a>
</td>
<td>Sky clearness</td>
</tr>
<tr>
<td><img src="Buildings.BoundaryConditi0dff03b03c613719mplesS.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses_Examples.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BrighteningCoefficient<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi3b8f0fddb5c350e2cientI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.BrighteningCoefficient" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.BrighteningCoefficient"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.BrighteningCoefficient</h2>
<p>
<b>Circumsolar and horizon brightening coefficients</b>
<br>
<br><img src="Buildings.BoundaryConditi3b8f0fddb5c350e2cientD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.BrighteningCoefficient">
</p>
<h3>Information</h3>

<p>
This component computes the circumsolar and horizon brightening coefficients.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>zen</td><td>Zenith angle of the sun beam [rad]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>skyCle</td><td>Sky clearness. skyCle=1: overcast sky; skyCle=8 clear sky</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>skyBri</td><td>Sky brightness [0,1]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>F1</td><td>Circumsolar brightening coefficient</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>F2</td><td>Horizon brightening coefficient</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> BrighteningCoefficient <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Circumsolar and horizon brightening coefficients&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">import </span>H = <a href="Buildings_Utilities_Math_Functions.html#Buildings.Utilities.Math.Functions.spliceFunction"
>Buildings.Utilities.Math.Functions.spliceFunction</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> zen(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degree&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle of the sun beam&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> skyCle <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sky clearness. skyCle=1: overcast sky; skyCle=8 clear sky&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> skyBri <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sky brightness [0,1]&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> F1 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Circumsolar brightening coefficient&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> F2 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Horizon brightening coefficient&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real F11;
  Real F12;
  Real F13;
  Real F21;
  Real F22;
  Real F23;
  Real d=0.01;
  Real a1;
  Real a2;
  Real a3;
  Real a4;
  Real a5;
  Real a6;
  Real a7;
  Real a8;
  Real b1;
  Real b2;
  Real b3;
  Real b4;
  Real b5;
  Real b6;
  Real b7;
  Real b8;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  b1 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    1.065 - skyCle,
    d);
  b2 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    1.23 - skyCle,
    d);
  b3 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    1.50 - skyCle,
    d);
  b4 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    1.95 - skyCle,
    d);
  b5 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    2.80 - skyCle,
    d);

  b6 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    4.50 - skyCle,
    d);
  b7 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    6.20 - skyCle,
    d);
  b8 =<span style="color: red; font-weight: normal; font-style: normal;"> H</span>(
    1,
    0,
    skyCle - 6.20,
    d);

  a1 = b1;
  a2 = b2 - b1;
  a3 = b3 - b2;
  a4 = b4 - b3;
  a5 = b5 - b4;
  a6 = b6 - b5;
  a7 = b7 - b6;
  a8 = b8;

  F11 = -0.0083117*a1 + 0.1299457*a2 + 0.3296958*a3 + 0.5682053*a4 + 0.8730280*
    a5 + 1.1326077*a6 + 1.0601591*a7 + 0.6777470*a8;
  F12 = 0.5877285*a1 + 0.6825954*a2 + 0.4868735*a3 + 0.1874525*a4 - 0.3920403*
    a5 - 1.2367284*a6 - 1.5999137*a7 - 0.3272588*a8;
  F13 = -0.0620636*a1 - 0.1513725*a2 - 0.2210958*a3 - 0.2951290*a4 - 0.3616149*
    a5 - 0.4118494*a6 - 0.3589221*a7 - 0.2504286*a8;
  F21 = -0.0596012*a1 - 0.0189325*a2 + 0.0554140*a3 + 0.1088631*a4 + 0.2255647*
    a5 + 0.2877813*a6 + 0.2642124*a7 + 0.1561313*a8;
  F22 = 0.0721249*a1 + 0.0659650*a2 - 0.0639588*a3 - 0.1519229*a4 - 0.4620442*
    a5 - 0.8230357*a6 - 1.1272340*a7 - 1.3765031*a8;
  F23 = -0.0220216*a1 - 0.0288748*a2 - 0.0260542*a3 - 0.0139754*a4 + 0.0012448*
    a5 + 0.0558651*a6 + 0.1310694*a7 + 0.2506212*a8;
  F1 =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMax</span>(
    0,
    F11 + F12*skyBri + F13*zen,
    0.01);
  F2 = F21 + F22*skyBri + F23*zen;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>BrighteningCoefficient;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DiffuseIsotropic<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi08e045cbfcfd61b2ropicI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffuseIsotropic" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffuseIsotropic"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.DiffuseIsotropic</h2>
<p>
<b>Diffuse solar irradiation on a tilted surface with an isotropic model</b>
<br>
<br><img src="Buildings.BoundaryConditi08e045cbfcfd61b2ropicD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffuseIsotropic">
</p>
<h3>Information</h3>

<p>
This component computes the hemispherical diffuse irradiation on a tilted surface.
The irradiation is composed of the diffuse horizontal solar irradiation and the irradiation
that has been reflected by the ground. Both components are adjusted to take into account
the tilt of the receiving surface.
</p>
<h4>References</h4>
P. Ineichen, R. Perez and R. Seals (1987).
<i>The Importance of Correct Albedo Determination for Adequately Modeling Energy Received by Tilted Surface</i>,
Solar Energy, 39(4): 301-305.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>rho</td><td>0.2</td><td>Ground reflectance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt angle [rad]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HDifHor</td><td>Horizontal diffuse solar radiation [W/m2]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HGloHor</td><td>Horizontal global radiation [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HGroDifTil</td><td>Diffuse solar irradiation on a tilted surfce from the ground [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HSkyDifTil</td><td>Diffuse solar irradiation on a tilted surfce from the sky [W/m2]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> DiffuseIsotropic <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Diffuse solar irradiation on a tilted surface with an isotropic model&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real rho=0.2 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ground reflectance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> til(displayUnit=&quot;deg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Surface tilt angle&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HDifHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Horizontal diffuse solar radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HGloHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Horizontal global radiation&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HGroDifTil(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;RadiantEnergyFluenceRate&quot;,
      <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Diffuse solar irradiation on a tilted surfce from the ground&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real til_c <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Cosine of tilt angle&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HSkyDifTil(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;RadiantEnergyFluenceRate&quot;,
      <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Diffuse solar irradiation on a tilted surfce from the sky&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  til_c =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.cos</span>(til);
  HSkyDifTil = 0.5*HDifHor*(1 + til_c);
  HGroDifTil = 0.5*HGloHor*rho*(1 - til_c);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DiffuseIsotropic;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DiffusePerez<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi2ddff23bb35469e7PerezI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffusePerez" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffusePerez"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.DiffusePerez</h2>
<p>
<b>Hemispherical diffuse irradiation on a tilted surface with Perez&#39;s anisotropic model</b>
<br>
<br><img src="Buildings.BoundaryConditi2ddff23bb35469e7PerezD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DiffusePerez">
</p>
<h3>Information</h3>

<p>
This component computes the hemispherical diffuse irradiation on a tilted surface by using an anisotropic model proposed by Perez.
</p>
<h4>References</h4>
<ul>
<li>
P. Ineichen, R. Perez and R. Seals (1987).
<i>The Importance of Correct Albedo Determination for Adequately Modeling Energy Received by Tilted Surface</i>,
Solar Energy, 39(4): 301-305.
</li>
<li>
R. Perez, R. Seals, P. Ineichen, R. Stewart and D. Menicucci (1987).
<i>A New Simplified Version of the Perez Diffuse Irradiance Model for Tilted Surface</i>,
Solar Energy, 39(3): 221-231.
</li>
<li>
R. Perez, P. Ineichen, R. Seals, J. Michalsky and R. Stewart (1990).
<i>Modeling Dyalight Availability and Irradiance Componets From Direct and Global Irradiance</i>,
Solar Energy, 44(5):271-289.
</li>
</ul>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>rho</td><td>0.2</td><td>Ground reflectance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt angle [rad]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>briCof1</td><td>Brightening Coeffcient F1</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>briCof2</td><td>Brightening Coeffcient F2</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HDifHor</td><td>Diffuse horizontal solar radiation [W/m2]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HGloHor</td><td>Global horizontal radiation [W/m2]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>zen</td><td>Zenith angle of the sun beam [rad]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>incAng</td><td>Solar incidence angle on the surface [rad]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HGroDifTil</td><td>Hemispherical diffuse solar irradiation on a tilted surfce from the ground [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HSkyDifTil</td><td>Hemispherical diffuse solar irradiation on a tilted surfce from the sky [W/m2]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> DiffusePerez <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Hemispherical diffuse irradiation on a tilted surface with Perez&#39;s anisotropic model&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real rho=0.2 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ground reflectance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> til(displayUnit=&quot;deg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Surface tilt angle&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> briCof1 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Brightening Coeffcient F1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> briCof2 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Brightening Coeffcient F2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HDifHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Diffuse horizontal solar radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HGloHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Global horizontal radiation&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> zen(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degree&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle of the sun beam&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> incAng(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degree&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Solar incidence angle on the surface&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HGroDifTil(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=
        &quot;RadiantEnergyFluenceRate&quot;, <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Hemispherical diffuse solar irradiation on a tilted surfce from the ground&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HSkyDifTil(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=
        &quot;RadiantEnergyFluenceRate&quot;, <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Hemispherical diffuse solar irradiation on a tilted surfce from the sky&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real a;
  Real b;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real bMin=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.cos</span>(Modelica.Constants.pi*85/180) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Lower bound for b&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  a =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMax</span>(
    0,
    <span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.cos</span>(incAng),
    0.01);
  b =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMax</span>(
    bMin,
    <span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.cos</span>(zen),
    0.01);
  HSkyDifTil = HDifHor*(0.5*(1 - briCof1)*(1 +<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.cos</span>(til)) +
    briCof1*a/b + briCof2*<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.sin</span>(til));
  HGroDifTil = HGloHor*0.5*rho*(1 -<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.cos</span>(til));

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DiffusePerez;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DirectTiltedSurface<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditidf605925bb011a47rfaceI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DirectTiltedSurface" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DirectTiltedSurface"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.DirectTiltedSurface</h2>
<p>
<b>Direct solar irradiation on a tilted surface</b>
<br>
<br><img src="Buildings.BoundaryConditidf605925bb011a47rfaceD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.DirectTiltedSurface">
</p>
<h3>Information</h3>

<p>
This component computes the direct solar irradiation on a tilted surface.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>incAng</td><td>Incidence angle of the sun beam on a tilted surface [rad]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HDirNor</td><td>Direct normal radiation [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HDirTil</td><td>Direct solar irradiation on a tilted surfce [W/m2]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> DirectTiltedSurface <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Direct solar irradiation on a tilted surface&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> incAng(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degree&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Incidence angle of the sun beam on a tilted surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HDirNor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Direct normal radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HDirTil(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=
        &quot;RadiantEnergyFluenceRate&quot;, <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Direct solar irradiation on a tilted surfce&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  HDirTil :=<span style="color: red; font-weight: normal; font-style: normal;"> max</span>(0,<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.cos</span>(incAng)*HDirNor);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DirectTiltedSurface;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialSolarIrradiation<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi1a5fb1311274395eationI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.PartialSolarIrradiation" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.PartialSolarIrradiation"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.PartialSolarIrradiation</h2>
<p>
<b>Partial model that is used to compute the direct and diffuse solar irradiation</b>
<br>
<br><img src="Buildings.BoundaryConditi1a5fb1311274395eationD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.PartialSolarIrradiation">
</p>
<h3>Information</h3>

<p>
This is a partial model that is used to implement the direct and diffuse irradiation.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt [rad]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>H</td><td>Radiation per unit area [W/m2]</td></tr>
<tr><td><a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</a></td><td>weaBus</td><td>Bus with weather data</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">block</span> PartialSolarIrradiation <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Partial model that is used to compute the direct and diffuse solar irradiation&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> til(displayUnit=&quot;deg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Surface tilt&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> H(
     <span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;RadiantEnergyFluenceRate&quot;,
     <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Radiation per unit area&quot;</span>;

  <a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>WeatherData.Bus</a> weaBus <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Bus with weather data&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>PartialSolarIrradiation;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RelativeAirMass<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi53b9d95fa01f6480rMassI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.RelativeAirMass" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.RelativeAirMass"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.RelativeAirMass</h2>
<p>
<b>Relative air mass</b>
<br>
<br><img src="Buildings.BoundaryConditi53b9d95fa01f6480rMassD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.RelativeAirMass">
</p>
<h3>Information</h3>

<p>
This component computes the relative air mass for sky brightness.
</p>
<h4>References</h4>
R. Perez (1999).
<i>Fortran Function irrpz.f</i>,
Emailed by R. Perez to F.C. Winkelmann on May 21, 1999.<br/>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>zen</td><td>Zenith angle of the sun beam [rad]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>relAirMas</td><td>Relative air mass</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> RelativeAirMass <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Relative air mass&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> zen(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degree&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle of the sun beam&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> relAirMas <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Relative air mass&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real zenLim <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle bounded from above by 90 degree&quot;</span>;
  Real zenDeg <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle in degree&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  zenLim =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMin</span>(
    zen,
    Modelica.Constants.pi/2,
    0.01);
  zenDeg = zenLim*180/Modelica.Constants.pi;
  relAirMas = 1/(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.cos</span>(zenLim) + 0.15*(93.9 - zenDeg)^(-1.253));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>RelativeAirMass;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SkyBrightness<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditi67c9583feaebba7ctnessI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyBrightness" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyBrightness"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.SkyBrightness</h2>
<p>
<b>Sky brightness</b>
<br>
<br><img src="Buildings.BoundaryConditi67c9583feaebba7ctnessD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyBrightness">
</p>
<h3>Information</h3>

<p>
This component computes the sky brightness.
</p>
<h4>References</h4>
R. Perez, P. Ineichen, R. Seals, J. Michalsky and R. Stewart (1990).
<i>Modeling Dyalight Availability and Irradiance Componets From Direct and Global Irradiance</i>,
Solar Energy, 44(5):271-289.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>relAirMas</td><td>Relative air mass</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HDifHor</td><td>Horizontal diffuse solar radiation [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>skyBri</td><td>Sky brightness</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> SkyBrightness <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sky brightness&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> relAirMas <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Relative air mass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HDifHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Horizontal diffuse solar radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> skyBri <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sky brightness&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  skyBri =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMin</span>(
    HDifHor*relAirMas/1367,
    1,
    0.025);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SkyBrightness;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SkyClearness<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.BoundaryConditie87571ee32fa72e3rnessI.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyClearness" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyClearness"></a><a href="Buildings_BoundaryConditions_SolarIrradiation_BaseClasses.html#Buildings.BoundaryConditions.SolarIrradiation.BaseClasses"
>Buildings.BoundaryConditions.SolarIrradiation.BaseClasses</a>.SkyClearness</h2>
<p>
<b>Sky clearness</b>
<br>
<br><img src="Buildings.BoundaryConditie87571ee32fa72e3rnessD.png" alt="Buildings.BoundaryConditions.SolarIrradiation.BaseClasses.SkyClearness">
</p>
<h3>Information</h3>

<p>
This component computes the sky clearness.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>zen</td><td>Zenith angle of the sun beam [rad]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HDifHor</td><td>Horizontal diffuse solar radiation [W/m2]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>HGloHor</td><td>Horizontal global solar radiation [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>skyCle</td><td>Sky clearness. skyCle=1: overast sky; skyCle=8: clear sky</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> SkyClearness <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sky clearness&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> zen(
    quantity=&quot;Angle&quot;,
    unit=&quot;rad&quot;,
    displayUnit=&quot;degreeC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zenith angle of the sun beam&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HDifHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Horizontal diffuse solar radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> HGloHor(quantity=
        &quot;RadiantEnergyFluenceRate&quot;, unit=&quot;W/m2&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Horizontal global solar radiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> skyCle <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sky clearness. skyCle=1: overast sky; skyCle=8: clear sky&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real tmp1 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Intermediate variable&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  tmp1 := 5.534e-6*(zen*180/Modelica.Constants.pi)^3;

  skyCle :=<span style="color: red; font-weight: normal; font-style: normal;"> smooth</span>(1, <span style="color: blue; font-weight: normal; font-style: normal;">if </span>(HGloHor &lt; Modelica.Constants.small)<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>1<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>
    <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothLimit</span>(
    (HGloHor/<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMax</span>(
      HDifHor,
      1e-4,
      1e-5) + tmp1)/(1 + tmp1),
    1,
    8,
    0.1));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SkyClearness;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:22:15 2015.
</address>
</body>
</html>
