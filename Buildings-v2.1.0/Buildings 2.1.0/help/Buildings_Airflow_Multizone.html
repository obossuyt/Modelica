<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Airflow.Multizone</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with models for multizone airflow and contaminant transport&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Multizone<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone"></a><a href="Buildings_Airflow.html#Buildings.Airflow"
>Buildings.Airflow</a>.Multizone</h2>
<p>
<b>Package with models for multizone airflow and contaminant transport</b><br>
</p>
<h3>Information</h3>

This package provides
models to compute the airflow and contaminant transport between different rooms and between
a room and the exterior environment.
See the <a href="Buildings_Airflow_Multizone_UsersGuide.html#Buildings.Airflow.Multizone.UsersGuide"
>
User's Guide</a> for more information.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</a> (Icon for package containing variants).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.UsersGuideS.png" alt="Buildings.Airflow.Multizone.UsersGuide" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_UsersGuide.html#Buildings.Airflow.Multizone.UsersGuide"
>UsersGuide</a>
</td>
<td>User&#39;s Guide</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo429dd7a2e1448ad2dOpenS.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOpen" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.DoorDiscretizedOpen"
>DoorDiscretizedOpen</a>
</td>
<td>Door model using discretization along height coordinate</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo24c8885cacdf11a3rableS.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOperable" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.DoorDiscretizedOperable"
>DoorDiscretizedOperable</a>
</td>
<td>Door model using discretization along height coordinate</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo90b343542b5dabb1eAreaS.png" alt="Buildings.Airflow.Multizone.EffectiveAirLeakageArea" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.EffectiveAirLeakageArea"
>EffectiveAirLeakageArea</a>
</td>
<td>Effective air leakage area</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.MediumColumnS.png" alt="Buildings.Airflow.Multizone.MediumColumn" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumn"
>MediumColumn</a>
</td>
<td>Vertical shaft with no friction and no storage of heat and mass</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo04c266c67ac23223namicS.png" alt="Buildings.Airflow.Multizone.MediumColumnDynamic" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumnDynamic"
>MediumColumnDynamic</a>
</td>
<td>Vertical shaft with no friction and storage of heat and mass</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.OrificeS.png" alt="Buildings.Airflow.Multizone.Orifice" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.Orifice"
>Orifice</a>
</td>
<td>Orifice</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo8d72ccaa8cc04067w_ACSS.png" alt="Buildings.Airflow.Multizone.ZonalFlow_ACS" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.ZonalFlow_ACS"
>ZonalFlow_ACS</a>
</td>
<td>Zonal flow with input air change per second</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo838a391f29e8fbf7_flowS.png" alt="Buildings.Airflow.Multizone.ZonalFlow_m_flow" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.ZonalFlow_m_flow"
>ZonalFlow_m_flow</a>
</td>
<td>Zonal flow with input air change per second</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.TypesS.png" alt="Buildings.Airflow.Multizone.Types" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_Types.html#Buildings.Airflow.Multizone.Types"
>Types</a>
</td>
<td>Package with type definitions</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.ExamplesS.png" alt="Buildings.Airflow.Multizone.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_Examples.html#Buildings.Airflow.Multizone.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.ExamplesS.png" alt="Buildings.Airflow.Multizone.Validation" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_Validation.html#Buildings.Airflow.Multizone.Validation"
>Validation</a>
</td>
<td>Collection of validation models</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizone.BaseClassesS.png" alt="Buildings.Airflow.Multizone.BaseClasses" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>BaseClasses</a>
</td>
<td>Package with base classes for Buildings.Airflow.Multizone</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DoorDiscretizedOpen<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo429dd7a2e1448ad2dOpenI.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOpen" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.DoorDiscretizedOpen"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.DoorDiscretizedOpen</h2>
<p>
<b>Door model using discretization along height coordinate</b>
<br>
<br><img src="Buildings.Airflow.Multizo429dd7a2e1448ad2dOpenD.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOpen">
</p>
<h3>Information</h3>

<p>
This model describes the bi-directional air flow through an open door.
</p>
<p>
To compute the bi-directional flow,
the door is discretize along the height coordinate.
An orifice equation is used to compute the flow for each compartment.
</p>
<p>
In this model, the door is always open.
Use the model
<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.DoorDiscretizedOperable"
>
Buildings.Airflow.Multizone.DoorDiscretizedOperable</a>
for a door that can either be open or closed.
</p>

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"
>Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized</a> (Door model using discretization along height coordinate).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>vZer</td><td>0.001</td><td>Minimum velocity to prevent zero flow. Recommended: 0.001 [m/s]</td></tr>
<tr><td>Integer</td><td>nCom</td><td>10</td><td>Number of compartments for the discretization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.01</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended: 0.01 [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a1_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a1 [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a2_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a2 [kg/m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Geometry</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wOpe</td><td>0.9</td><td>Width of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hOpe</td><td>2.1</td><td>Height of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hA</td><td>2.7/2</td><td>Height of reference pressure zone A [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hB</td><td>2.7/2</td><td>Height of reference pressure zone B [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td>Real</td><td>CD</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> DoorDiscretizedOpen <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Door model using discretization along height coordinate&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"
>Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized</a>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real mFixed = 0.5 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Fixed value for flow coefficient&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real gamma(min=1) = 1.5 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Normalized flow rate where dphi(0)/dpi intersects phi(1)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real a = gamma <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real b = 1/8*mFixed^2 - 3*gamma - 3/2*mFixed + 35.0/8 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real c = -1/4*mFixed^2 + 3*gamma + 5/2*mFixed - 21.0/4 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real d = 1/8*mFixed^2 - gamma - mFixed + 15.0/8 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  m=mFixed;
  A = wOpe*hOpe;
  kVal = CD*dA*<span style="color: red; font-weight: normal; font-style: normal;">sqrt</span>(2/rho_default);
  <span style="color: #006400; font-weight: normal; font-style: normal;">// orifice equation</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nCom<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
    dV_flow[i] =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM</span>(
      k=kVal,
      dp=dpAB[i],
      m=mFixed,
      a=a,
      b=b,
      c=c,
      d=d,
      dp_turbulent=dp_turbulent);
  <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DoorDiscretizedOpen;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DoorDiscretizedOperable<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo24c8885cacdf11a3rableI.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOperable" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.DoorDiscretizedOperable"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.DoorDiscretizedOperable</h2>
<p>
<b>Door model using discretization along height coordinate</b>
<br>
<br><img src="Buildings.Airflow.Multizo24c8885cacdf11a3rableD.png" alt="Buildings.Airflow.Multizone.DoorDiscretizedOperable">
</p>
<h3>Information</h3>

<p>
This model describes the bi-directional air flow through an open door.
</p>
<p>
To compute the bi-directional flow,
the door is discretize along the height coordinate, and uses
an orifice equation to compute the flow for each compartment.
</p>
<p>
The door can be either open or closed, depending on the input signal
<i>y</i>.
Set <i>y=0</i> if the door is closed, and <i>y=1</i>
if the door is open.
Use the model
<a href="modelica://Buildings.Airflow.Multizone.Crack">
Buildings.Airflow.Multizone.Crack
</a> for a door that is always closed.

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"
>Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized</a> (Door model using discretization along height coordinate).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>vZer</td><td>0.001</td><td>Minimum velocity to prevent zero flow. Recommended: 0.001 [m/s]</td></tr>
<tr><td>Integer</td><td>nCom</td><td>10</td><td>Number of compartments for the discretization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.01</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended: 0.01 [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a1_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a1 [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a2_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a2 [kg/m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Geometry</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wOpe</td><td>0.9</td><td>Width of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hOpe</td><td>2.1</td><td>Height of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hA</td><td>2.7/2</td><td>Height of reference pressure zone A [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hB</td><td>2.7/2</td><td>Height of reference pressure zone B [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td>Real</td><td>CD</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Closed aperture rating conditions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dpCloRat</td><td>4</td><td>Pressure drop at rating condition [Pa]</td></tr>
<tr><td>Real</td><td>CDCloRat</td><td>1</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Closed aperture</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>LClo</td><td>&nbsp;</td><td>Effective leakage area [m2]</td></tr>
<tr><td>Real</td><td>CDClo</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr><td>Real</td><td>mClo</td><td>0.65</td><td>Flow exponent for crack</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Open aperture</td></tr>
<tr><td>Real</td><td>CDOpe</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr><td>Real</td><td>mOpe</td><td>0.5</td><td>Flow exponent for door</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y</td><td>Opening signal, 0=closed, 1=open [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> DoorDiscretizedOperable <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Door model using discretization along height coordinate&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"
>Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized</a>;

   <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dpCloRat(min=0)=4 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;|Closed aperture rating conditions|Pressure drop at rating condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real CDCloRat(min=0, max=1)=1 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;|Closed aperture rating conditions|Discharge coefficient&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> LClo(min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;|Closed aperture|Effective leakage area&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real CDOpe=0.65 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;|Open aperture|Discharge coefficient&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real CDClo=0.65 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;|Closed aperture|Discharge coefficient&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real mOpe = 0.5 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;|Open aperture|Flow exponent for door&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real mClo= 0.65 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;|Closed aperture|Flow exponent for crack&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> y(min=0, max=1, unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Opening signal, 0=closed, 1=open&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
 <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AOpe=wOpe*hOpe <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Open aperture area&quot;</span>;
 <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AClo(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Closed aperture area&quot;</span>;

 Real kOpe <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Open aperture flow coefficient, k = V_flow/ dp^m&quot;</span>;
 Real kClo <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Closed aperture flow coefficient, k = V_flow/ dp^m&quot;</span>;

 Real fraOpe <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Fraction of aperture that is open&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  AClo=CDClo/CDCloRat * LClo * dpCloRat^(0.5-mClo);
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  fraOpe =y;
  kClo = CDClo * AClo/nCom *<span style="color: red; font-weight: normal; font-style: normal;"> sqrt</span>(2/rho_default);
  kOpe = CDOpe * AOpe/nCom *<span style="color: red; font-weight: normal; font-style: normal;"> sqrt</span>(2/rho_default);

  <span style="color: #006400; font-weight: normal; font-style: normal;">// flow exponent</span>
  m    = fraOpe*mOpe + (1-fraOpe)*mClo;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// opening area</span>
  A = fraOpe*AOpe + (1-fraOpe)*AClo;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// friction coefficient for power law</span>
  kVal = fraOpe*kOpe + (1-fraOpe)*kClo;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// orifice equation</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nCom<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
    dV_flow[i] =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Airflow.Multizone.BaseClasses.powerLaw</span>(
      k=kVal,
      dp=dpAB[i],
      m=m,
      dp_turbulent=dp_turbulent);
  <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DoorDiscretizedOperable;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE EffectiveAirLeakageArea<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo90b343542b5dabb1eAreaI.png" alt="Buildings.Airflow.Multizone.EffectiveAirLeakageArea" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.EffectiveAirLeakageArea"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.EffectiveAirLeakageArea</h2>
<p>
<b>Effective air leakage area</b>
<br>
<br><img src="Buildings.Airflow.Multizo90b343542b5dabb1eAreaD.png" alt="Buildings.Airflow.Multizone.EffectiveAirLeakageArea">
</p>
<h3>Information</h3>

<p>
This model describes the one-directional pressure driven
air flow through a crack-like opening.
</p>
<p>
The opening is modeled as an orifice. The orifice area
is parameterized by processing the effective air leakage area, the discharge coefficient and pressure drop at a reference condition.
The effective air leakage area can be obtained, for example,
from the ASHRAE fundamentals (ASHRAE, 1997, p. 25.18). In
the ASHRAE fundamentals, the effective air leakage area is
based on a reference pressure difference of <i>4</i> Pa and a discharge
coefficient of <i>1</i>.
A similar model is also used in the CONTAM software (Dols and Walton, 2002).
Dols and Walton (2002) recommend to use for the flow exponent
<i>m=0.6</i> to <i>m=0.7</i> if the flow exponent is not
reported with the test results.

<h4>References</h4>
<ul>
<li>
<b>ASHRAE, 1997.</b>
<i>ASHRAE Fundamentals</i>,
American Society of Heating, Refrigeration and Air-Conditioning
Engineers, 1997.
<li>
<b>Dols and Walton, 2002.</b>
W. Stuart Dols and George N. Walton, <i>CONTAMW 2.0 User Manual,
Multizone Airflow and Contaminant Transport Analysis Software</i>,
Building and Fire Research Laboratory,
National Institute of Standards and Technology,
Tech. Report NISTIR 6921,
November, 2002.
</ul>

<p>Extends from <a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.Orifice"
>Buildings.Airflow.Multizone.Orifice</a> (Orifice).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td>Real</td><td>m</td><td>0.65</td><td>Flow exponent, m=0.5 for turbulent, m=1 for laminar</td></tr>
<tr><td>Boolean</td><td>useDefaultProperties</td><td>true</td><td>Set to false to use density and viscosity based on actual medium state, rather than using default values</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.1</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended = 0.1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>lWet</td><td>sqrt(A)</td><td>Wetted perimeter used for Reynolds number calculation [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>L</td><td>&nbsp;</td><td>Effective leakage area [m2]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>CD/CDRat*L*dpRat^(0.5 - m)</td><td>Area of orifice [m2]</td></tr>
<tr><td>Real</td><td>CD</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Rating conditions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dpRat</td><td>4</td><td>Pressure drop at rating condition [Pa]</td></tr>
<tr><td>Real</td><td>CDRat</td><td>1</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> EffectiveAirLeakageArea <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Effective air leakage area&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.Orifice"
>Buildings.Airflow.Multizone.Orifice</a>(
    m=0.65,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>A=CD/CDRat * L * dpRat^(0.5-m));

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dpRat(min=0)=4 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;|Rating conditions|Pressure drop at rating condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real CDRat(min=0, max=1)=1 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;|Rating conditions|Discharge coefficient&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> L(min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Effective leakage area&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>EffectiveAirLeakageArea;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MediumColumn<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizone.MediumColumnI.png" alt="Buildings.Airflow.Multizone.MediumColumn" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.MediumColumn"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.MediumColumn</h2>
<p>
<b>Vertical shaft with no friction and no storage of heat and mass</b>
<br>
<br><img src="Buildings.Airflow.Multizone.MediumColumnD.png" alt="Buildings.Airflow.Multizone.MediumColumn">
</p>
<h3>Information</h3>

<p>
This model describes the pressure difference of a vertical medium
column. It can be used to model the pressure difference caused by
stack effect.
</p>
<p>
The model can be used with the following three configurations, which are
controlled by the setting of the parameter <code>densitySelection</code>:
</p>
<ul>
<li>
<code>top</code>:
Use this setting to use the density from the volume that is connected
to <code>port_a</code>.
</li>
<li>
<code>bottom</code>:
Use this setting to use the density from the volume that is connected
to <code>port_b</code>.
</li>
<li>
<code>actual</code>:
Use this setting to use the density based on the actual flow direction.
</li>
</ul>
<p>
The settings <code>top</code> and <code>bottom</code>
should be used when rooms or different floors of a building are
connected since multizone airflow models assume that each floor is completely mixed.
For these two seetings, this model will compute the pressure between the center of the room
and an opening that is at height <code>h</code> relative to the center of the room.
The setting <code>actual</code> may be used to model a chimney in which
a column of air will change its density based on the flow direction.
</p>
<p>
In this model, the parameter <code>h</code> must always be positive, and the port <code>port_a</code> must be
at the top of the column.
</p>
<p>
For a steady-state model, use
<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumnDynamic"
>
Buildings.Airflow.Multizone.MediumColumnDynamic</a> instead of this model.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>h</td><td>3</td><td>Height of shaft [m]</td></tr>
<tr><td><a href="Buildings_Airflow_Multizone_Types.html#Buildings.Airflow.Multizone.Types.densitySelection"
>densitySelection</a></td><td>densitySelection</td><td>&nbsp;</td><td>Select how to pick density</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MediumColumn <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Vertical shaft with no friction and no storage of heat and mass&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">import </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium in the component&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> h(min=0) = 3 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Height of shaft&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="Buildings_Airflow_Multizone_Types.html#Buildings.Airflow.Multizone.Types.densitySelection"
>Buildings.Airflow.Multizone.Types.densitySelection</a> densitySelection <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Select how to pick density&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean allowFlowReversal=true <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumn.Medium"
>Medium</a>,
    m_flow(min=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>-Constants.inf<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0),
    p(start=Medium.p_default)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector a (positive design flow direction is from port_a to port_b)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> port_b(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumn.Medium"
>Medium</a>,
    m_flow(max=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>+Constants.inf<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0),
    p(start=Medium.p_default)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector b (positive design flow direction is from port_a to port_b)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> V_flow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Volume flow rate at inflowing port (positive when flow from port_a to port_b)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow(start=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp(start=0, displayUnit=&quot;Pa&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure difference between port_a and port_b&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Density in medium column&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_a=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
      port_a.p,
      <span style="color: red; font-weight: normal; font-style: normal;">actualStream</span>(port_a.h_outflow),
      <span style="color: red; font-weight: normal; font-style: normal;">actualStream</span>(port_a.Xi_outflow)) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium properties in port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> Xi[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass fraction used to compute density&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">/*
   assert(abs(Medium.density(Medium.setState_pTX(
    Medium.p_default,
    Medium.T_default,
    Medium.X_default)) - Medium.density(Medium.setState_pTX(
    Medium.p_default,
    Medium.T_default + 5,
    Medium.X_default))) &gt; 1E-10,
    &quot;Error: The density of the medium that is used to compute buoyancy force is independent of temperature.&quot;
    + &quot;\n       You need to select a different medium model.&quot;);
    */</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// The next assert tests for all allowed values of the enumeration.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Testing against densitySelection &gt; 0 gives an error in OpenModelica as enumerations start with 1.</span>
  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(densitySelection == Buildings.Airflow.Multizone.Types.densitySelection.fromTop<span style="color: blue; font-weight: normal; font-style: normal;">
         or </span>
         densitySelection == Buildings.Airflow.Multizone.Types.densitySelection.fromBottom<span style="color: blue; font-weight: normal; font-style: normal;">
         or </span>
         densitySelection == Buildings.Airflow.Multizone.Types.densitySelection.actual,
    &quot;You need to set the parameter \&quot;densitySelection\&quot; for the model MediumColumn.&quot;);
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Design direction of mass flow rate</span>
  m_flow = port_a.m_flow;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Pressure difference between ports</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Xi is computed first as it is used in two expression, and in one</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// of them only one component is used.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// We test for Medium.nXi == 0 as Modelica.Media.Air.SimpleAir has no</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// moisture and hence Xi[1] is an illegal statement.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// We first compute temperature and then invoke a density function that</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// takes temperature as an argument. Simply calling a density function</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// of a medium that takes enthalpy as an argument would be dangerous</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// as different media can have different datum for the enthalpy.</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>(densitySelection == Buildings.Airflow.Multizone.Types.densitySelection.fromTop)<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      Xi =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.Xi_outflow);
      rho =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.density_pTX</span>(
        p=port_a.p,
        T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(port_a.p,<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.h_outflow), Xi)),
        X_w=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>Medium.nXi == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>Xi[1]);
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>(densitySelection == Buildings.Airflow.Multizone.Types.densitySelection.fromBottom)<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      Xi =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.Xi_outflow);
      rho =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.density_pTX</span>(
        p=port_b.p,
        T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(port_b.p,<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.h_outflow), Xi)),
        X_w=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>Medium.nXi == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>Xi[1]);
   <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      Xi =<span style="color: red; font-weight: normal; font-style: normal;"> actualStream</span>(port_a.Xi_outflow);
      rho =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.density_pTX</span>(
        p=port_a.p,
        T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(port_a.p,<span style="color: red; font-weight: normal; font-style: normal;"> actualStream</span>(port_a.h_outflow), Xi)),
        X_w=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>Medium.nXi == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>Xi[1]);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

  V_flow = m_flow/<span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(sta_a);

  dp = port_a.p - port_b.p;
  dp = -h*rho*Modelica.Constants.g_n;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Isenthalpic state transformation (no storage and no loss of energy)</span>
  port_a.h_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.h_outflow);
  port_b.h_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.h_outflow);

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Mass balance (no storage)</span>
  port_a.m_flow + port_b.m_flow = 0;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Transport of substances</span>
  port_a.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.Xi_outflow);
  port_b.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.Xi_outflow);

  port_a.C_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.C_outflow);
  port_b.C_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.C_outflow);

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MediumColumn;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MediumColumnDynamic<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo04c266c67ac23223namicI.png" alt="Buildings.Airflow.Multizone.MediumColumnDynamic" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.MediumColumnDynamic"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.MediumColumnDynamic</h2>
<p>
<b>Vertical shaft with no friction and storage of heat and mass</b>
<br>
<br><img src="Buildings.Airflow.Multizo04c266c67ac23223namicD.png" alt="Buildings.Airflow.Multizone.MediumColumnDynamic">
</p>
<h3>Information</h3>

<p>
This model contains a completely mixed fluid volume and
models that take into account the pressure difference of
a medium column that is at the same temperature as the
fluid volume. It can be used to model the pressure difference
caused by a stack effect.</p>
<p>
Set the parameter <code>use_HeatTransfer=true</code> to expose
a <code>heatPort</code>. This <code>heatPort</code> can be used
to add or subtract heat from the volume. This allows, for example,
to use this model in conjunction with a model for heat transfer through
walls to model a solar chimney that stores heat.
</p>
<p>
For a steady-state model, use
<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumn"
>
Buildings.Airflow.Multizone.MediumColumn</a> instead of this model.
</p>
<p>In this model, the parameter <code>h</code> must always be positive, and the port <code>port_a</code> must be
at the top of the column.

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a> (Declarations for lumped volumes).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>h</td><td>3</td><td>Height of shaft [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Volume</a></td><td>V</td><td>&nbsp;</td><td>Volume in medium shaft [m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition, used only for steady-state model</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td>Real</td><td>mSenFac</td><td>1</td><td>Factor for scaling the sensible thermal mass of the volume</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Heat transfer</td></tr>
<tr><td>Boolean</td><td>use_HeatTransfer</td><td>false</td><td>= true to use the HeatTransfer model</td></tr>
<tr><td colspan="2">replaceable model HeatTransfer</td><td>Modelica.Fluid.Vessels.BaseC...</td><td>Wall heat transfer</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heatPort</td><td>Heat port to exchange energy with the fluid volume</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="3"><b>Assumptions</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="3">Heat transfer</td></tr>
<tr><td colspan="2">replaceable model HeatTransfer</td><td>Wall heat transfer</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MediumColumnDynamic <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Vertical shaft with no friction and storage of heat and mass&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">import </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium in the component&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> h(min=0) = 3 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Height of shaft&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean allowFlowReversal=true <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal(min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Nominal mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumnDynamic.Medium"
>Medium</a>,
    m_flow(min=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>-Constants.inf<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0),
    p(start=Medium.p_default)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector a (positive design flow direction is from port_a to port_b)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> port_b(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumnDynamic.Medium"
>Medium</a>,
    m_flow(max=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>+Constants.inf<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0),
    p(start=Medium.p_default)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector b (positive design flow direction is from port_a to port_b)&quot;</span>;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// m_flow_nominal is not used by vol, since this component</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// can only be configured as a dynamic model.</span>
  <a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Fluid.MixingVolumes.MixingVolume</a> vol(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nPorts=2,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumnDynamic.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal = m_flow_nominal,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>V=V,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>energyDynamics=energyDynamics,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>massDynamics=massDynamics,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>p_start=p_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>T_start=T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>X_start=X_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>C_start=C_start) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Air volume in the shaft&quot;</span>;

  <a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumn"
>MediumColumn</a> colTop(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumnDynamic.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>densitySelection=Buildings.Airflow.Multizone.Types.densitySelection.fromBottom,
    h=h/2,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>allowFlowReversal=allowFlowReversal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium column that connects to top port&quot;</span>;

  <a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone.MediumColumn"
>MediumColumn</a> colBot(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Airflow_Multizone_Medium.html#Buildings.Airflow.Multizone.MediumColumnDynamic.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>densitySelection=Buildings.Airflow.Multizone.Types.densitySelection.fromTop,
    h=h/2,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>allowFlowReversal=allowFlowReversal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium colum that connects to bottom port&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Modelica.SIunits.Volume</a> V <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Volume in medium shaft&quot;</span>;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Heat transfer through boundary</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean use_HeatTransfer = false <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;= true to use the HeatTransfer model&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">model</span> HeatTransfer =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer"
>Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer</a>
    <span style="color: blue; font-weight: normal; font-style: normal;">constrainedby </span>
    Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.PartialVesselHeatTransfer <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Wall heat transfer&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> heatPort <span style="color: blue; font-weight: normal; font-style: normal;">if </span>use_HeatTransfer <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Heat port to exchange energy with the fluid volume&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(colBot.port_a, vol.ports[1]);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(vol.ports[2], colTop.port_b);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(colTop.port_a, port_a);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(colBot.port_b, port_b);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heatPort, vol.heatPort);

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MediumColumnDynamic;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Orifice<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizone.OrificeI.png" alt="Buildings.Airflow.Multizone.Orifice" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.Orifice"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.Orifice</h2>
<p>
<b>Orifice</b>
<br>
<br><img src="Buildings.Airflow.Multizone.OrificeD.png" alt="Buildings.Airflow.Multizone.Orifice">
</p>
<h3>Information</h3>

<p>
This model describes the mass flow rate and pressure difference relation
of an orifice in the form
<pre>
    V_flow = k * dp^m,
</pre>
where <code>k</code> is a variable and
<code>m</code> a parameter. For turbulent flow, set <code>m=1/2</code> and
for laminar flow, set <code>m=1</code>.
Large openings are characterized by values close to <code>0.5</code>,
while values near <code>0.65</code> have been found for small
crack-like openings (Dols and Walton, 2002).

<h4>References</h4>
<ul>
<li>
W. Stuart Dols and George N. Walton, <i>CONTAMW 2.0 User Manual,
Multizone Airflow and Contaminant Transport Analysis Software</i>,
Building and Fire Research Laboratory,
National Institute of Standards and Technology,
Tech. Report NISTIR 6921,
November, 2002.
</ul>

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance"
>Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance</a> (Flow resistance that uses the power law).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td>Real</td><td>m</td><td>0.5</td><td>Flow exponent, m=0.5 for turbulent, m=1 for laminar</td></tr>
<tr><td>Boolean</td><td>useDefaultProperties</td><td>true</td><td>Set to false to use density and viscosity based on actual medium state, rather than using default values</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.1</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended = 0.1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>lWet</td><td>sqrt(A)</td><td>Wetted perimeter used for Reynolds number calculation [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Area of orifice [m2]</td></tr>
<tr><td>Real</td><td>CD</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Orifice <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Orifice&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance"
>Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance</a>(
    m=0.5,
    k = CD * A *<span style="color: red; font-weight: normal; font-style: normal;"> sqrt</span>(2.0/rho_default));

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real CD=0.65 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;|Orifice characteristics|Discharge coefficient&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Orifice;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ZonalFlow_ACS<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo8d72ccaa8cc04067w_ACSI.png" alt="Buildings.Airflow.Multizone.ZonalFlow_ACS" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.ZonalFlow_ACS"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.ZonalFlow_ACS</h2>
<p>
<b>Zonal flow with input air change per second</b>
<br>
<br><img src="Buildings.Airflow.Multizo8d72ccaa8cc04067w_ACSD.png" alt="Buildings.Airflow.Multizone.ZonalFlow_ACS">
</p>
<h3>Information</h3>

<p>
This model computes the air exchange between volumes.
</p>
<p>
Input is the air change per seconds. The volume flow rate is computed as
</p>
<pre>
  V_flow = ACS * V
</pre>
<p>
where <code>ACS</code> is an input and the volume <code>V</code> is a parameter.
</p>

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"
>Buildings.Airflow.Multizone.BaseClasses.ZonalFlow</a> (Flow across zonal boundaries of a room).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr><td>Boolean</td><td>useDefaultProperties</td><td>false</td><td>Set to true to use constant density</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Volume</a></td><td>V</td><td>&nbsp;</td><td>Volume of room [m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>ACS</td><td>Air change per seconds, relative to the smaller of the two volumes</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> ZonalFlow_ACS <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zonal flow with input air change per second&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"
>Buildings.Airflow.Multizone.BaseClasses.ZonalFlow</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean useDefaultProperties = false <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set to true to use constant density&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Modelica.SIunits.Volume</a> V <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Volume of room&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> ACS <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Air change per seconds, relative to the smaller of the two volumes&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> V_flow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Volume flow rate at standard pressure&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_default =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.setState_pTX</span>(T=Medium.T_default,
         p=Medium.p_default, X=Medium.X_default);
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_default=<span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(sta_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Density, used to compute fluid volume&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_a1_inflow=
      <span style="color: red; font-weight: normal; font-style: normal;">Medium1.setState_phX</span>(port_a1.p, port_b1.h_outflow, port_b1.Xi_outflow) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium properties in port_a1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_a2_inflow=
      <span style="color: red; font-weight: normal; font-style: normal;">Medium1.setState_phX</span>(port_a2.p, port_b2.h_outflow, port_b2.Xi_outflow) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium properties in port_a2&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">when </span>useDefaultProperties<span style="color: blue; font-weight: normal; font-style: normal;"> and </span><span style="color: red; font-weight: normal; font-style: normal;">initial</span>()<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
   <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(<span style="color: red; font-weight: normal; font-style: normal;"> abs</span>(1-rho_default/((<span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(sta_a1_inflow) +<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(sta_a2_inflow))/2))  &lt; 0.2,
    &quot;Wrong density. Densities need to match.&quot;);
<span style="color: #006400; font-weight: normal; font-style: normal;">// The next three lines have been removed as they cause</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">// a compilation error in OpenModelica.</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//    + &quot;\n Medium.density(sta_a1) = &quot; + String(Medium.density(sta_a1_inflow))</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//    + &quot;\n Medium.density(sta_a2) = &quot; + String(Medium.density(sta_a2_inflow))</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//    + &quot;\n rho_nominal            = &quot; + String(rho_default));</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">end when</span>;
  V_flow = V * ACS;
  m_flow / V_flow = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>useDefaultProperties<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>rho_default<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(sta_a1_inflow) +<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(sta_a2_inflow))/2;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// assign variable in base class</span>
  port_a1.m_flow = m_flow;
  port_a2.m_flow = m_flow;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>ZonalFlow_ACS;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ZonalFlow_m_flow<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo838a391f29e8fbf7_flowI.png" alt="Buildings.Airflow.Multizone.ZonalFlow_m_flow" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.ZonalFlow_m_flow"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.ZonalFlow_m_flow</h2>
<p>
<b>Zonal flow with input air change per second</b>
<br>
<br><img src="Buildings.Airflow.Multizo838a391f29e8fbf7_flowD.png" alt="Buildings.Airflow.Multizone.ZonalFlow_m_flow">
</p>
<h3>Information</h3>

<p>
This model computes the air exchange between volumes.
</p>
<p>
Input is the mass flow rate from <i>A</i> to <i>B</i> and from <i>B</i> to <i>A</i>.

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"
>Buildings.Airflow.Multizone.BaseClasses.ZonalFlow</a> (Flow across zonal boundaries of a room).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>mAB_flow</td><td>Mass flow rate from A to B</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>mBA_flow</td><td>Mass flow rate from B to A</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> ZonalFlow_m_flow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Zonal flow with input air change per second&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"
>Buildings.Airflow.Multizone.BaseClasses.ZonalFlow</a>;
   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> mAB_flow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate from A to B&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> mBA_flow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate from B to A&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  port_a1.m_flow = mAB_flow;
  port_a2.m_flow = mBA_flow;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>ZonalFlow_m_flow;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:22:06 2015.
</address>
</body>
</html>
