<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with base classes for DX cooling coil model&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>Buildings.Fluid.HeatExchangers.DXCoils</a>.BaseClasses</h2>
<p>
<b>Package with base classes for DX cooling coil model</b><br>
</p>
<h3>Information</h3>

This package contains base classes that are used to construct the models in
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>Buildings.Fluid.HeatExchangers.DXCoils</a>.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
>ApparatusDewPoint</a>
</td>
<td>Calculates air properties at apparatus dew point</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
>ApparatusDryPoint</a>
</td>
<td>Calculates air properties at dry coil surface</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha8c92194f2b979144ationS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"
>Condensation</a>
</td>
<td>Calculates rate of condensation</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha924ebce5ae74de27acityS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"
>CoolingCapacity</a>
</td>
<td>Calculates cooling capacity at given temperature and flow fraction</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha674bdd2f2735086colingS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
>DXCooling</a>
</td>
<td>DX cooling coil operation </td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>DryCoil</a>
</td>
<td>Calculates dry coil condition</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"
>DryWetSelector</a>
</td>
<td>Selects results from dry or wet coil</td>
</tr>
<tr>
<td><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>EssentialParameters</a>
</td>
<td>A partial block for essential parameters</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha77701eece82d67eaationS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"
>Evaporation</a>
</td>
<td>Model that computes evaporation of water that accumulated on the coil surface</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha5e776f995361fe28PowerS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"
>InputPower</a>
</td>
<td>Electrical power consumed by the unit</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>PartialCoilCondition</a>
</td>
<td>Partial block for dry and wet coil conditions</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>PartialCoilInterface</a>
</td>
<td>Partial block for DX coil</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil"
>PartialDXCoil</a>
</td>
<td>Partial model for DX coil</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchae2833c094a90cf9bitionS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>PartialSurfaceCondition</a>
</td>
<td>Partial block for apparatus dew and dry point calculation</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"
>SensibleHeatRatio</a>
</td>
<td>Calculates the sensible heat ratio</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect"
>SpeedSelect</a>
</td>
<td>Selects the lower specified speed ratio for multispeed model</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</a>
</td>
<td>Interpolates values between speeds</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha0f2a3a8bf900018f.UACpS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"
>UACp</a>
</td>
<td>Calculates UA/Cp of the coil</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>WetCoil</a>
</td>
<td>Calculates wet coil condition </td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha3626cd4d1788ba28itionS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>NominalCondition</a>
</td>
<td>Calculates inlet and outlet fluid parameters at nominal condition</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha072106c57e87931btionsS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions"
>Functions</a>
</td>
<td>Package with functions</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchafb83f72f1d162a5dmplesS.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Examples.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Examples"
>Examples</a>
</td>
<td>Package with examples of base class components for DX cooling coil model</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ApparatusDewPoint<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.ApparatusDewPoint</h2>
<p>
<b>Calculates air properties at apparatus dew point</b>
<br>
<br><img src="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint">
</p>
<h3>Information</h3>

<p>
This blocks outputs the state of the moist air at the dew point of the coil.
The bypass factor of the coil and the resulting enthalpy difference is
computed by its base class
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a> (Partial block for apparatus dew and dry point calculation).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</a></td><td>Medium model</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true to interpolate data</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td>Real</td><td>bypass.start</td><td>0.25</td><td>Bypass factor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed index</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Cooling capacity of the coil [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Evaporator air mass flow rate [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Evaporator air static pressure [Pa]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Evaporator inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Evaporator air inlet specific enthalpy [J/kg]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>hADP</td><td>Specific enthalpy of air at apparatus dew point [J/kg]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>XADP</td><td>Humidity mass fraction of air at  apparatus dew point</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TADP</td><td>Dry bulb temperature of air at apparatus dew point [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> ApparatusDewPoint <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Calculates air properties at apparatus dew point&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> hADP(
    nominal=40000,
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Specific enthalpy of air at apparatus dew point&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> XADP(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Humidity mass fraction of air at  apparatus dew point&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TADP(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;,
    min=233.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at apparatus dew point&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TSatMin = 273.15+3 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Minimum apparatus saturation temperature&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XSatMin = 0.004667 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction at saturation of coil inlet conditions&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMin(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Minimum enthalpy of apparatus dew point&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
<span style="color: #006400; font-weight: normal; font-style: normal;">/*  XSatMin = Medium.Xsaturation(
        Medium.setState_pTX(p=p,
                            T=273.15+3,
                            X=cat(1,{XSatMin},{1-sum({XSatMin})})));
*/</span>
  hMin =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEnthalpy_pTX</span>(
           p=   Medium.p_default,
           T=   TSatMin,
           X=<span style="color: red; font-weight: normal; font-style: normal;">   cat</span>(1,{XSatMin},{1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XSatMin})}));
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  hADP =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMin</span>(
    x1=<span style="color: red; font-weight: normal; font-style: normal;">  Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=hEvaIn - delta_h,
      x2=hMin,
      deltaX=10),
    x2=  hEvaIn+100,
    deltaX=10);
  XADP =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.X_pW</span>(p_w=<span style="color: red; font-weight: normal; font-style: normal;">Medium.saturationPressure</span>(TADP), p=p);
  TADP=<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=p, h=hADP, X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,{XADP},{1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XADP})})));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>ApparatusDewPoint;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ApparatusDryPoint<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.ApparatusDryPoint</h2>
<p>
<b>Calculates air properties at dry coil surface</b>
<br>
<br><img src="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint">
</p>
<h3>Information</h3>

<p>
This blocks outputs the state of the moist air at of the coil, assuming no condensation occurs.
The bypass factor of the coil and the resulting enthalpy difference is
computed by its base class
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a> (Partial block for apparatus dew and dry point calculation).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</a></td><td>Medium model</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true to interpolate data</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td>Real</td><td>bypass.start</td><td>0.25</td><td>Bypass factor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed index</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Cooling capacity of the coil [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Evaporator air mass flow rate [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Evaporator air static pressure [Pa]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Evaporator inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Evaporator air inlet specific enthalpy [J/kg]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TDry</td><td>Dry bulb temperature of air at dry coil condition [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> ApparatusDryPoint <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Calculates air properties at dry coil surface&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TDry(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;,
    min=253.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at dry coil condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hDry <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Enthalpy of air at coil surface&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaInVec[Medium.nX] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction of air inlet condition&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TADP(start=283.15) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Apparatus dew point temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMin <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Minimum enthalpy of apparatus dew point&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  XEvaInVec =<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,{XEvaIn},{1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XEvaIn})});

  XEvaIn =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.X_pW</span>(
     p_w=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid</span>(TADP), p=p);

  hMin =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEnthalpy</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(p=p, T=TADP, X=XEvaInVec));

  hDry =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMin</span>(
    x1=<span style="color: red; font-weight: normal; font-style: normal;">  Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=hEvaIn - delta_h,
      x2=hMin,
      deltaX=10),
    x2=  hEvaIn+100,
    deltaX=10);

  TDry=<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=p, h=hDry, X=XEvaInVec)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;XEvaIn=XDry assumption for dry coil&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>ApparatusDryPoint;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Condensation<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha8c92194f2b979144ationI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.Condensation</h2>
<p>
<b>Calculates rate of condensation</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha8c92194f2b979144ationD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation">
</p>
<h3>Information</h3>

<p>
This block computes the water mass flow rate that condenses.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TDewPoi</td><td>Dew point temperature [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Heat flow [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>SHR</td><td>Sensible heat ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mWat_flow</td><td>Mass flow rate of water condensed at cooling coil [kg/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> Condensation <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates rate of condensation&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
    <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TDewPoi(
    start=278.15,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dew point temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Q_flow(
    max=0,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Heat flow&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> SHR(
    min=0,
    max=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sensible heat ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate of water condensed at cooling coil&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  mWat_flow := (1-SHR)*Q_flow/<span style="color: red; font-weight: normal; font-style: normal;">Medium.enthalpyOfVaporization</span>(T=TDewPoi);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Condensation;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CoolingCapacity<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha924ebce5ae74de27acityI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.CoolingCapacity</h2>
<p>
<b>Calculates cooling capacity at given temperature and flow fraction</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha924ebce5ae74de27acityD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity">
</p>
<h3>Information</h3>

<h4>Cooling capacity modifiers</h4>
<p>
There are two cooling capacity modifier functions: The function
<i>cap<sub>&theta;</sub></i> accounts for a performance change due to different
air temperatures and the function
cap<sub>FF </sub> accounts for a performance change due to different air flow rates,
relative to the nominal condition.
These cooling capacity modifiers are multiplied with nominal cooling capacity
to obtain the cooling capacity of the coil at given inlet temperatures and mass flow rate as
</p>
<p align="center" style="font-style:italic;">
  Q&#775;(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>, ff) = cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>)
            cap<sub>FF</sub>(ff) Q&#775;<sub>nom</sub>,
</p>
<p>
where
<i>&theta;<sub>e,in</sub></i> is the evaporator inlet temperature and
<i>&theta;<sub>c,in</sub></i> is the condenser inlet temperature in degrees Celsius.
<i>&theta;<sub>e,in</sub></i> is the dry-bulb temperature if the coil is dry,
or the wet-bulb temperature if the coil is wet.
</p>
<p>
The temperature dependent cooling capacity modifier function is</p>
<p align="center" style="font-style:italic;" >
  cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub>
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> +
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>,
</p>
<p>
where the six coefficients are obtained from the coil performance data record.
</p>
<p>
The flow fraction dependent cooling capacity modifier function is a polynomial
with the normalized mass flow rate <i>ff</i> (flow fraction) as the time dependent variable.
The normalized mass flow rate is defined as
</p>
<p align="center" style="font-style:italic;">
  ff = m&#775; &frasl;  m&#775;<sub>nom</sub>,
</p>
<p>
where
<i>m&#775;</i> is the mass flow rate and
<i>m&#775;<sub>nom</sub></i> is the nominal mass flow rate.
If the coil has multiple stages, then the nominal mass flow rate of the respective stage is used.
Hence,
</p>
<p align="center" style="font-style:italic;">
  cap<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup>
+ b<sub>4</sub>ff<sup>3</sup> + ...
</p>
<p>
The coefficients of the equation are obtained from the coil performance data record.
</p>
<p>
It is important to specify limits of the flow fraction to ensure validity of the
<i>cap<sub>FF</sub>(&sdot;)</i> function
in performance record. A non-zero value of
<i>cap<sub>FF</sub>(0)</i> will lead to an infinite large change in fluid temperatures because
<i>Q&#775; &ne; 0</i> but
<i>m&#775; = 0</i>.
Hence, when <i>m&#775; &ne; 0</i> is below the valid range of the flow modifier function,
the coil capacity will be reduced and set to zero near <i>m&#775; = 0</i>.
</p>

<h4>Energy Input Ratio (EIR) modifiers</h4>
<p>
The Energy Input Ratio (<i>EIR</i>) is the inverse of the Coefficient of Performance (<i>COP</i>).
Similar to the cooling rate, the EIR of the coil is the product of a function
that takes into account changes in condenser and evaporator inlet temperatures,
and changes in mass flow rate.
The EIR is computed as
</p>
<p align="center" style="font-style:italic;">
  EIR(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>, ff) = EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>)
           EIR<sub>FF</sub>(ff) &frasl; COP<sub>nominal</sub>
</p>
<p>
As for the cooling rate,
<i>EIR<sub>&theta;</sub>(&sdot;, &sdot;)</i> is
</p>
<p align="center" style="font-style:italic;">
  EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = c<sub>1</sub> + c<sub>2</sub> &theta;<sub>e,in</sub>
+ c<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + c<sub>4</sub> &theta;<sub>c,in</sub> +
c<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + c<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>.
</p>
<p>
where the six coefficients are obtained from the coil performance data record, and
<i>&theta;<sub>e,in</sub></i> is the dry-bulb temperature if the coil is dry, or
the wet-bulb temperature otherwise.
</p>
<p>
Similar to the cooling ratio, the change in EIR due to a change in air mass flow rate
is
</p>
<p align="center" style="font-style:italic;">
  EIR<sub>FF</sub>(ff) = d<sub>1</sub> + d<sub>2</sub> ff + d<sub>3</sub> ff<sup>2</sup>
+ d<sub>4</sub>ff<sup>3</sup> + ...
</p>
<h4>Obtaining the polynomial coefficients</h4>
<p>
The package
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
contains performance curves.
Alternatively, users can enter their own performance curves by
making an instance of a curve in
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
and specifying custom coefficients for the above polynomials.
The polynomial coefficients can be obtained by doing a curve fit that fits the
polynomials to a set of data.
The site
<a href="http://www.scipy.org/Cookbook/FittingData">
http://www.scipy.org/Cookbook/FittingData</a>
shows examples for how to fit data.
If a coil has multiple stages, then the fit need to be done for each stage.
For variable frequency coils, multiple fits need to be done for user selected
compressor speeds. For intermediate speeds, the performance data will be interpolated
by the model
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed"
>
Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed</a>.
</p>
<p>
The table below shows the polynomials explained above,
the name of the polynomial coefficients in
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
and the independent parameters against which the data need to be fitted.
</p>
  <table summary="summary" border="1" cellspacing="0" cellpadding="2" style="border-collapse:collapse;">
  <tr>
      <th>Modelica name of coefficient in data record</th>
      <th>Polynomial of the above info section</th>
       <th>Parameters for curve fit</th>
    </tr>
    <tr>
      <td><code>capFunT</code></td>
      <td><i>
        cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub>
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> +
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>
        </i></td>
        <td><i>
        cap<sub>&theta;</sub>, &theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>
        </i></td>
    </tr>
    <tr>
      <td><code>capFunFF</code></td>
      <td><i>
        cap<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup>
        + b<sub>4</sub>ff<sup>3</sup> + ...
        </i></td>
        <td><i>
        cap<sub>FF</sub>, ff
        </i></td>
    </tr>
    <tr>
      <td><code>EIRFunT</code></td>
      <td><i>
        EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub>
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> +
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>
        </i></td>
        <td><i>
        EIR<sub>&theta;</sub>, &theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>
        </i></td>
    </tr>
    <tr>
      <td><code>EIRFunFF</code></td>
      <td><i>
        EIR<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup>
        + b<sub>4</sub>ff<sup>3</sup> + ...
        </i></td>
        <td><i>
        EIR<sub>FF</sub>, ff
        </i></td>
    </tr>
  </table>

<p>
Note that for the above polynomials, the units for temperature is degree Celsius and not Kelvins.
</p>
<h4>Implementation</h4>
<p>
A parameter of the performance curve is the range of mass flow fraction <i>ff</i> for
which the data are valid.
Below this range, this model reduces the cooling capacity and the energy input ratio
so that both are zero if <i>ff &lt; ff<sub>min</sub>/4</i>, where
<i>ff<sub>min</sub></i> is the minimum flow fraction for which the performance curves are valid.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>nSta</td><td>&nbsp;</td><td>Number of coil stages (not counting the off stage)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>&nbsp;</td><td>Small mass flow rate for regularization [kg/s]</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage"
>Stage</a></td><td>sta[nSta]</td><td>&nbsp;</td><td>Performance data for this stage</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Temperature of air entering the condenser coil  [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate at the evaporator [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the evaporator (wet bulb for wet coil and dry bulb for dry coil) [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow[nSta]</td><td>Total cooling capacity [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR[nSta]</td><td>Energy Input Ratio</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> CoolingCapacity <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Calculates cooling capacity at given temperature and flow fraction&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</a> stage(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TConIn(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Temperature of air entering the condenser coil &quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Air mass flow rate at the evaporator&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TEvaIn(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of air entering the evaporator (wet bulb for wet coil and dry bulb for dry coil)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Integer nSta(min=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Number of coil stages (not counting the off stage)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_small <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Small mass flow rate for regularization&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage</a>
                                                                          sta[nSta] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Performance data for this stage&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real[nSta] ff(<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Air flow fraction: ratio of actual air flow rate by rated mass flwo rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> Q_flow[nSta](
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>max=0,
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Total cooling capacity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> EIR[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Energy Input Ratio&quot;</span>;
<span style="color: #006400; font-weight: normal; font-style: normal;">//------------------------------Cooling capacity---------------------------------//</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real cap_T[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>nominal=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>start=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Cooling capacity modification factor as a function of temperature&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real cap_FF[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>nominal=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>start=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Cooling capacity modification factor as a function of flow fraction&quot;</span>;
<span style="color: #006400; font-weight: normal; font-style: normal;">//----------------------------Energy Input Ratio---------------------------------//</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real EIR_T[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>nominal=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>start=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;EIR modification factor as a function of temperature&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real EIR_FF[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>nominal=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>start=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;EIR modification factor as a function of flow fraction&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real corFac[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>max=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>nominal=1, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>start=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Correction factor that is one inside the valid flow fraction, and attains zero below the valid flow fraction&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Boolean checkBoundsTEva[nSta] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag, used to check for out of bounds data&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Boolean checkBoundsTCon[nSta] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag, used to check for out of bounds data&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Verify correctness of performance curves, and write warning if error is bigger than 10%</span>
   <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSta<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
    <span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</span>(
       <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.biquadratic</span>(
         a=sta[iSta].perCur.capFunT,
         x1=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].nomVal.TEvaIn_nominal),
         x2=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].nomVal.TConIn_nominal)),
         msg=&quot;Capacity as a function of temperature &quot;,
         curveName=&quot;sta[&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;].perCur.capFunT&quot;);

    <span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</span>(
       <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.Utilities.extendedPolynomial</span>(
         x=1,
         c=sta[iSta].perCur.capFunFF,
         xMin=sta[iSta].perCur.ffMin,
         xMax=sta[iSta].perCur.ffMin),
         msg=&quot;Capacity as a function of normalized mass flow rate &quot;,
         curveName=&quot;sta[&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;].perCur.capFunFF&quot;);

    <span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</span>(
       <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.biquadratic</span>(
         a=sta[iSta].perCur.EIRFunT,
         x1=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].nomVal.TEvaIn_nominal),
         x2=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].nomVal.TConIn_nominal)),
         msg=&quot;EIR as a function of temperature &quot;,
         curveName=&quot;sta[&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;].perCur.EIRFunT&quot;);

    <span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</span>(
       <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.Utilities.extendedPolynomial</span>(
         x=1,
         c=sta[iSta].perCur.EIRFunFF,
         xMin=sta[iSta].perCur.ffMin,
         xMax=sta[iSta].perCur.ffMin),
         msg=&quot;EIR as a function of normalized mass flow rate &quot;,
         curveName=&quot;sta[&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;].perCur.EIRFunFF&quot;);
   <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;
   <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSta<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
     checkBoundsTEva[iSta] :=true;
     checkBoundsTCon[iSta] :=true;
   <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">  // Modelica requires to evaluate the when() block for each element in iSta=1...nSta.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">  // But we only want to check the stage that is currently running.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">  // Hence, the test starts with stage == iSta.</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSta<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
   <span style="color: #006400; font-weight: normal; font-style: normal;">// Check whether data are outside of bounds</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">when </span>( stage == iSta<span style="color: blue; font-weight: normal; font-style: normal;"> and </span><span style="color: red; font-weight: normal; font-style: normal;">pre</span>(checkBoundsTEva[stage]))<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">  assert</span>( <span style="color: blue; font-weight: normal; font-style: normal;">not </span>(TEvaIn &gt; sta[stage].perCur.TEvaInMax<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>TEvaIn &lt; sta[stage].perCur.TEvaInMin),
        &quot;*** Warning: Evaporator temperature TEvaIn is out of bounds in DX coil model at time = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(time) + &quot;.
        stage     = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;
        TEvaInMin = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(sta[iSta].perCur.TEvaInMin) + &quot; Kelvin (&quot; +
                        <span style="color: red; font-weight: normal; font-style: normal;">String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].perCur.TEvaInMin)) + &quot; degC)
        TEvaIn    = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(TEvaIn) + &quot; Kelvin (&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TEvaIn)) + &quot; degC)
        TEvaInMax = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(sta[iSta].perCur.TEvaInMax) + &quot; Kelvin (&quot; +
                        <span style="color: red; font-weight: normal; font-style: normal;">String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].perCur.TEvaInMax)) + &quot; degC)
        Extrapolation can introduce large errors.
        This warning will only be reported once for each stage.&quot;,
        level=  AssertionLevel.warning);
        checkBoundsTEva[iSta] = false;
      <span style="color: blue; font-weight: normal; font-style: normal;">end when</span>;
      <span style="color: blue; font-weight: normal; font-style: normal;">when </span>( stage == iSta<span style="color: blue; font-weight: normal; font-style: normal;"> and </span><span style="color: red; font-weight: normal; font-style: normal;">pre</span>(checkBoundsTCon[stage]))<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">  assert</span>( <span style="color: blue; font-weight: normal; font-style: normal;">not </span>( TConIn &gt; sta[stage].perCur.TConInMax<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>TConIn &lt; sta[stage].perCur.TConInMin),
        &quot;*** Warning: Condenser temperature TConIn is out of bounds in DX coil model at time = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(time) + &quot;.
        stage     = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(iSta) + &quot;
        TConInMin = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(sta[iSta].perCur.TConInMin) + &quot; Kelvin (&quot; +
                        <span style="color: red; font-weight: normal; font-style: normal;">String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].perCur.TConInMin)) + &quot; degC)
        TConIn    = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(TConIn) + &quot; Kelvin (&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TConIn)) + &quot; degC)
        TConInMax = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(sta[iSta].perCur.TConInMax) + &quot; Kelvin (&quot; +
                        <span style="color: red; font-weight: normal; font-style: normal;">String</span>(<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(sta[iSta].perCur.TConInMax)) + &quot; degC)
        Extrapolation can introduce large errors.
        This warning will only be reported once for each stage.&quot;,
        level=  AssertionLevel.warning);
        checkBoundsTCon[iSta] = false;
      <span style="color: blue; font-weight: normal; font-style: normal;">end when</span>;
    <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">if </span>stage &gt; 0<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSta<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute performance</span>
    ff[iSta]=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=m_flow,
      x2=m_flow_small,
      deltaX=m_flow_small/10)/sta[iSta].nomVal.m_flow_nominal;
  <span style="color: #006400; font-weight: normal; font-style: normal;">//-------------------------Cooling capacity modifiers----------------------------//</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute the DX coil capacity fractions, using a biquadratic curve.</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// Since the regression for capacity can have negative values</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// (for unreasonable temperatures), we constrain its return value to be</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// non-negative.</span>
    cap_T[iSta] =<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.biquadratic</span>(
        a=sta[iSta].perCur.capFunT,
        x1=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TEvaIn),
        x2=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TConIn)),
      x2=0.001,
      deltaX=0.0001) <span style="color: #006400; font-weight: normal; font-style: normal;">
        &quot;Cooling capacity modification factor as function of temperature&quot;</span>;
    cap_FF[iSta] =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.Utilities.extendedPolynomial</span>(
      x=ff[iSta],
      c=sta[iSta].perCur.capFunFF,
      xMin=sta[iSta].perCur.ffMin,
      xMax=sta[iSta].perCur.ffMin);
    <span style="color: #006400; font-weight: normal; font-style: normal;">//-----------------------Energy Input Ratio modifiers--------------------------//</span>
    EIR_T[iSta] =<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.biquadratic</span>(
        a=sta[iSta].perCur.EIRFunT,
        x1=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TEvaIn),
        x2=<span style="color: red; font-weight: normal; font-style: normal;">Modelica.SIunits.Conversions.to_degC</span>(TConIn)),
      x2=0.001,
      deltaX=0.0001);
    EIR_FF[iSta] =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.Utilities.extendedPolynomial</span>(
       x=ff[iSta],
       c=sta[iSta].perCur.EIRFunFF,
       xMin=sta[iSta].perCur.ffMin,
       xMax=sta[iSta].perCur.ffMin) <span style="color: #006400; font-weight: normal; font-style: normal;">
        &quot;Cooling capacity modification factor as function of flow fraction&quot;</span>;
    <span style="color: #006400; font-weight: normal; font-style: normal;">//------------ Correction factor for flow rate outside of validity of data ---//</span>
    corFac[iSta] =<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothHeaviside</span>(
       x=ff[iSta] - sta[iSta].perCur.ffMin/4,
       delta=sta[iSta].perCur.ffMin/4);

    Q_flow[iSta] = corFac[iSta]*cap_T[iSta]*cap_FF[iSta]*sta[iSta].nomVal.Q_flow_nominal;
    EIR[iSta]    = corFac[iSta]*EIR_T[iSta]*EIR_FF[iSta]/sta[iSta].nomVal.COP_nominal;
    <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> //cooling coil off</span>
   ff     =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   cap_T  =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   cap_FF =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   EIR_T  =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   EIR_FF =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   corFac =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   Q_flow =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
   EIR    =<span style="color: red; font-weight: normal; font-style: normal;"> fill</span>(0, nSta);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>CoolingCapacity;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DXCooling<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha674bdd2f2735086colingI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.DXCooling</h2>
<p>
<b>DX cooling coil operation </b>
<br>
<br><img src="Buildings.Fluid.HeatExcha674bdd2f2735086colingD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling">
</p>
<h3>Information</h3>

<p>
This block combines the models for the dry coil and the wet coil.
Output of the block is the coil performance which, depending on the
mass fraction at the apparatus dew point temperature and
the mass fraction of the coil inlet air,
may be from the dry coil, the wet coil, or a weighted average of the two.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</a> (Partial block for DX coil).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true for coil with variable speed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TCoiSur</td><td>Coil surface temperature [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mWat_flow</td><td>Mass flow rate of water condensed at cooling coil [kg/s]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>SHR</td><td>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> DXCooling <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;DX cooling coil operation &quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Boolean variableSpeedCoil <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag, set to true for coil with variable speed&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TCoiSur(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=240,
    max=400) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Coil surface temperature&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>WetCoil</a> wetCoi(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil = variableSpeedCoil,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>datCoi=datCoi) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Wet coil condition&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>DryCoil</a> dryCoi(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil = variableSpeedCoil,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>datCoi=datCoi) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry coil condition&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector</a> dryWet <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Actual coil condition&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate of water condensed at cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> SHR(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TConIn, wetCoi.TConIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TConIn, dryCoi.TConIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m_flow, wetCoi.m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m_flow, dryCoi.m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TEvaIn, wetCoi.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TEvaIn, dryCoi.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, wetCoi.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, wetCoi.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(hEvaIn, wetCoi.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(hEvaIn, dryCoi.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, dryCoi.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, dryCoi.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, wetCoi.speRat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, dryCoi.speRat);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, dryWet.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(stage, dryCoi.stage);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(stage, wetCoi.stage);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.EIRWet, wetCoi.EIR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetCoi.Q_flow, dryWet.QWet_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetCoi.SHR, dryWet.SHRWet);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetCoi.mWat_flow, dryWet.mWetWat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryCoi.EIR, dryWet.EIRDry);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryCoi.Q_flow, dryWet.QDry_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryCoi.TDry, dryWet.TADPDry);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetCoi.TADP, dryWet.TADPWet);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.EIR, EIR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.Q_flow, Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.SHR, SHR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.TADP, TCoiSur);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dryWet.mWat_flow, mWat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetCoi.XADP, dryWet.XADP);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DXCooling;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DryCoil<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.DryCoil</h2>
<p>
<b>Calculates dry coil condition</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil">
</p>
<h3>Information</h3>

<p>
This block calculates the rate of cooling and the coil surface condition
under the assumption that the coil is dry.
</p>
<p>
The wet coil conditions are computed in
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil</a>.
See
<a href="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</a> (Partial block for dry and wet coil conditions).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true for coil with variable speed</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TDry</td><td>Dry bulb temperature of air at ADP [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> DryCoil <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates dry coil condition&quot;</span>
 <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TDry(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=233.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at ADP&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint</a> appDryPt(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>datCoi=datCoi,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil=variableSpeedCoil) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Calculates air properties at dry coil condition&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDryPt.TDry, TDry);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(hEvaIn, appDryPt.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, appDryPt.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, appDryPt.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m_flow, appDryPt.m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, appDryPt.speRat);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiQ_flow.y, appDryPt.Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TEvaIn, cooCap.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDryPt.stage, stage);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DryCoil;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DryWetSelector<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.DryWetSelector</h2>
<p>
<b>Selects results from dry or wet coil</b>
<br>
<br><img src="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector">
</p>
<h3>Information</h3>

<p>
This block smoothly transitions the results from the dry coil and
the wet coil computation.
The independent variable for the transition is the difference between
the water mass fractions at the apparatus dew point, as computed by the wet coil model,
and the coil inlet mass fraction.
</p>

<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XADP</td><td>Mass fraction at ADP</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>EIRWet</td><td>Energy Input Ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>QWet_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>SHRWet</td><td>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TADPWet</td><td>Dry bulb temperature of air at ADP [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>mWetWat_flow</td><td>Mass flow rate of water condensed at cooling coil [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>EIRDry</td><td>Energy Input Ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>QDry_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TADPDry</td><td>Dry bulb temperature of air at ADP [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>SHR</td><td>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TADP</td><td>Dry bulb temperature of air at ADP [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mWat_flow</td><td>Mass flow rate of water condensed at cooling coil [kg/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> DryWetSelector <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Selects results from dry or wet coil&quot;</span>

 <span style="color: blue; font-weight: normal; font-style: normal;">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> deltaX=0.0001 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Range of x where transition between dry and wet coil occurs&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Inlet air mass fraction&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XADP <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass fraction at ADP&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> EIRWet <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Energy Input Ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> QWet_flow(
    max=0,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Total cooling capacity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> SHRWet(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TADPWet(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at ADP&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> mWetWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate of water condensed at cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> EIRDry <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Energy Input Ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> QDry_flow(max=0, unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Total cooling capacity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TADPDry(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at ADP&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> EIR <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Energy Input Ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> Q_flow(
    max=0,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Total cooling capacity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> SHR(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TADP(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at ADP&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate of water condensed at cooling coil&quot;</span>;

 <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real fraDry(min=0, max=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fraction of results that are taken from the dry coil model&quot;</span>;
 <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real fraWet(min=0, max=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fraction of results that are taken from the wet coil model&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> dX <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Difference between apparatus dew point mass fraction of wet coil and inlet air mass fraction&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  dX = XADP-XEvaIn;
  fraDry=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.spliceFunction</span>(
    pos=+1,
    neg=0,
    x= dX+deltaX,
    deltax= deltaX);
  fraWet=1-fraDry;
  EIR       = fraDry * EIRDry    + fraWet * EIRWet;
  Q_flow    = fraDry * QDry_flow + fraWet * QWet_flow;
  SHR       = fraDry             + fraWet * SHRWet;
  TADP      = fraDry * TADPDry   + fraWet * TADPWet;
  mWat_flow =                      fraWet * mWetWat_flow;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DryWetSelector;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE EssentialParameters<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.EssentialParameters</h2>
<p>
<b>A partial block for essential parameters</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha292b0d1e3b2d3401etersD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters">
</p>
<h3>Information</h3>

<p>
This partial block declares parameters that are required by most classes
in the package
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>
Buildings.Fluid.HeatExchangers.DXCoils</a>.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">block</span> EssentialParameters <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;A partial block for essential parameters&quot;</span>

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil</a>
                                                                 datCoi <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Performance data&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Integer nSta=datCoi.nSta <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Number of stages&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>EssentialParameters;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Evaporation<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha77701eece82d67eaationI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.Evaporation</h2>
<p>
<b>Model that computes evaporation of water that accumulated on the coil surface</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha77701eece82d67eaationD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation">
</p>
<h3>Information</h3>

<p>
This model computes the water accumulation on the surface of a cooling coil.
When the cooling coil operates, water is accumulated on the coil surface
up to a maximum amount of water before water starts to drain away
from the coil.
When the coil is off, the accumulated water evaporates into
the air stream.
</p>
<h4>Physical description</h4>
<p>
The calculations are based on Shirey et al. (2006).
</p>
<h5>Parameters</h5>
<p>
The maximum amount of water that can be accumulated is computed
based on the following model, where we used the convention that latent heat
removed from the air is negative:
The parameter <i>t<sub>wet</sub></i>
defines how long it takes for condensate to drip of the coil, assuming the
coil starts completely dry and operates at the nominal operating point.
Henderson et al. (2003) measured values for
<i>t<sub>wet</sub></i>
from <i>16.5</i> minutes (<i>990</i> seconds) to
<i>29</i> minutes (<i>1740</i> seconds).
Thus, we use a default value of <i>t<sub>wet</sub>=1400</i> seconds.
The maximum amount of water that can accumulate on the coil is
</p>
<p align="center" style="font-style:italic;">
  m<sub>max</sub> = -Q&#775;<sub>L,nom</sub> &nbsp; t<sub>wet</sub> &frasl; h<sub>fg</sub>
</p>
<p>
where
<i>Q&#775;<sub>L,nom</sub>&lt;0</i> is the latent capacity at the nominal conditions and
<i>h<sub>fg</sub></i> is the latent heat of evaporation.
</p>
<p>
When the coil is off, the water that has been accumulated on the coil
evaporates into the air. The rate of water vapor evaporation at nominal operating
conditions is defined by the parameter <i>&gamma;<sub>nom</sub></i>. The definition of
<i>&gamma;<sub>nom</sub></i> is
</p>
<p align="center" style="font-style:italic;">
  &gamma;<sub>nom</sub> = Q&#775;<sub>e,nom</sub> &frasl; Q&#775;<sub>L,nom</sub>,
</p>
<p>
where
<i>Q&#775;<sub>e,nom</sub>&lt;0</i> is the rate of evaporation from the coil surface into
the air stream right after the coil is switched off.
The default value is <i>&gamma;<sub>nom</sub> = 1.5</i>.
</p>
<h5>Time dependent calculations</h5>
<p>
First, we discuss the accumulation of water on the coil.
The rate of water accumulation is computed as
</p>
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>wat</sub>(t)
</p>
<p>
where
<i>m&#775;<sub>wat</sub>(t) &le; 0</i> is the water vapor mass flow rate that is extracted
from the air at the current operating conditions.
The actual water vapor mass flow rate that is removed
from the air stream is as computed by the steady-state
cooling coil performance model
because for the coil outlet conditions, it does not matter whether the water
accumulates on the coil or drips away from the coil.
The initial value for the water accumulation is zero at the start of the simulation, and
set to whatever water remains after the coil has been switched off and
the water partially or completely evaporated into the air stream.
</p>
<p>
Now, we discuss the evaporation of the water on the coil surface into the air
when the coil is off.
The model in Shirey et al. (2006) is based on the assumption that the wet coil acts
as an evaporative cooler.
The change of water on the coil is
</p>
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>max</sub>(t) &eta;(t),
</p>
<p>
where
<i>m&#775;<sub>max</sub>(t) &gt; 0</i> is
the maximum water mass flow rate from the coil to the air and
<i>&eta;(t) &isin; [0, 1]</i> is the mass transfer effectiveness.
For an evaporative cooler,
</p>
<p align="center" style="font-style:italic;">
  &eta;(t) = 1-exp(-NTU(t)),
</p>
<p>
where
<i>NTU(t)=(hA)<sub>m</sub>/C&#775;<sub>a</sub></i> are the number of mass transfer units and
<i>C&#775;<sub>a</sub></i> is the air capacity flow rate.
The mass transfer coefficient <i>(hA)<sub>m</sub></i>
is assumed to be proportional to the wet coil area, which
is assumed to be equal to the ratio <i>m(t) &frasl; m<sub>max</sub>(t)</i>.
Hence,
</p>
<p align="center" style="font-style:italic;">
  (hA)<sub>m</sub>(t) &prop; m(t) &frasl; m<sub>max</sub>(t).
</p>
<p>
Furthermore, the mass transfer coefficient depends on the velocity, and
hence mass flow rate, as
</p>
<p align="center" style="font-style:italic;">
  (hA)<sub>m</sub>(t) &prop; m&#775;<sub>a</sub>(t)<sup>0.8</sup>,
</p>
<p>
where
<i>m&#775;<sub>a</sub>(t)</i> is the current air mass flow rate,
from which follows that
</p>
<p align="center" style="font-style:italic;">
  NTU(t) &prop; m&#775;<sub>a</sub>(t)<sup>-0.2</sup>.
</p>
<p>
Therefore, the water mass flow rate from the coil into the
air stream is
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>wat</sub>(t) = m&#775;<sub>max</sub>(t)
  (1-exp(-K
          (m(t) &frasl; m<sub>tot</sub>)
          (m&#775;<sub>a</sub>(t) &frasl; m&#775;<sub>a,nom</sub>)<sup>-0.2</sup>

  )),
</p>
<p>
where
<i>K &gt; 0</i> is a constant to be determined below
and the rate of change of water on the coil surface is as before
</p>
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>wat</sub>(t).
</p>
<p>
The maximum mass transfer is
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>max</sub> = m&#775;<sub>a</sub> (x<sub>wb</sub>(t) - x(t)),
</p>
<p>
where
<i>x<sub>wb</sub>(t)</i> is the moisture content of air
at the wet bulb state and
<i>x(t)</i> is the actual moisture content of the air.
</p>
<p>
The constant <i>K</i> is determined from the nominal conditions as follows:
At the nominal condition, we have
<i>m(t) &frasl; m<sub>tot</sub>=1</i> and
<i>m&#775;<sub>a</sub>(t) &frasl; m&#775;<sub>a,nom</sub>=1</i>,
and, hence,
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>nom</sub> = m&#775;<sub>max,nom</sub> (1-e<sup>-K</sup>).
</p>
<p>
Because
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>nom</sub> = - &gamma; Q&#775;<sub>L,nom</sub> &frasl; h<sub>fg</sub>,
</p>
<p>
it follows that
</p>
<p align="center" style="font-style:italic;">
  K = -ln(
  1 + &gamma;<sub>nom</sub> Q&#775;<sub>L,nom</sub> &frasl;
  m&#775;<sub>a,nom</sub> &frasl; h<sub>fg</sub> &frasl;
  (x<sub>wb,nom</sub>-x<sub>nom</sub>)
),
</p>
<p>
where
<i>x<sub>nom</sub></i> is the humidity ratio at the coil at nominal condition and
<i>x<sub>wb,nom</sub></i> is the humidity ratio at the wet bulb condition.
Note that the <i>ln(&middot;)</i> in the above equation requires that the argument
is positive. See the implementation section below for how this is implemented.
</p>
<h4>Implementation</h4>
<h5>Potential for moisture transfer</h5>
<p>
For the potential that causes the moisture transfer,
the difference in mass fraction between the current
coil air and the coil air at the wet bulb conditions is used, provided that
the air mass flow rate is within <i>1&frasl;3</i> of the nominal mass flow rate.
For smaller air mass flow rates, the outlet conditions are used to ensure that
the outlet conditions are not supersaturated air.
The transition between these two driving potential is continuously differentiable
in the mass flow rate.
</p>
<h5>Computation of mass transfer effectiveness</h5>
<p>
To evaluate
</p>
<p align="center" style="font-style:italic;">
  K = -ln(
  1 + &gamma;<sub>nom</sub> Q&#775;<sub>L,nom</sub> &frasl;
  m&#775;<sub>a,nom</sub> &frasl; h<sub>fg</sub> &frasl;
  (x<sub>wb,nom</sub>-x<sub>nom</sub>)
),
</p>
<p>
the argument of the <i>ln(&middot;)</i> function must be positive.
However, often the parameter <i>&gamma;<sub>nom</sub></i> is not known, and the default
value of
<i>&gamma;<sub>nom</sub> = 1.5</i> may yield negative arguments for
the function <i>ln(&middot;)</i>.
We therefore set a lower bound on <i>&gamma;<sub>nom</sub></i> as follows:
Note that <i>&gamma;<sub>nom</sub></i> must be such that
<i>0 &lt; m&#775;<sub>wat,nom</sub> &lt; m&#775;<sub>max,nom</sub></i>.
This condition is equivalent to
</p>
<p align="center" style="font-style:italic;">
  0 &lt; &gamma;<sub>nom</sub> &lt; m&#775;<sub>a,nom</sub> (x<sub>wb,nom</sub>-x<sub>nom</sub>)
  h<sub>fg</sub>
  &frasl; (-Q&#775;<sub>L,nom</sub>)
</p>
<p>
If <i>&gamma;<sub>nom</sub></i> were equal to the right hand side, then the
mass transfer effectiveness would be one. Hence, we set the maximum value of
&gamma;<sub>nom,max</sub> to
</p>
<p align="center" style="font-style:italic;">
  &gamma;<sub>nom,max</sub> = 0.8  m&#775;<sub>a,nom</sub> (x<sub>wb,nom</sub>-x<sub>nom</sub>)
  h<sub>fg</sub>
  &frasl; Q&#775;<sub>L,nom</sub>,
</p>
<p>
which corresponds to a mass transfer effectiveness of <i>0.8</i>. If
<i>&gamma;<sub>nom</sub> &gt; &gamma;<sub>nom,max</sub></i>, the model sets
<i>&gamma;<sub>nom</sub>=&gamma;<sub>nom,max</sub></i> and writes a warning message.
</p>
<h5>Regularization near zero air mass flow rate</h5>
<p>
To regularize the equations near zero air mass flow rate and zero humidity on the coil, the
following conditions have been imposed in such a way that the model
is once continuously differentiable with bounded derivatives on compact sets:
</p>
<ul>
<li>
We impose that
<i>m&#775;<sub>wat</sub>(t) &rarr; 0</i> as <i>m &rarr; 0</i>
to ensure that there is no evaporation if no water remains on the coil.
</li>
<li>
We impose that
<i>m&#775;<sub>wat</sub>(t) &frasl; m&#775;<sub>a</sub>(t) &rarr; 0</i>
as <i>m&#775;<sub>a</sub>(t) &rarr; 0</i>
to ensure that the evaporation mass flow rate remains bounded at zero air flow rate
and that it is symmetric near zero without having to trigger an event.
</li>
</ul>
<p>
This is implemented by replacing for <i>|m&#775;<sub>a</sub>(t)| &lt; &delta;</i>
the equation for the evaporation mass flow rate by
</p>
<p align="center" style="font-style:italic;">
 m&#775;<sub>wat</sub>(t) = C m m&#775;<sub>a</sub><sup>2</sup>(t)
 (x<sub>wb,nom</sub>-x<sub>nom</sub>),
</p>
<p>
where
<i>C=K &delta;<sup>-0.2</sup></i> which approximates continuity at
<i>|m&#775;<sub>a</sub>|=&delta;</i>. Note that differentiability is ensured
because the two equations are combined using the function
<a href="Buildings_Utilities_Math_Functions.html#Buildings.Utilities.Math.Functions.spliceFunction"
>
Buildings.Utilities.Math.Functions.spliceFunction</a>.
Also note that based on physics, we would not have to square
<i>m&#775;<sub>a</sub></i>, but this was done to avoid an event
that would be triggered if <i>|m&#775;<sub>a</sub>|</i> would have been used.
Since the equation is active only at very small air flow rates when the fan is off,
the error is negligible for typical applications.
</p>
<h4>References</h4>
<p>
Hugh I. Henderson, Jr., Don B. Shirey III and Richard A. Raustad.
Understanding the Dehumidification Performance of Air-Conditioning Equipment at Part-Load Conditions.
<i>CIBSE/ASHRAE Conference</i>, Edinburgh, Scotland, September 2003.
</p>
<p>
Don B. Shirey III, Hugh I. Henderson, Jr. and Richard A. Raustad.
<a href="http://www.fsec.ucf.edu/en/publications/pdf/FSEC-CR-1537-05.pdf">
Understanding the Dehumidification Performance of Air-Conditioning Equipment at Part-Load Conditions.</a>
Florida Solar Energy Center, Technical Report FSEC-CR-1537-05, January 2006.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</a></td><td>nomVal</td><td>&nbsp;</td><td>Nominal values</td></tr>
<tr><td>Boolean</td><td>computeReevaporation</td><td>true</td><td>Set to true to compute reevaporation of water that accumulated on coil</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mAir_flow_small</td><td>0.1*abs(nomVal.m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</a></td><td>on</td><td>Control signal, true if compressor is on</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>mWat_flow</td><td>Water flow rate added into the medium [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TWat</td><td>Temperature of liquid that is drained from or injected into volume [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>mAir_flow</td><td>Air mass flow rate [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaOut</td><td>Water mass fraction [1]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaOut</td><td>Air temperature [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mTotWat_flow</td><td>Total moisture mass flow rate into the air stream [kg/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Evaporation <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Model that computes evaporation of water that accumulated on the coil surface&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
    <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues</a>
     nomVal <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Nominal values&quot;</span>;

    <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mAir_flow_small(min=0)=
      0.1*<span style="color: red; font-weight: normal; font-style: normal;">abs</span>(nomVal.m_flow_nominal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Small mass flow rate for regularization of zero flow&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</a> mMax(min=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Maximum mass of water that can accumulate on the coil&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean computeReevaporation=true <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set to true to compute reevaporation of water that accumulated on coil&quot;</span>;

  <span style="color: #006400; font-weight: normal; font-style: normal;">////////////////////////////////////////////////////////////////////////////////</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Input and output signals</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> on <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Control signal, true if compressor is on&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> mWat_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;MassFlowRate&quot;,
                                                 <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Water flow rate added into the medium&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TWat(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;K&quot;,
                                            displayUnit = &quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of liquid that is drained from or injected into volume&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> mAir_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;MassFlowRate&quot;,
                                                 <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Air mass flow rate&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XEvaOut(min=0, max=1, unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Water mass fraction&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TEvaOut(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Air temperature&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mTotWat_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;MassFlowRate&quot;,
                                                     <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Total moisture mass flow rate into the air stream&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</a> m(nominal=-5000*1400/2257E3, start=0, fixed=true) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass of water that accumulated on the coil&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mEva_flow(max=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Moisture mass flow rate that evaporates into air stream&quot;</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">////////////////////////////////////////////////////////////////////////////////</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Protected parameters and variables</span>
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> QSen_flow_nominal(max=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Nominal sensible heat flow rate (negative number)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> QLat_flow_nominal(max=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Nominal latent heat flow rate (negative number)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaIn_nominal(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction at nominal inlet conditions&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaOut_nominal(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction at nominal outlet conditions&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TEvaOut_nominal(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Dry bulb temperature at nominal outlet conditions&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TEvaWetBulOut_nominal(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Wet bulb temperature at nominal outlet conditions&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaWetBulOut_nominal(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Water vapor mass fraction at nominal outlet wet bulb condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> dX_nominal(max=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Driving potential for mass transfer&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_fg(fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Latent heat of vaporization&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real gammaMax(min=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Maximum value for gamma&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real logArg(min=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Argument for the log function&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real K(min=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Coefficient used for convective mass transfer&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real K2(min=0, fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Coefficient used for convective mass transfer&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaWetBulOut <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Water vapor mass fraction at wet bulb conditions at air inlet&quot;</span>;

  <span style="color: #006400; font-weight: normal; font-style: normal;"> // off = not on is required because Dymola 2013 fails during model</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;"> // check if on, which is an input connector, is used in the edge() function</span>
  Boolean off=<span style="color: blue; font-weight: normal; font-style: normal;">not </span>on <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Signal, true when component is off&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TEvaWetBulOut <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Wet bulb temperature at coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> dX <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Difference in water vapor concentration that drives mass transfer&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> cpAir_nominal=
     Buildings.Utilities.Psychrometrics.Constants.cpAir <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific heat capacity of air&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> cpSte_nominal=
     Buildings.Utilities.Psychrometrics.Constants.cpSte <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific heat capacity of water vapor&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  QSen_flow_nominal=nomVal.SHR_nominal * nomVal.Q_flow_nominal;
  QLat_flow_nominal=nomVal.Q_flow_nominal-QSen_flow_nominal;
  h_fg =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.enthalpyOfVaporization</span>(nomVal.TEvaIn_nominal);

  mMax = -QLat_flow_nominal * nomVal.tWet/h_fg;

  XEvaIn_nominal=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
     pSat=<span style="color: red; font-weight: normal; font-style: normal;">Medium.saturationPressure</span>(nomVal.TEvaIn_nominal),
     p=nomVal.p_nominal,
     phi=nomVal.phiIn_nominal);
  XEvaOut_nominal = XEvaIn_nominal + QLat_flow_nominal/nomVal.m_flow_nominal/h_fg;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute outlet air temperature</span>
  TEvaOut_nominal =
  (nomVal.TEvaIn_nominal*<span style="color: red; font-weight: normal; font-style: normal;">Medium.specificHeatCapacityCp</span>(
      <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(p=nomVal.p_nominal,
                          T=nomVal.TEvaIn_nominal,
                          X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1, {XEvaIn_nominal, 1-XEvaIn_nominal})))
     + QSen_flow_nominal/nomVal.m_flow_nominal)
     /<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificHeatCapacityCp</span>(
      <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(p=nomVal.p_nominal,
                          T=nomVal.TEvaIn_nominal,
                          X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1, {XEvaOut_nominal, 1-XEvaOut_nominal})));
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute wet bulb temperature.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// The computation of the wet bulb temperature requires an iterative</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// solution. It therefore cannot be done in a function.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// The block Buildings.Utilities.Psychrometrics.WetBul_pTX</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// implements the equation below, but it cannot</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// be used here because blocks cannot be used to assign parameter</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// values.</span>
  XEvaWetBulOut_nominal   =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
      pSat=<span style="color: red; font-weight: normal; font-style: normal;">  Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid</span>(TEvaWetBulOut_nominal),
      p=     nomVal.p_nominal,
      phi=   1);
  TEvaWetBulOut_nominal = (TEvaOut_nominal
       * ((1-XEvaOut_nominal) * cpAir_nominal + XEvaOut_nominal * cpSte_nominal)
       + (XEvaOut_nominal-XEvaWetBulOut_nominal) * h_fg)/
            ( (1-XEvaWetBulOut_nominal)*cpAir_nominal + XEvaWetBulOut_nominal * cpSte_nominal);

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Potential difference in moisture concentration that drives mass transfer at nominal condition</span>
  dX_nominal = XEvaOut_nominal-XEvaWetBulOut_nominal;
  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(dX_nominal &gt; 1E-10,
     &quot;Warning: In DX coil model, dX_nominal = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(dX_nominal) + &quot;
  This means that the coil is not dehumidifying air at the nominal conditions.
  Check nominal parameters.
  &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.nominalValuesToString</span>(nomVal),
      AssertionLevel.warning);

  gammaMax = 0.8 * nomVal.m_flow_nominal * dX_nominal * h_fg / QLat_flow_nominal;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// If gamma is bigger than a maximum value, write a warning and then</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// use the smaller value.</span>
  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(nomVal.gamma &lt;= gammaMax,
  &quot;Warning: In DX coil model, gamma is too large for these coil conditions.
  Instead of gamma = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(nomVal.gamma) + &quot;, a value of &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(gammaMax) + &quot;, which
  corresponds to a mass transfer effectiveness of 0.8, will be used.
  Coil nominal performance data are:
   nomVal.m_flow_nominal = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(nomVal.m_flow_nominal) + &quot;
   dX_nominal = XEvaOut_nominal-XEvaWetBulOut_nominal = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(XEvaOut_nominal) + &quot; - &quot; +
      <span style="color: red; font-weight: normal; font-style: normal;">String</span>(XEvaWetBulOut_nominal) + &quot; = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(dX_nominal) + &quot;
   QLat_flow_nominal  = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(QLat_flow_nominal) + &quot;\n&quot;,
   AssertionLevel.warning);

  logArg = 1-<span style="color: red; font-weight: normal; font-style: normal;">min</span>(nomVal.gamma, gammaMax)*QLat_flow_nominal/nomVal.m_flow_nominal/h_fg/dX_nominal;

  K = -<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.log</span>(logArg);
  K2 = K/mMax*nomVal.m_flow_nominal^(-0.2);

  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(QLat_flow_nominal &lt; 0, &quot;QLat_nominal must be a negative number. Check parameters.&quot;);

  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(K &gt; 0, &quot;Require K&gt;0 but received &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(K) + &quot;
    The parameter are:
    QSen_flow_nominal     = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(QSen_flow_nominal) + &quot;
    QLat_flow_nominal     = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(QLat_flow_nominal) + &quot;
    XEvaOut_nominal        = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(XEvaOut_nominal) + &quot;
   &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.nominalValuesToString</span>(
                                                                                     nomVal) + &quot;
  Check parameters. Maybe the sensible heat ratio is too big, or the mass flow rate too small.&quot;);

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// When the coil switches off, set accumulated water to</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// lower value of actual accumulated water or maximum water content</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>computeReevaporation<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">when </span><span style="color: red; font-weight: normal; font-style: normal;">edge</span>(off)<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">reinit</span>(m,<span style="color: red; font-weight: normal; font-style: normal;"> min</span>(m, mMax));
    <span style="color: blue; font-weight: normal; font-style: normal;">end when</span>;

    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>on<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      dX = 0;
      mEva_flow = 0;
      mTotWat_flow = mWat_flow;
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(m) = -mWat_flow;
      TEvaWetBulOut = 293.15;
      XEvaWetBulOut = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute wet bulb temperature.</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// The computation of the wet bulb temperature requires an iterative</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// solution. It therefore cannot be done in a function.</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// The block Buildings.Utilities.Psychrometrics.WetBul_pTX</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// implements the equation below, but it is not used here</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// because otherwise, in each branch of the if-then construct,</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// an iteration would be done. This would be inefficient because</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">// the wet bulb conditions are only needed in this branch.</span>
      XEvaWetBulOut =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
        pSat=<span style="color: red; font-weight: normal; font-style: normal;">  Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid</span>(TEvaWetBulOut),
        p=     nomVal.p_nominal,
        phi=   1);
      TEvaWetBulOut = (TEvaOut * ((1-XEvaOut) * cpAir_nominal + XEvaOut * cpSte_nominal)
         + (XEvaOut-XEvaWetBulOut) * h_fg)/
              ( (1-XEvaWetBulOut)*cpAir_nominal + XEvaWetBulOut * cpSte_nominal);

      dX =<span style="color: red; font-weight: normal; font-style: normal;"> smooth</span>(1,<span style="color: red; font-weight: normal; font-style: normal;"> noEvent</span>(
         <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.spliceFunction</span>(
         pos=XEvaOut,
         neg=XEvaWetBulOut,
         x=<span style="color: red; font-weight: normal; font-style: normal;">abs</span>(mAir_flow)-nomVal.m_flow_nominal/2,
         deltax=nomVal.m_flow_nominal/3)))
        - XEvaWetBulOut;
      mEva_flow = -<span style="color: red; font-weight: normal; font-style: normal;">smooth</span>(1,<span style="color: red; font-weight: normal; font-style: normal;"> noEvent</span>(dX *
        <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.spliceFunction</span>(
         pos=<span style="color: blue; font-weight: normal; font-style: normal;">if </span><span style="color: red; font-weight: normal; font-style: normal;">abs</span>(mAir_flow) &gt; mAir_flow_small/3<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>
            <span style="color: red; font-weight: normal; font-style: normal;">abs</span>(mAir_flow) * (1-<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.exp</span>(-K2*m*<span style="color: red; font-weight: normal; font-style: normal;">abs</span>(mAir_flow)^(-0.2)))<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0,
         neg=K2*mAir_flow_small^(-0.2)*m*mAir_flow^2,
         x=<span style="color: red; font-weight: normal; font-style: normal;">abs</span>(mAir_flow)- 2*mAir_flow_small/3,
         deltax=2*mAir_flow_small/6)));
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(m) = -mEva_flow;
      mTotWat_flow = mWat_flow + mEva_flow;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> // The model is configured to not compute reevaporation</span>
    dX = 0;
    mEva_flow = 0;
    mTotWat_flow = mWat_flow;
    m = 0;
    TEvaWetBulOut = 293.15;
    XEvaWetBulOut = 0;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Evaporation;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE InputPower<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha5e776f995361fe28PowerI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.InputPower</h2>
<p>
<b>Electrical power consumed by the unit</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha5e776f995361fe28PowerD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower">
</p>
<h3>Information</h3>

<p>
This block calculates total electrical energy consumed by the unit using
the rate of cooling and the energy input ratio <i>EIR</i>.
</p>
<p>
The electrical energy consumed by the unit is
</p>
<p align="center" style="font-style:italic;">
  P = -Q<sub>cool</sub> EIR
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Cooling capacity of the coil [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>EIR</td><td>Energy input ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>SHR</td><td>Sensible heat ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>P</td><td>Electrical power consumed by the unit [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QSen_flow</td><td>Sensible heat flow rate [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QLat_flow</td><td>Latent heat flow rate [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> InputPower <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Electrical power consumed by the unit&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Q_flow(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Cooling capacity of the coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> EIR <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Energy input ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> SHR(min=0, max=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sensible heat ratio&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> P(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Electrical power consumed by the unit&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QSen_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible heat flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QLat_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Latent heat flow rate&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  P = -EIR*Q_flow;
  QSen_flow = Q_flow * SHR;
  QLat_flow = Q_flow - QSen_flow;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>InputPower;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialCoilCondition<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.PartialCoilCondition</h2>
<p>
<b>Partial block for dry and wet coil conditions</b>
<br>
<br><img src="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition">
</p>
<h3>Information</h3>

<p>
This partial block is the base class for
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil</a> and
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil</a>.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</a> (Partial block for DX coil).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true for coil with variable speed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">block</span> PartialCoilCondition <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Partial block for dry and wet coil conditions&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Boolean variableSpeedCoil <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag, set to true for coil with variable speed&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity</a> cooCap(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>sta=datCoi.sta,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nSta=datCoi.nSta,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_small=datCoi.m_flow_small) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Performance data&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</a> speShiEIR(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil=variableSpeedCoil,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nSta=nSta,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>speSet=datCoi.sta.spe) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Interpolates EIR&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</a> speShiQ_flow(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil=variableSpeedCoil,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nSta=nSta,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>speSet=datCoi.sta.spe) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Interpolates Q_flow&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(cooCap.EIR, speShiEIR.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(cooCap.Q_flow, speShiQ_flow.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiEIR.y, EIR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, speShiEIR.speRat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, speShiQ_flow.speRat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiQ_flow.y, Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(stage, speShiQ_flow.stage);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiEIR.stage, stage);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(cooCap.m_flow, m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(cooCap.TConIn, TConIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(cooCap.stage, stage);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>PartialCoilCondition;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialCoilInterface<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.PartialCoilInterface</h2>
<p>
<b>Partial block for DX coil</b>
<br>
<br><img src="Buildings.Fluid.HeatExchadb27dc53cc93e876rfaceD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface">
</p>
<h3>Information</h3>

<p>
This partial block declares the inputs and outputs that are common for
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoilCondition">
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoilCondition</a> and
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block), <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a> (A partial block for essential parameters).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">block</span> PartialCoilInterface <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Partial block for DX coil&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</a> stage <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> speRat <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Speed ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m_flow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Air mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of air entering the cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Inlet air mass fraction&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> p <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Pressure at inlet of coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> hEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific enthalpy of air entering the coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TConIn(
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> EIR <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Energy Input Ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> Q_flow(
    max=0,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Total cooling capacity&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>PartialCoilInterface;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialDXCoil<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.PartialDXCoil</h2>
<p>
<b>Partial model for DX coil</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil">
</p>
<h3>Information</h3>

<p>
This partial model is the base class for
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.SingleSpeed"
>
Buildings.Fluid.HeatExchangers.DXCoils.SingleSpeed</a>
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.MultiStage"
>
Buildings.Fluid.HeatExchangers.DXCoils.MultiStage</a> and
<a href="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed"
>
Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed</a>.
</p>
<p>
See
<a href="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a> (A partial block for essential parameters), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a> (Computes the index of a substance in the mass fraction vector Xi), <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</a> (Partial model transporting one fluid stream with storing mass or energy).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</a></td><td>Medium model</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;water&quot;</td><td>Name of species substance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>datCoi.sta[nSta].nomVal.m_fl...</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>&nbsp;</td><td>Pressure difference [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>30</td><td>Time constant at nominal flow (if energyDynamics &lt;&gt; SteadyState) [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Moisture balance</td></tr>
<tr><td>Boolean</td><td>computeReevaporation</td><td>true</td><td>Set to true to compute reevaporation of water that accumulated on coil</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>P</td><td>Electrical power consumed by the unit [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QSen_flow</td><td>Sensible heat flow rate [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QLat_flow</td><td>Latent heat flow rate [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">model</span> PartialDXCoil <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Partial model for DX coil&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a>(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>substanceName = &quot;water&quot;);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = Medium,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir"
>Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir</a> vol(
      prescribedHeatFlowRate=true),
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal = datCoi.sta[nSta].nomVal.m_flow_nominal);

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TConIn(
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> P(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Electrical power consumed by the unit&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QSen_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible heat flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QLat_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Latent heat flow rate&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling</a> dxCoo(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_BaseClasses_Medium.html#Buildings.Fluid.BaseClasses.IndexMassFraction.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>datCoi=datCoi) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;DX cooling coil operation&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"
>Evaporation</a> eva(<span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_BaseClasses_Medium.html#Buildings.Fluid.BaseClasses.IndexMassFraction.Medium"
>Medium</a>,
                  <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nomVal=datCoi.sta[nSta].nomVal,
                  <span style="color: blue; font-weight: normal; font-style: normal;">final </span>computeReevaporation = computeReevaporation) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Model that computes evaporation of water that accumulated on the coil surface&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean computeReevaporation=true <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set to true to compute reevaporation of water that accumulated on coil&quot;</span>;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Flow reversal is not needed. Also, if ff &lt; ffMin/4, then</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Q_flow and EIR are set the zero. Hence, it is safe to assume</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// forward flow, which will avoid an event</span>
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hEvaIn=
    <span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port_a.h_outflow) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Enthalpy of air entering the cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TEvaIn =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature_phX</span>(p=port_a.p, h=hEvaIn, X=XEvaIn) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Dry bulb temperature of air entering the cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaIn[Medium.nXi] =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.Xi_outflow) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction/absolute humidity of air entering the cooling coil&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> p(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>y=port_a.p) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Inlet air pressure&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> X(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>y=XEvaIn[i_x]) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Inlet air mass fraction&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> T(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>y=TEvaIn) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Inlet air temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> m(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>y=port_a.m_flow) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Inlet air mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> h(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>y=hEvaIn) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Inlet air specific enthalpy&quot;</span>;
  <a href="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</a> q <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Heat extracted by coil&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"
>BaseClasses.InputPower</a> pwr <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Electrical power consumed by the unit&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Sensors.html#Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor"
>Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor</a> TVol <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of the control volume&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Make sure that |Q_flow_nominal[nSta]| &gt;= |Q_flow_nominal[i]| for all stages because the data</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// of nSta are used in the evaporation model</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:(nSta-1)<span style="color: blue; font-weight: normal; font-style: normal;"> loop</span>
    <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(datCoi.sta[i].nomVal.Q_flow_nominal &gt;= datCoi.sta[nSta].nomVal.Q_flow_nominal,
    &quot;Error in DX coil performance data: Q_flow_nominal of the highest stage must have
    the biggest value in magnitude. Obtained &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.Vectors.toString</span>(
    {datCoi.sta[i].nomVal.Q_flow_nominal <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta}, &quot;Q_flow_nominal&quot;));
   <span style="color: blue; font-weight: normal; font-style: normal;">end for</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TConIn, dxCoo.TConIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m.y, dxCoo.m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(T.y, dxCoo.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p.y, dxCoo.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(X.y, dxCoo.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(h.y, dxCoo.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.EIR, pwr.EIR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.Q_flow, pwr.Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.SHR, pwr.SHR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(q.port, vol.heatPort);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(pwr.P, P);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.Q_flow, q.Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(eva.mWat_flow, dxCoo.mWat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.TCoiSur, vol.TWat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(dxCoo.TCoiSur, eva.TWat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m.y, eva.mAir_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TVol.port, q.port);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(pwr.QSen_flow, QSen_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(pwr.QLat_flow, QLat_flow);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(eva.mTotWat_flow, vol.mWat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TVol.T, eva.TEvaOut);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(vol.X_w, eva.XEvaOut);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>PartialDXCoil;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialSurfaceCondition<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchae2833c094a90cf9bitionI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.PartialSurfaceCondition</h2>
<p>
<b>Partial block for apparatus dew and dry point calculation</b>
<br>
<br><img src="Buildings.Fluid.HeatExchae2833c094a90cf9bitionD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition">
</p>
<h3>Information</h3>

<p>
This partial block is the base class for
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint</a> and
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint</a>.
</p>
<p>
This block calculates the <i>UA/c<sub>p</sub></i> value, the bypass factor and the
enthalpy difference across the coil.
It uses the function
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</a>
for intermediate compressor speeds.
</p>
<h4>Implementation</h4>
<p>
For coils that only have discrete compressor speeds, this block does not do an interpolation
for intermediate speeds.
For coils with variable speed compressors, the computations are also done if the coil is off,
as this ensures that the derivatives are continuous near the off conditions.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block), <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a> (A partial block for essential parameters).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true to interpolate data</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed index</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Cooling capacity of the coil [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Evaporator air mass flow rate [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Evaporator air static pressure [Pa]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Evaporator inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Evaporator air inlet specific enthalpy [J/kg]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">partial </span><span style="color: blue; font-weight: normal; font-style: normal;">block</span> PartialSurfaceCondition <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Partial block for apparatus dew and dry point calculation&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Boolean variableSpeedCoil <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Flag, set to true to interpolate data&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_small = datCoi.m_flow_small <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Small mass flow rate for the evaporator, used for regularization&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</a> maxSpe(displayUnit=&quot;1/min&quot;)= datCoi.sta[nSta].spe <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Maximum rotational speed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> speRat <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Speed index&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Q_flow(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Cooling capacity of the coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Evaporator air mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> p(
    quantity=&quot;Pressure&quot;,
    unit=&quot;Pa&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Evaporator air static pressure&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Evaporator inlet air mass fraction&quot;</span>;<span style="color: #006400; font-weight: normal; font-style: normal;">                                                         //(start=0.005, min=0, max=1.0)</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> hEvaIn(
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Evaporator air inlet specific enthalpy&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real bypass(
    start=0.25,
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Bypass factor&quot;</span>;
 <span style="color: blue; font-weight: normal; font-style: normal;">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</a> spe(displayUnit=&quot;1/min&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rotational speed&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp</a> uacp[nSta](
      <span style="color: blue; font-weight: normal; font-style: normal;">final </span>per=datCoi.sta.nomVal,
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates UA/Cp of the coil&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nonzero <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Evaporator air mass flow rate, bounded away from zero&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> delta_h(
    start=40000,
    min=0.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Enthalpy required to be removed from the inlet air to attain apparatus dry point condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">output </span>Real UAcp(
    min=0,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;UA/Cp of coil&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</a> stage <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span><span style="color: blue; font-weight: normal; font-style: normal;">not </span>variableSpeedCoil<span style="color: blue; font-weight: normal; font-style: normal;"> and </span>stage == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    m_flow_nonzero := 0;
    UAcp           := 0;
    bypass         := 0;
    delta_h        := 0;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// Small mass flow rate to avoid division by zero</span>
    m_flow_nonzero :=<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMax</span>(
      x1=m_flow,
      x2=m_flow_small,
      deltaX=0.1*m_flow_small);
    spe:=speRat*maxSpe;

    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>variableSpeedCoil<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      UAcp :=<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMax</span>(
         x1=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</span>(
           spe=spe,
           speSet={datCoi.sta[iSpe].spe <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSpe<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta},
           u={uacp[iSpe].UAcp <span style="color: blue; font-weight: normal; font-style: normal;">for </span>iSpe<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta}),
         x2=uacp[nSta].UAcp/1E3,
         deltaX=uacp[nSta].UAcp/1E4);
     <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      UAcp := uacp[stage].UAcp;
     <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

    bypass :=<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothLimit</span>(
      x=<span style="color: red; font-weight: normal; font-style: normal;">  Modelica.Math.exp</span>(-UAcp / m_flow_nonzero),
      l=  0.01,
      u=  0.99,
      deltaX=  0.001);
   delta_h:=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=-Q_flow/m_flow_nonzero/(1 - bypass),
      x2=0.999*hEvaIn,
      deltaX=0.0001);
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>PartialSurfaceCondition;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SensibleHeatRatio<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.SensibleHeatRatio</h2>
<p>
<b>Calculates the sensible heat ratio</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio">
</p>
<h3>Information</h3>

<p>
This block computes the sensible heat ratio.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</a></td><td>on</td><td>Set to true to enable compressor, or false to disable compressor</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XADP</td><td>Humidity mass fraction of air at ADP</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hADP</td><td>Specific enthalpy of air at ADP [J/kg]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>SHR</td><td>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> SensibleHeatRatio <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates the sensible heat ratio&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> on <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set to true to enable compressor, or false to disable compressor&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> p <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Pressure at inlet of coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of air entering the cooling coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XADP(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Humidity mass fraction of air at ADP&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> hADP(
    nominal=40000,
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Specific enthalpy of air at ADP&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> hEvaIn <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific enthalpy of air entering the coil&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> SHR(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_TEvaIn_XADP <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Enthalpy at inlet air temperature and humidity mass fraction at ADP&quot;</span>;
  Real entRat <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Enthalpy ratio&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> epsH = 100 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Small value for enthalpy to avoid division by zero&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//===================================Sensible heat ratio calculation===========================================//</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//Coil on-off condition</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>on<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
   <span style="color: #006400; font-weight: normal; font-style: normal;">//Calculate enthalpy at inlet air temperature and absolute humidity at ADP i.e. h_TEvaIn_wADP</span>
    h_TEvaIn_XADP :=<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEnthalpy_pTX</span>(
      p=p,
      T=TEvaIn,
      X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1, {XADP}, {1-XADP}));
    <span style="color: #006400; font-weight: normal; font-style: normal;">//Calculate Sensible Heat Ratio</span>
    entRat := (h_TEvaIn_XADP - hADP)/
      <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothMax</span>(
        x1=      epsH,
        x2=      hEvaIn - hADP,
        deltaX=  0.1*epsH);
    SHR :=<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=entRat,
      x2=0.999,
      deltaX=0.0001) <span style="color: #006400; font-weight: normal; font-style: normal;">
      &quot;To restrict the value of SHR in case of zero mass flow rate or dry coil condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;">  //Coil off</span>
    h_TEvaIn_XADP := 0;
    entRat     := 1;
    SHR        := 0;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SensibleHeatRatio;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpeedSelect<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.SpeedSelect</h2>
<p>
<b>Selects the lower specified speed ratio for multispeed model</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect">
</p>
<h3>Information</h3>

<p>
This blocks outputs the normalized speed of the compressor,
whereas the highest stage is assigned a normalized speed of one,
and all other stages are proportional to their actual speed.
  </p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>nSta</td><td>&nbsp;</td><td>Number of standard compressor speeds</td></tr>
<tr><td>Real</td><td>speSet[nSta]</td><td>&nbsp;</td><td>Array of standard compressor speeds</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of cooling coil (0: off, 1: first stage, 2: second stage...)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>speRat</td><td>Standard speed ratio</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> SpeedSelect <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Selects the lower specified speed ratio for multispeed model&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Integer nSta(min=1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Number of standard compressor speeds&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real speSet[nSta] <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Array of standard compressor speeds&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</a> stage <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Stage of cooling coil (0: off, 1: first stage, 2: second stage...)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> speRat <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Standard speed ratio&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real speRatNor[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, max=1)=
    {speSet[i]/speSet[nSta] <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nSta} <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Array of normalized speed ratios for the compressor&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">algorithm </span>
 <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(stage &gt;= 0<span style="color: blue; font-weight: normal; font-style: normal;"> and </span>stage &lt;= nSta, &quot;Compressor speed is out of range.
  Model has &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(nSta) + &quot; speeds, but received control signal &quot; +
  <span style="color: red; font-weight: normal; font-style: normal;">String</span>(stage));
 speRat :=<span style="color: blue; font-weight: normal; font-style: normal;">if </span>stage == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>speRatNor[stage];
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpeedSelect;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpeedShift<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.SpeedShift</h2>
<p>
<b>Interpolates values between speeds</b>
<br>
<br><img src="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift">
</p>
<h3>Information</h3>

<p>
This block uses the
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</a> function
to interpolate the input array.
Depending on input speed ratio and speed set array the input array <i>u</i> is interpolated.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>nSta</td><td>&nbsp;</td><td>Number of standard compressor speeds</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>AngularVelocity</a></td><td>speSet[nSta]</td><td>&nbsp;</td><td>Compressor speeds [rad/s]</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true to interpolate data</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>u[nSta]</td><td>Array to be interpolated</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>y</td><td>Interpolated value</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">block</span> SpeedShift <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Interpolates values between speeds&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Integer nSta <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Number of standard compressor speeds&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</a> speSet[nSta](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>displayUnit=&quot;1/min&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Compressor speeds&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Boolean variableSpeedCoil <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Flag, set to true to interpolate data&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> speRat <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Speed ratio&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> u[nSta] <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Array to be interpolated&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> y <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Interpolated value&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</a> stage <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>variableSpeedCoil<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    y=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</span>(
      spe=speRat*speSet[nSta],
      speSet=speSet,
      u=u);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    y = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>stage == 0<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;">  else </span>u[stage];
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpeedShift;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE UACp<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha0f2a3a8bf900018f.UACpI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.UACp</h2>
<p>
<b>Calculates UA/Cp of the coil</b>
</p>
<h3>Information</h3>

<p>
This model calculates the <i>UA/c<sub>p</sub></i> value and the bypass factor
of the coil from the nominal inlet and outlet
air properties.
The nominal conditions are calculated using
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</a>.</p>
<p>
For a heat exchanger where one medium changes phase, the <i>NTU-&epsilon;</i> relation
is
<p align="center" style="font-style:italic;">
  &epsilon; = 1 - exp(-NTU) = 1-exp(-UA &frasl; c<sub>p</sub> &frasl; m&#775;)
</p>
<p>
Since the bypass factor <i>b</i> is defined as <i>b=1-&epsilon;</i>,
one can write
</p>
<p align="center" style="font-style:italic;">
  b = exp(-UA &frasl; c<sub>p</sub> &frasl; m&#775;)
</p>
<p>
and, hence,
<p align="center" style="font-style:italic;">
 UA &frasl; c<sub>p</sub> = - m&#775; log(b)
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</a> (Calculates inlet and outlet fluid parameters at nominal condition), <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</a></td><td>Medium model</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</a></td><td>per</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>SpecificHeatCapacity</a></td><td>Cp_nominal</td><td>Medium.specificHeatCapacityC...</td><td>Specific heat of air at specified nominal condition [J/(kg.K)]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> UACp <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates UA/Cp of the coil&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XADP_nominal(
    start=0.008,
    min=0,
    max=1.0,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rated/Nominal mass fraction of air at coil apparatus dew point&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TADP_nominal(
    start=273.15+10,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Coil apparatus dew point temperature&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hADP_nominal(
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Enthalpy of air at coil apparatus dew point (at rated condition)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real bypass_nominal(
    start=0.25,
    min=0,
    max=1.0,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Bypass factor for nominal condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real UAcp(
    min=0,
    unit=&quot;kg/s&quot;,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;UA/Cp of coil&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean homotopyInitialization = true <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;= true, use homotopy method&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">constant </span>Real phiADP_nominal = 1.0 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Realtive humidity at ADP&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>Modelica.SIunits.AbsolutePressure</a> psat_ADP_nominal(
    start=1250,
    fixed=false) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Saturation pressure&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//------------------------Apparatus Dew Point (ADP) calculations---------------------//</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//Solve Eq. 1 , 2 and 3 for air properties (XADP_nominal and TADP_nominal)</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//of saturated air at coil apparatus dew point</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//---------------------------------------Eq.1---------------------------------------//</span>
  (XEvaIn_nominal - XEvaOut_nominal)*(per.TEvaIn_nominal - TADP_nominal)
     =(XEvaIn_nominal  - XADP_nominal)*(per.TEvaIn_nominal - TOut_nominal);
<span style="color: #006400; font-weight: normal; font-style: normal;">//---------------------------------------Eq.2---------------------------------------//</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>homotopyInitialization<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    psat_ADP_nominal=<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(
      actual=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid</span>(TADP_nominal),
      simplified=1252.393+83.933*(TADP_nominal-283.15));
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> // do not use homotopy</span>
    psat_ADP_nominal=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid</span>(TADP_nominal);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">//  Taylor series</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//  psat_ADP_nominal=1252.393+83.933*(TADP_nominal-283.15);</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//  Non-linear equation</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">//  psat_ADP_nominal =  Buildings.Utilities.Psychrometrics.Functions.saturationPressureLiquid(TADP_nominal);</span>
<span style="color: #006400; font-weight: normal; font-style: normal;">//---------------------------------------Eq.3---------------------------------------//</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>homotopyInitialization<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    XADP_nominal=<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(
      actual=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
        pSat=psat_ADP_nominal,
        p=per.p_nominal,
        phi=phiADP_nominal),
      simplified=0.007572544+6.19495*(10^(-6))*(psat_ADP_nominal-1228));

  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> // do not use homotopy</span>
    XADP_nominal=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
        pSat=psat_ADP_nominal,
        p=per.p_nominal,
        phi=phiADP_nominal);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: #006400; font-weight: normal; font-style: normal;">//-----------------------------------uACp calculations-----------------------------//</span>
  hADP_nominal =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEnthalpy_pTX</span>(
              p=per.p_nominal,
              T=TADP_nominal,
              X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,{XADP_nominal}, {1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XADP_nominal})}));
  bypass_nominal=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Math.Functions.smoothLimit</span>(
              x=(hOut_nominal-hADP_nominal)/(hEvaIn_nominal-hADP_nominal),
              l=1e-3,
              u=0.999,
              deltaX=1e-4);
  UAcp = -per.m_flow_nominal *<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Math.log</span>(bypass_nominal);

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>UACp;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE WetCoil<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.WetCoil</h2>
<p>
<b>Calculates wet coil condition </b>
<br>
<br><img src="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilD.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil">
</p>
<h3>Information</h3>

<p>
This block calculates the rate of cooling and the coil surface condition
under the assumption that the coil is wet.
</p>
<p>
The dry coil conditions are computed in
<a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil</a>.
See
<a href="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</a> (Partial block for dry and wet coil conditions).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</a></td><td>datCoi</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td>Boolean</td><td>variableSpeedCoil</td><td>&nbsp;</td><td>Flag, set to true for coil with variable speed</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</a></td><td>stage</td><td>Stage of coil, or 0/1 for variable-speed coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>speRat</td><td>Speed ratio</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Air mass flow rate</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TEvaIn</td><td>Temperature of air entering the cooling coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XEvaIn</td><td>Inlet air mass fraction</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>p</td><td>Pressure at inlet of coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>hEvaIn</td><td>Specific enthalpy of air entering the coil</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TConIn</td><td>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>EIR</td><td>Energy Input Ratio</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Q_flow</td><td>Total cooling capacity [W]</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium model</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TADP</td><td>Dry bulb temperature of air at ADP [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>SHR</td><td>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mWat_flow</td><td>Mass flow rate of water condensed at cooling coil [kg/s]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>XADP</td><td>Humidity mass fraction of air at  apparatus dew point</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> WetCoil <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates wet coil condition &quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TADP(
    quantity=&quot;ThermodynamicTemperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Dry bulb temperature of air at ADP&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> SHR(
    min=0,
    max=1.0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass flow rate of water condensed at cooling coil&quot;</span>;

  <a href="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi"
>Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi</a> wetBul(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates wet-bulb temperature&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint</a> appDewPt(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil.Medium"
>Medium</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>datCoi=datCoi,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>variableSpeedCoil=variableSpeedCoil) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Calculates air properties at apparatus dew point (ADP) at existing air-flow conditions&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio</a> shr(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates sensible heat ratio&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation</a> conRat(
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Medium.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Calculates rate of condensation&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.IntegerToBoolean"
>Modelica.Blocks.Math.IntegerToBoolean</a> onSwi(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>threshold=1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;On/off switch&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> XADP <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Humidity mass fraction of air at  apparatus dew point&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.TADP, TADP);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, appDewPt.XEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, appDewPt.p);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(m_flow, appDewPt.m_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, wetBul.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(XEvaIn, wetBul.Xi[1]);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speRat, appDewPt.speRat);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.XADP, shr.XADP);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.hADP, shr.hADP);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(shr.SHR, SHR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(p, shr.p);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TEvaIn, wetBul.TDryBul);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(TEvaIn, shr.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(hEvaIn, shr.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(hEvaIn, appDewPt.hEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.TADP, conRat.TDewPoi);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conRat.mWat_flow, mWat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(shr.SHR, conRat.SHR);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiQ_flow.y, conRat.Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(speShiQ_flow.y, appDewPt.Q_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(onSwi.y, shr.on);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(onSwi.u, stage);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(wetBul.TWetBul, cooCap.TEvaIn);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.XADP, XADP);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(appDewPt.stage, stage);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>WetCoil;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE NominalCondition<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha3626cd4d1788ba28itionI.png" alt="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"></a><a href="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</a>.NominalCondition</h2>
<p>
<b>Calculates inlet and outlet fluid parameters at nominal condition</b>
</p>
<h3>Information</h3>

<p>
This block calculates inlet and outlet fluid parameters at the nominal condition.
These parameters are required to determine the apparatus dew point at the nominal condition.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</a> (Icon for records).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium model</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</a></td><td>per</td><td>&nbsp;</td><td>Performance data</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>SpecificHeatCapacity</a></td><td>Cp_nominal</td><td>Medium.specificHeatCapacityC...</td><td>Specific heat of air at specified nominal condition [J/(kg.K)]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">record</span> NominalCondition <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Calculates inlet and outlet fluid parameters at nominal condition&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium model&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues</a>
                                                                          per <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Performance data&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaIn_nominal=
     <span style="color: red; font-weight: normal; font-style: normal;">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</span>(
        pSat=<span style="color: red; font-weight: normal; font-style: normal;">Medium.saturationPressure</span>(per.TEvaIn_nominal),
        p=per.p_nominal,
        phi=per.phiIn_nominal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rated/Nominal mass fraction of air entering coil&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hEvaIn_nominal=
   <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificEnthalpy_pTX</span>(
     p=per.p_nominal,
     T=per.TEvaIn_nominal,
     X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,{XEvaIn_nominal}, {1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XEvaIn_nominal})})) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rated enthalpy of air entering cooling coil&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hOut_nominal=
    hEvaIn_nominal + per.Q_flow_nominal / per.m_flow_nominal <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rated enthalpy of air exiting cooling coil&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TOut_nominal=
    per.TEvaIn_nominal + (per.SHR_nominal * per.Q_flow_nominal)/(per.m_flow_nominal * Cp_nominal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Dry-bulb temperature of the air leaving the cooling coil at nominal condition&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XEvaOut_nominal(start=0.005, min=0, max=1.0)=
     XEvaIn_nominal + (hOut_nominal- hEvaIn_nominal)*(1-per.SHR_nominal)/
     <span style="color: red; font-weight: normal; font-style: normal;">Medium.enthalpyOfCondensingGas</span>(T=per.TEvaIn_nominal) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Rated/Nominal mass fraction of air leaving the coil&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> Cp_nominal=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificHeatCapacityCp</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(
          p=per.p_nominal, T=per.TEvaIn_nominal, X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,{XEvaIn_nominal}, {1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>({XEvaIn_nominal})}))) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific heat of air at specified nominal condition&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>NominalCondition;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:25:09 2015.
</address>
</body>
</html>
