<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.FixedResistances</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with models for fixed flow resistances (pipes, diffusers etc.)&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE FixedResistances<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.FixedResistances"></a><a href="Buildings_Fluid.html#Buildings.Fluid"
>Buildings.Fluid</a>.FixedResistances</h2>
<p>
<b>Package with models for fixed flow resistances (pipes, diffusers etc.)</b><br>
</p>
<h3>Information</h3>

This package contains components models for fixed flow resistances.
By fixed flow resistance, we mean resistances that do not change the
flow coefficient
<p align="center" style="font-style:italic;">
k = m &frasl;
&radic;<span style="text-decoration:overline;">&Delta;P</span>.
</p>
<p>
For models of valves and air dampers, see
<a href="Buildings_Fluid_Actuators.html#Buildings.Fluid.Actuators"
>
Buildings.Fluid.Actuators</a>.
For models of flow resistances as part of the building constructions, see
<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>
Buildings.Airflow.Multizone</a>.
</p>
<p>
The model
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>
Buildings.Fluid.FixedResistances.FixedResistanceDpM</a>
is a fixed flow resistance that takes as parameter a nominal flow rate and a nominal pressure drop. The actual resistance is scaled using the above equation.
</p>
<p>
The model
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.LosslessPipe"
>
Buildings.Fluid.FixedResistances.LosslessPipe</a>
is an ideal pipe segment with no pressure drop. It is primarily used
in models in which the above pressure drop model need to be replaced by a model with no pressure drop.
</p>
<p>
The model
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM"
>
Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM</a>
can be used to model flow splitters or flow merges.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</a> (Icon for package containing variants).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResiefe411e95f8cd6d1ceDpMS.png" alt="Buildings.Fluid.FixedResistances.FixedResistanceDpM" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>FixedResistanceDpM</a>
</td>
<td>Fixed flow resistance with dp and m_flow as parameter</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResi0fb31093ff38bc87sPipeS.png" alt="Buildings.Fluid.FixedResistances.LosslessPipe" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.LosslessPipe"
>LosslessPipe</a>
</td>
<td>Pipe with no flow friction and no heat transfer</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResistances.PipeS.png" alt="Buildings.Fluid.FixedResistances.Pipe" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.Pipe"
>Pipe</a>
</td>
<td>Pipe with finite volume discretization along flow path</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResi51e52f70be5315dfceDpMS.png" alt="Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM"
>SplitterFixedResistanceDpM</a>
</td>
<td>Flow splitter with fixed resistance at each port</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResi42b79e86f480897cmplesS.png" alt="Buildings.Fluid.FixedResistances.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances_Examples.html#Buildings.Fluid.FixedResistances.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.FixedResi6f6c0000d4e088dfassesS.png" alt="Buildings.Fluid.FixedResistances.BaseClasses" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_FixedResistances_BaseClasses.html#Buildings.Fluid.FixedResistances.BaseClasses"
>BaseClasses</a>
</td>
<td>&nbsp;</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE FixedResistanceDpM<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.FixedResiefe411e95f8cd6d1ceDpMI.png" alt="Buildings.Fluid.FixedResistances.FixedResistanceDpM" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.FixedResistances.FixedResistanceDpM"></a><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances"
>Buildings.Fluid.FixedResistances</a>.FixedResistanceDpM</h2>
<p>
<b>Fixed flow resistance with dp and m_flow as parameter</b>
<br>
<br><img src="Buildings.Fluid.FixedResiefe411e95f8cd6d1ceDpMD.png" alt="Buildings.Fluid.FixedResistances.FixedResistanceDpM">
</p>
<h3>Information</h3>

<p>
This is a model of a resistance with a fixed flow coefficient.
The mass flow rate is computed as
</p>
<p align="center" style="font-style:italic;">
m&#775; = k
&radic;<span style="text-decoration:overline;">&Delta;P</span>,
</p>
<p>
where
<i>k</i> is a constant and
<i>&Delta;P</i> is the pressure drop.
The constant <i>k</i> is equal to
<code>k=m_flow_nominal/sqrt(dp_nominal)</code>,
where <code>m_flow_nominal</code> and <code>dp_nominal</code>
are parameters.
In the region
<code>abs(m_flow) &lt; m_flow_turbulent</code>,
the square root is replaced by a differentiable function
with finite slope.
The value of <code>m_flow_turbulent</code> is
computed as follows:
</p>
<ul>
<li>
If the parameter <code>use_dh</code> is <code>false</code>
(the default setting),
the equation
<code>m_flow_turbulent = deltaM * abs(m_flow_nominal)</code>,
where <code>deltaM=0.3</code> and
<code>m_flow_nominal</code> are parameters that can be set by the user.
</li>
<li>
Otherwise, the equation
<code>m_flow_turbulent = eta_nominal*dh/4*&pi;*ReC</code> is used,
where
<code>eta_nominal</code> is the dynamic viscosity, obtained from
the medium model. The parameter
<code>dh</code> is the hydraulic diameter and
<code>ReC=4000</code> is the critical Reynolds number, which both
can be set by the user.
</li>
</ul>
<p>
The figure below shows the pressure drop for the parameters
<code>m_flow_nominal=5</code> kg/s,
<code>dp_nominal=10</code> Pa and
<code>deltaM=0.3</code>.
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Fluid/FixedResistances/FixedResistanceDpM.png"/>
</p>
<p>
If the parameter
<code>show_T</code> is set to <code>true</code>,
then the model will compute the
temperature at its ports. Note that this can lead to state events
when the mass flow rate approaches zero,
which can increase computing time.
</p>
<p>
The parameter <code>from_dp</code> is used to determine
whether the mass flow rate is computed as a function of the
pressure drop (if <code>from_dp=true</code>), or vice versa.
This setting can affect the size of the nonlinear system of equations.
</p>
<p>
If the parameter <code>linearized</code> is set to <code>true</code>,
then the pressure drop is computed as a linear function of the
mass flow rate.
</p>
<p>
Setting <code>allowFlowReversal=false</code> can lead to simpler
equations. However, this should only be set to <code>false</code>
if one can guarantee that the flow never reverses its direction.
This can be difficult to guarantee, as pressure imbalance after
the initialization, or due to medium expansion and contraction,
can lead to reverse flow.
</p>
<h4>Notes</h4>
<p>
For more detailed models that compute the actual flow friction,
models from the package
<a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid.html#Modelica.Fluid"
>
Modelica.Fluid</a>
can be used and combined with models from the
<code>Buildings</code> library.
</p>
<h4>Implementation</h4>
<p>
The pressure drop is computed by calling a function in the package
<a href="Buildings_Fluid_BaseClasses_FlowModels.html#Buildings.Fluid.BaseClasses.FlowModels"
>
Buildings.Fluid.BaseClasses.FlowModels</a>,
This package contains regularized implementations of the equation
</p>
<p align="center" style="font-style:italic;">
  m = sign(&Delta;p) k  &radic;<span style="text-decoration:overline;">&nbsp;&Delta;p &nbsp;</span>
</p>
<p>
and its inverse function.
</p>
<p>
To decouple the energy equation from the mass equations,
the pressure drop is a function of the mass flow rate,
and not the volume flow rate.
This leads to simpler equations.
</p>

<p>Extends from <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.PartialResistance"
>Buildings.Fluid.BaseClasses.PartialResistance</a> (Partial model for a hydraulic resistance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_turbulent</td><td>if (computeFlowResistance an...</td><td>Turbulent flow if |m_flow| &gt;= m_flow_turbulent [kg/s]</td></tr>
<tr><td>Boolean</td><td>use_dh</td><td>false</td><td>Set to true to specify hydraulic diameter</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dh</td><td>1</td><td>Hydraulic diameter [m]</td></tr>
<tr><td>Real</td><td>ReC</td><td>4000</td><td>Reynolds number where transition to turbulent starts</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.3</td><td>Fraction of nominal mass flow rate where transition to turbulent occurs</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>&nbsp;</td><td>Pressure drop at nominal mass flow rate [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> FixedResistanceDpM <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Fixed flow resistance with dp and m_flow as parameter&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.PartialResistance"
>Buildings.Fluid.BaseClasses.PartialResistance</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_turbulent = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>(computeFlowResistance<span style="color: blue; font-weight: normal; font-style: normal;"> and </span>use_dh)<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>
                       eta_default*dh/4*Modelica.Constants.pi*ReC<span style="color: blue; font-weight: normal; font-style: normal;">
                       elseif </span>(computeFlowResistance)<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>
                       deltaM * m_flow_nominal_pos<span style="color: blue; font-weight: normal; font-style: normal;">
         else </span>0);
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean use_dh = false <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Set to true to specify hydraulic diameter&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dh=1 <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Hydraulic diameter&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real ReC(min=0)=4000 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Reynolds number where transition to turbulent starts&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real deltaM(min=0.01) = 0.3 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fraction of nominal mass flow rate where transition to turbulent occurs&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real k(unit=&quot;&quot;) = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>computeFlowResistance<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>
        m_flow_nominal_pos /<span style="color: red; font-weight: normal; font-style: normal;"> sqrt</span>(dp_nominal_pos)<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flow coefficient, k=m_flow/sqrt(dp), with unit=(kg.m)^(1/2)&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean computeFlowResistance=(dp_nominal_pos &gt; Modelica.Constants.eps) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag to enable/disable computation of flow resistance&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
 <span style="color: blue; font-weight: normal; font-style: normal;">if </span>computeFlowResistance<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
   <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(m_flow_turbulent &gt; 0, &quot;m_flow_turbulent must be bigger than zero.&quot;);
 <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

 <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(m_flow_nominal_pos &gt; 0, &quot;m_flow_nominal_pos must be non-zero. Check parameters.&quot;);
 <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(m_flow_nominal_pos &gt; m_flow_turbulent,
   &quot;In FixedResistanceDpM, m_flow_nominal is smaller than m_flow_turbulent.
  m_flow_nominal = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(m_flow_nominal) + &quot;
  dh      = &quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(dh) + &quot;
 To correct it, set dh &lt; &quot; +
     <span style="color: red; font-weight: normal; font-style: normal;">String</span>(     4*m_flow_nominal/eta_default/Modelica.Constants.pi/ReC) + &quot;
  Suggested value:   dh = &quot; +
                <span style="color: red; font-weight: normal; font-style: normal;">String</span>(1/10*4*m_flow_nominal/eta_default/Modelica.Constants.pi/ReC),
                AssertionLevel.warning);

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Pressure drop calculation</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>computeFlowResistance<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>linearized<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      m_flow*m_flow_nominal_pos = k^2*dp;
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">if </span>homotopyInitialization<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
        <span style="color: blue; font-weight: normal; font-style: normal;">if </span>from_dp<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
          m_flow=<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.BaseClasses.FlowModels.basicFlowFunction_dp</span>(dp=dp, k=k,
                                   m_flow_turbulent=m_flow_turbulent),
                                   simplified=m_flow_nominal_pos*dp/dp_nominal_pos);
        <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
          dp=<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.BaseClasses.FlowModels.basicFlowFunction_m_flow</span>(m_flow=m_flow, k=k,
                                   m_flow_turbulent=m_flow_turbulent),
                    simplified=dp_nominal_pos*m_flow/m_flow_nominal_pos);
         <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;<span style="color: #006400; font-weight: normal; font-style: normal;">  // from_dp</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> // do not use homotopy</span>
        <span style="color: blue; font-weight: normal; font-style: normal;">if </span>from_dp<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
          m_flow=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.BaseClasses.FlowModels.basicFlowFunction_dp</span>(dp=dp, k=k,
                                   m_flow_turbulent=m_flow_turbulent);
        <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
          dp=<span style="color: red; font-weight: normal; font-style: normal;">Buildings.Fluid.BaseClasses.FlowModels.basicFlowFunction_m_flow</span>(m_flow=m_flow, k=k,
                                   m_flow_turbulent=m_flow_turbulent);
        <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;<span style="color: #006400; font-weight: normal; font-style: normal;">  // from_dp</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;<span style="color: #006400; font-weight: normal; font-style: normal;"> // homotopyInitialization</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;<span style="color: #006400; font-weight: normal; font-style: normal;"> // linearized</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span><span style="color: #006400; font-weight: normal; font-style: normal;"> // do not compute flow resistance</span>
    dp = 0;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;<span style="color: #006400; font-weight: normal; font-style: normal;">  // computeFlowResistance</span>

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>FixedResistanceDpM;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE LosslessPipe<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.FixedResi0fb31093ff38bc87sPipeI.png" alt="Buildings.Fluid.FixedResistances.LosslessPipe" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.FixedResistances.LosslessPipe"></a><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances"
>Buildings.Fluid.FixedResistances</a>.LosslessPipe</h2>
<p>
<b>Pipe with no flow friction and no heat transfer</b>
<br>
<br><img src="Buildings.Fluid.FixedResiefe411e95f8cd6d1ceDpMD.png" alt="Buildings.Fluid.FixedResistances.LosslessPipe">
</p>
<h3>Information</h3>

<p>
Model of a pipe with no flow resistance, no heat loss and no transport delay.
This model can be used to replace a <code>replaceable</code> pipe model
in flow legs in which no friction should be modeled.
This is for example done in the outlet port of the
base class for three way valves,
<a href="Buildings_Fluid_Actuators_BaseClasses.html#Buildings.Fluid.Actuators.BaseClasses.PartialThreeWayValve"
>
Buildings.Fluid.Actuators.BaseClasses.PartialThreeWayValve</a>.
</p>

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</a> (Partial model transporting fluid between two ports without storing mass or energy).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> LosslessPipe <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Pipe with no flow friction and no heat transfer&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean from_dp=true <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Used to satisfy replaceable models&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  dp=0;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Isenthalpic state transformation (no storage and no loss of energy)</span>
  port_a.h_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.h_outflow);
  port_b.h_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.h_outflow);

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Mass balance (no storage)</span>
  port_a.m_flow + port_b.m_flow = 0;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Transport of substances</span>
  port_a.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.Xi_outflow);
  port_b.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.Xi_outflow);

  port_a.C_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_b.C_outflow);
  port_b.C_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port_a.C_outflow);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>LosslessPipe;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Pipe<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.FixedResistances.PipeI.png" alt="Buildings.Fluid.FixedResistances.Pipe" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.FixedResistances.Pipe"></a><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances"
>Buildings.Fluid.FixedResistances</a>.Pipe</h2>
<p>
<b>Pipe with finite volume discretization along flow path</b>
<br>
<br><img src="Buildings.Fluid.FixedResistances.PipeD.png" alt="Buildings.Fluid.FixedResistances.Pipe">
</p>
<h3>Information</h3>

<p>
Model of a pipe with flow resistance and optional heat exchange with environment.
</p>
<p>
If <code>useMultipleHeatPorts=false</code> (default option), the pipe uses a single heat port
for the heat exchange with the environment.
If <code>useMultipleHeatPorts=true</code>, then one heat port for each segment of the pipe is
used for the heat exchange with the environment.
If the heat port is unconnected, then the pipe has no heat loss.
</p>
<p>
The default value for the parameter <code>diameter</code> is computed such that the flow velocity
is equal to <code>v_nominal=0.15</code> for a mass flow rate of <code>m_flow_nominal</code>.
Both parameters, <code>diameter</code> and <code>v_nominal</code>, can be overwritten
by the user.
The default value for <code>dp_nominal</code> is two times the pressure drop that the pipe
would have if it were straight with no fittings.
The factor of two that takes into account the pressure loss of fittings can be overwritten.
These fittings could also be explicitly modeled outside of this component using models from
the package
<a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Fittings.html#Modelica.Fluid.Fittings"
>
Modelica.Fluid.Fittings</a>.
For mass flow rates other than <code>m_flow_nominal</code>, the model
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>
Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> is used to
compute the pressure drop.
</p>
<p>
For a steady-state model of a flow resistance, use
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>
Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> instead of this model.
</p>

<p>Extends from <a href="Buildings_Fluid_FixedResistances_BaseClasses.html#Buildings.Fluid.FixedResistances.BaseClasses.Pipe"
>Buildings.Fluid.FixedResistances.BaseClasses.Pipe</a> (Model of a pipe with finite volume discretization along the flow path).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nSeg</td><td>10</td><td>Number of volume segments</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>thicknessIns</td><td>&nbsp;</td><td>Thickness of insulation [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>ThermalConductivity</a></td><td>lambdaIns</td><td>&nbsp;</td><td>Heat conductivity of insulation [W/(m.K)]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>diameter</td><td>sqrt(4*m_flow_nominal/rho_de...</td><td>Pipe diameter (without insulation) [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>length</td><td>&nbsp;</td><td>Length of the pipe [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>v_nominal</td><td>0.15</td><td>Velocity at m_flow_nominal (used to compute default diameter) [m/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>roughness</td><td>2.5e-5</td><td>Absolute roughness of pipe, with a default for a smooth steel pipe (dummy if use_roughness = false) [m]</td></tr>
<tr><td>Boolean</td><td>useMultipleHeatPorts</td><td>false</td><td>= true to use one heat port for each segment of the pipe, false to use a single heat port for the entire pipe</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>2*dpStraightPipe_nominal</td><td>Pressure difference [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td>Real</td><td>mSenFac</td><td>1</td><td>Factor for scaling the sensible thermal mass of the volume</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr><td>Real</td><td>ReC</td><td>4000</td><td>Reynolds number where transition to turbulent starts</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heatPort</td><td>Single heat port that connects to outside of pipe wall (default, enabled when useMultipleHeatPorts=false)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a"
>HeatPorts_a</a></td><td>heatPorts[nSeg]</td><td>Multiple heat ports that connect to outside of pipe wall (enabled if useMultipleHeatPorts=true)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Pipe <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Pipe with finite volume discretization along flow path&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_FixedResistances_BaseClasses.html#Buildings.Fluid.FixedResistances.BaseClasses.Pipe"
>Buildings.Fluid.FixedResistances.BaseClasses.Pipe</a>(
   diameter=<span style="color: red; font-weight: normal; font-style: normal;">sqrt</span>(4*m_flow_nominal/rho_default/v_nominal/Modelica.Constants.pi),
   dp_nominal=2*dpStraightPipe_nominal,
   preDro(dp(nominal=length*10)));
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Because dp_nominal is a non-literal value, we set</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// dp.nominal=100 instead of the default dp.nominal=dp_nominal,</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// because the latter is ignored by Dymola 2012 FD 01.</span>

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> v_nominal = 0.15 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Velocity at m_flow_nominal (used to compute default diameter)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> roughness(min=0) = 2.5e-5 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Absolute roughness of pipe, with a default for a smooth steel pipe (dummy if use_roughness = false)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dpStraightPipe_nominal=
      <span style="color: red; font-weight: normal; font-style: normal;">Modelica.Fluid.Pipes.BaseClasses.WallFriction.Detailed.pressureLoss_m_flow</span>(
      m_flow=m_flow_nominal,
      rho_a=rho_default,
      rho_b=rho_default,
      mu_a=mu_default,
      mu_b=mu_default,
      length=length,
      diameter=diameter,
      roughness=roughness,
      m_flow_small=m_flow_small) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure loss of a straight pipe at m_flow_nominal&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean useMultipleHeatPorts=false <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;= true to use one heat port for each segment of the pipe, false to use a single heat port for the entire pipe&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalConductor"
>Modelica.Thermal.HeatTransfer.Components.ThermalConductor</a> conPipWal[nSeg](
      <span style="color: blue; font-weight: normal; font-style: normal;">each </span>G=2*Modelica.Constants.pi*lambdaIns*length/nSeg/<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Math.log</span>((
        diameter/2.0 + thicknessIns)/(diameter/2.0))) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Thermal conductance through pipe wall&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> colAllToOne(m=nSeg) <span style="color: blue; font-weight: normal; font-style: normal;">if </span>
       <span style="color: blue; font-weight: normal; font-style: normal;">not </span>useMultipleHeatPorts <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Connector to assign multiple heat ports to one heat port&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> heatPort <span style="color: blue; font-weight: normal; font-style: normal;">if </span><span style="color: blue; font-weight: normal; font-style: normal;">not </span>
    useMultipleHeatPorts <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Single heat port that connects to outside of pipe wall (default, enabled when useMultipleHeatPorts=false)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a"
>Modelica.Fluid.Interfaces.HeatPorts_a</a> heatPorts[nSeg] <span style="color: blue; font-weight: normal; font-style: normal;">if </span>
       useMultipleHeatPorts <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Multiple heat ports that connect to outside of pipe wall (enabled if useMultipleHeatPorts=true)&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conPipWal.port_b, vol.heatPort);
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>useMultipleHeatPorts<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heatPorts, conPipWal.port_a);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(colAllToOne.port_a, conPipWal.port_a);
    <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(colAllToOne.port_b, heatPort);

  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Pipe;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SplitterFixedResistanceDpM<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.FixedResi51e52f70be5315dfceDpMI.png" alt="Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM"></a><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances"
>Buildings.Fluid.FixedResistances</a>.SplitterFixedResistanceDpM</h2>
<p>
<b>Flow splitter with fixed resistance at each port</b>
<br>
<br><img src="Buildings.Fluid.FixedResi51e52f70be5315dfceDpMD.png" alt="Buildings.Fluid.FixedResistances.SplitterFixedResistanceDpM">
</p>
<h3>Information</h3>

<p>
Model of a flow splitter or mixer with a fixed resistance in each flow leg.
In each flow lag, a pressure drop can be modeled, and at the fluid junction,
a mixing volume can be modeled.
</p>
<p>
The pressure drop is implemented using the model
<a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>
Buildings.Fluid.FixedResistances.FixedResistanceDpM</a>.
If its nominal pressure drop is set to zero, then the pressure drop
model will be removed.
For example, the pressure drop declaration
</p>
<pre>
  m_flow_nominal={ 0.1, 0.1,  -0.2},
  dp_nominal =   {500,    0, -6000}
</pre>
<p>
would model a mixer that has the nominal flow rates and associated pressure drops
as shown in the figure below. Note that <code>port_3</code> is set to negative values.
The negative values indicate that at the nominal conditions, fluid is leaving the component.
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Fluid/FixedResistances/SplitterFixedResistanceDpM.png"/>
</p>
<p>
Optionally, at the fluid junction, a control volume can be modeled.
This is implemented using the model
<a href="Buildings_Fluid_Delays.html#Buildings.Fluid.Delays.DelayFirstOrder"
>
Buildings.Fluid.Delays.DelayFirstOrder</a>.
The fluid volume is modeled if
<code>dynamicBalance=true</code>, and it is removed if
<code>dynamicBalance=false</code>.
The control volume has the size
</p>
<pre>
  V = sum(abs(m_flow_nominal[:])/3)*tau/rho_nominal
</pre>
<p>
where <code>tau</code> is a parameter and <code>rho_nominal</code> is the density
of the medium in the volume at nominal condition.
Setting <code>dynamicBalance=true</code> can help reducing the size of the nonlinear
system of equations.
</p>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.PartialThreeWayResistance"
>Buildings.Fluid.BaseClasses.PartialThreeWayResistance</a> (Flow splitter with partial resistance model at each port).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Boolean</td><td>use_dh</td><td>false</td><td>Set to true to specify hydraulic diameter</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.3</td><td>Fraction of nominal mass flow rate where transition to turbulent occurs</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dh[3]</td><td>{1,1,1}</td><td>Hydraulic diameter [m]</td></tr>
<tr><td>Real</td><td>ReC[3]</td><td>{4000,4000,4000}</td><td>Reynolds number where transition to turbulent starts</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal[3]</td><td>&nbsp;</td><td>Mass flow rate. Set negative at outflowing ports. [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal[3]</td><td>&nbsp;</td><td>Pressure. Set negative at outflowing ports. [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td>Boolean</td><td>dynamicBalance</td><td>true</td><td>Set to true to use a dynamic balance, which often leads to smaller systems of equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mDyn_flow_nominal</td><td>sum(abs(m_flow_nominal[:])/3)</td><td>Nominal mass flow rate for dynamic momentum and energy balance [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>10</td><td>Time constant at nominal flow for dynamic energy and momentum balance [s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>true</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.PortFlowDirection"
>PortFlowDirection</a></td><td>portFlowDirection_1</td><td>Modelica.Fluid.Types.PortFlo...</td><td>Flow direction for port_1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.PortFlowDirection"
>PortFlowDirection</a></td><td>portFlowDirection_2</td><td>Modelica.Fluid.Types.PortFlo...</td><td>Flow direction for port_2</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.PortFlowDirection"
>PortFlowDirection</a></td><td>portFlowDirection_3</td><td>Modelica.Fluid.Types.PortFlo...</td><td>Flow direction for port_3</td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_1</td><td>First port, typically inlet</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_2</td><td>Second port, typically outlet</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_3</td><td>Third port, can be either inlet or outlet</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SplitterFixedResistanceDpM <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Flow splitter with fixed resistance at each port&quot;</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;
    <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.PartialThreeWayResistance"
>Buildings.Fluid.BaseClasses.PartialThreeWayResistance</a>(
    mDyn_flow_nominal =<span style="color: red; font-weight: normal; font-style: normal;"> sum</span>(<span style="color: red; font-weight: normal; font-style: normal;">abs</span>(m_flow_nominal[:])/3),
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> res1(
         <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium=<a href="Buildings_Fluid_Interfaces_Medium.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations.Medium"
>Medium</a>,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>allowFlowReversal=true,
            from_dp=from_dp,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal=m_flow_nominal[1],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dp_nominal=dp_nominal[1],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>ReC=ReC[1],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dh=dh[1],
            linearized=linearized,
            homotopyInitialization=homotopyInitialization,
            deltaM=deltaM),
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> res2(
         <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium=<a href="Buildings_Fluid_Interfaces_Medium.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations.Medium"
>Medium</a>,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>allowFlowReversal=true,
            from_dp=from_dp,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal=m_flow_nominal[2],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dp_nominal=dp_nominal[2],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>ReC=ReC[2],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dh=dh[2],
            linearized=linearized,
            homotopyInitialization=homotopyInitialization,
            deltaM=deltaM),
      <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</a> res3(
         <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium=<a href="Buildings_Fluid_Interfaces_Medium.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations.Medium"
>Medium</a>,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>allowFlowReversal=true,
            from_dp=from_dp,
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal=m_flow_nominal[3],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dp_nominal=dp_nominal[3],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>ReC=ReC[3],
            <span style="color: blue; font-weight: normal; font-style: normal;">final </span>dh=dh[3],
            linearized=linearized,
            homotopyInitialization=homotopyInitialization,
            deltaM=deltaM));

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean use_dh = false <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Set to true to specify hydraulic diameter&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a>[3] m_flow_nominal <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass flow rate. Set negative at outflowing ports.&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a>[3] dp_nominal(<span style="color: blue; font-weight: normal; font-style: normal;">each </span>displayUnit = &quot;Pa&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure. Set negative at outflowing ports.&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real deltaM(min=0) = 0.3 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fraction of nominal mass flow rate where transition to turbulent occurs&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a>[3] dh={1, 1, 1} <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Hydraulic diameter&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real[3] ReC(<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0)={4000, 4000, 4000} <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Reynolds number where transition to turbulent starts&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean linearized = false <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean homotopyInitialization = true <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;= true, use homotopy method&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SplitterFixedResistanceDpM;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:24:21 2015.
</address>
</body>
</html>
