<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Electrical.AC.OnePhase.Loads</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with load models for one phase AC systems&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Loads<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Electrical.AC.OnePhase.Loads"></a><a href="Buildings_Electrical_AC_OnePhase.html#Buildings.Electrical.AC.OnePhase"
>Buildings.Electrical.AC.OnePhase</a>.Loads</h2>
<p>
<b>Package with load models for one phase AC systems</b><br>
</p>
<h3>Information</h3>

<p>
This package contains models that represent different types of AC single phase loads.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</a> (Icon for package containing variants).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Electrical.AC.Oc6e19036d8d18ad4itiveS.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Capacitive" width="20" height="20" align="top">&nbsp;<a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads.Capacitive"
>Capacitive</a>
</td>
<td>Model of a capacitive and resistive load</td>
</tr>
<tr>
<td><img src="Buildings.Electrical.AC.Odb345a5186b3ef66danceS.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Impedance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads.Impedance"
>Impedance</a>
</td>
<td>Model of a generic impedance</td>
</tr>
<tr>
<td><img src="Buildings.Electrical.AC.O837c4a1ca6c971dbctiveS.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Inductive" width="20" height="20" align="top">&nbsp;<a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads.Inductive"
>Inductive</a>
</td>
<td>Model of an inductive and resistive load</td>
</tr>
<tr>
<td><img src="Buildings.Electrical.AC.O17a2f9c55fc96a86stiveS.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Resistive" width="20" height="20" align="top">&nbsp;<a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads.Resistive"
>Resistive</a>
</td>
<td>Model of a resistive load</td>
</tr>
<tr>
<td><img src="Buildings.Electrical.AC.O12f27bb27ebf526dmplesS.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Electrical_AC_OnePhase_Loads_Examples.html#Buildings.Electrical.AC.OnePhase.Loads.Examples"
>Examples</a>
</td>
<td>Package with example models</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Capacitive<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Electrical.AC.Oc6e19036d8d18ad4itiveI.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Capacitive" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Electrical.AC.OnePhase.Loads.Capacitive"></a><a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads"
>Buildings.Electrical.AC.OnePhase.Loads</a>.Capacitive</h2>
<p>
<b>Model of a capacitive and resistive load</b>
<br>
<br><img src="Buildings.Electrical.AC.Oc6e19036d8d18ad4itiveD.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Capacitive">
</p>
<h3>Information</h3>


<p>
Model of an capacitive load. It may be used to model a bank of capacitors.
</p>
<p>
The model computes the complex power vector as
<p align="center" style="font-style:italic;">
S = P + jQ = V &sdot; i<sup>*</sup>
</p>
<p>
where <i>V</i> is the voltage phasor and <i>i<sup>*</sup></i> is the complex
conjugate of the current phasor. The voltage and current phasors are shifted
by an angle <i>&phi;</i>.
</p>

<p>
The load model takes as input the power consumed by the inductive load and
the power factor <i>pf=cos(&phi;)</i>. The power
can be either fixed using the parameter <code>P_nominal</code>, or
it is possible to specify a variable power using the inputs <code>y</code> or
<code>Pow</code>.

The power factor can be either specified by the parameter <code>pf</code>
or using the input variable <code>pf_in</code>.

The different modes can be selected with the parameter
<code>mode</code> and <code>use_pf_in</code>, see <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Load"
>
Buildings.Electrical.Interfaces.Load</a> and
<a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.CapacitiveLoad"
>
Buildings.Electrical.Interfaces.CapacitiveLoad</a> for more information.
</p>

<p>
Given the active power <i>P</i> and the power factor <i>pf</i> the complex
power <i>Q</i> is computed as
</p>

<p align="center" style="font-style:italic;">
Q = - P  tan(arccos(pf)).
</p>

<p>
The equations of the model can be rewritten as
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = (P V<sub>1</sub> + Q V<sub>2</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = (P V<sub>2</sub> - Q V<sub>1</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>

<p>
where <i>i<sub>1</sub></i>, <i>i<sub>2</sub></i>, <i>V<sub>1</sub></i>, and <i>V<sub>2</sub></i>
are the real and imaginary parts of the current and voltage phasors.
</p>
<p>
The nonlinearity of the model is due to the fact that the load consumes the power specified by the variables <i>P</i>
and <i>Q</i> irrespectively of the voltage of the load.
</p>
<p>
When multiple loads are connected in a grid through cables that cause voltage drops,
the dimension of the system of nonlinear equations increases linearly with the number of loads.
This nonlinear system of equations introduces challenges during the initialization,
as Newton solvers may diverge if initialized far from a solution, as well during the simulation.
In this situation, the model can be parameterized to use a linear approximation
as discussed in the next section.
</p>

<h4>Linearized model</h4>
<p>
Given the constraints and the two-dimensional nature of the problem, it is difficult to
find a linearized version of the AC load model. A solution could be to divide the voltage
domain into sectors, and for each sector compute the best linear approximation.
However the selection of the proper approximation depending on the value of the
voltage can generate events that increase the simulation time. For these reasons, the
linearized model assumes a voltage that is equal to the nominal value
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = (P V<sub>1</sub> + Q V<sub>2</sub>)/V<sub>RMS</sub><sup>2</sup>,
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = (P V<sub>2</sub> - Q V<sub>1</sub>)/V<sub>RMS</sub><sup>2</sup>,
</p>
<p>
where <i>V<sub>RMS</sub></i> is the Root Mean Square voltage os the AC system.
Even though this linearized version of the load model introduces an approximation
error in the current, it satisfies the contraints related to the ratio of the
active and reactive powers.
</p>

<h4>Initialization</h4>
<p>
The initialization problem can be simplified using the homotopy operator. The homotopy operator
uses two different types of equations to compute the value of a variable: the actual one
and a simplified one. The actual equation is the one used during the normal operation.
During initialization, the simplified equation is first solved and then slowly replaced
with the actual equation to compute the initial values for the nonlinear systems of
equations. The load model uses the homotopy operator, with the linearized model being used
as the simplified equation. This numerical expedient has proven useful when simulating models
with more than ten connected loads.
</p>
<p>
The load model has a parameter <code>initMode</code> that can be used to select
the assumption to use during the initialization phase by the homotopy operator.
The choices are between a null current or the linearized model.
</p>



<p>Extends from <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.CapacitiveLoad"
>Buildings.Electrical.Interfaces.CapacitiveLoad</a> (Partial model of a capacitive load).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td><a href="Buildings_Electrical_PhaseSystems_PartialPhaseSystem.html#Buildings.Electrical.PhaseSystems.PartialPhaseSystem"
>PartialPhaseSystem</a></td><td>Phase system</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Modelling assumption</td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>If true, the load model is linearized</td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.Load"
>Load</a></td><td>mode</td><td>Buildings.Electrical.Types.L...</td><td>Type of load model (e.g., steady state, dynamic, prescribed power consumption, etc.)</td></tr>
<tr><td>Boolean</td><td>use_pf_in</td><td>false</td><td>If true, the power factor is defined by an input</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal conditions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Power"
>Power</a></td><td>P_nominal</td><td>&nbsp;</td><td>Nominal power (negative if consumed, positive if generated) [W]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>V_nominal.start</td><td>110</td><td>Nominal voltage (V_nominal &gt;= 0) [V]</td></tr>
<tr><td>Real</td><td>pf</td><td>0.8</td><td>Power factor</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.InitMode"
>InitMode</a></td><td>initMode</td><td>Buildings.Electrical.Types.I...</td><td>Initialization mode for homotopy operator</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td>Phase system</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y</td><td>Fraction of the nominal power consumed [1]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Pow</td><td>Power consumed [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>pf_in</td><td>Power factor [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Capacitive <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Model of a capacitive and resistive load&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.CapacitiveLoad"
>Buildings.Electrical.Interfaces.CapacitiveLoad</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> PhaseSystem = <a href="Buildings_Electrical_PhaseSystems_OnePhase.html#Buildings.Electrical.PhaseSystems.OnePhase"
>PhaseSystems.OnePhase</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Electrical_AC_OnePhase_Interfaces.html#Buildings.Electrical.AC.OnePhase.Interfaces.Terminal_n"
>Interfaces.Terminal_n</a> terminal,
    V_nominal(start = 110));
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>mode == Buildings.Electrical.Types.Load.FixedZ_dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// q = Y[2]*{V_nominal, 0}/omega;</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// Steady state initialization</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(q) =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(PhaseSystem.n);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  omega =<span style="color: red; font-weight: normal; font-style: normal;"> der</span>(<span style="color: red; font-weight: normal; font-style: normal;">PhaseSystem.thetaRef</span>(terminal.theta));

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>mode == Buildings.Electrical.Types.Load.FixedZ_dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Use the dynamic phasorial representation</span>
    Y[1] = -(P_nominal/pf)*pf/V_nominal^2;
    Y[2] = -(P_nominal/pf)*<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Fluid.Utilities.regRoot</span>(1 - pf^2, delta=0.001)/V_nominal^2;

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Electric charge</span>
    q = Y[2]*{v[1], v[2]}/omega;

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Dynamics of the system</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(q) + omega*<span style="color: red; font-weight: normal; font-style: normal;">j</span>(q) + Y[1]*v = i;

  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Use the power specified by the parameter or inputs</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>linearized<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= (v[2]*Q + v[1]*P)/(V_nominal^2), simplified= v[1]*Modelica.Constants.eps*1e3);
      i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= (v[2]*P - v[1]*Q)/(V_nominal^2), simplified= v[2]*Modelica.Constants.eps*1e3);
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initMode == Buildings.Electrical.Types.InitMode.zero_current<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
        i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=(v[2]*Q + v[1]*P)/(v[1]^2 + v[2]^2), simplified=0.0);
        i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=(v[2]*P - v[1]*Q)/(v[1]^2 + v[2]^2), simplified=0.0);
      <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
        i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=(v[2]*Q + v[1]*P)/(v[1]^2 + v[2]^2), simplified=(v[2]*Q + v[1]*P)/(V_nominal^2));
        i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=(v[2]*P - v[1]*Q)/(v[1]^2 + v[2]^2), simplified=(v[2]*P - v[1]*Q)/(V_nominal^2));
      <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

    Y = {0, 0};
    q = {0, 0};

  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Capacitive;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Impedance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Electrical.AC.Odb345a5186b3ef66danceI.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Impedance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Electrical.AC.OnePhase.Loads.Impedance"></a><a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads"
>Buildings.Electrical.AC.OnePhase.Loads</a>.Impedance</h2>
<p>
<b>Model of a generic impedance</b>
<br>
<br><img src="Buildings.Electrical.AC.Odb345a5186b3ef66danceD.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Impedance">
</p>
<h3>Information</h3>

<p>
Model of an impedance. This model can be used to represent any type
of resistive, inductive or capacitive load.
</p>
<p>
Note that the power consumed by the impedance model will drecrease if its voltage
decreases.
</p>
<p>
The model of the impedance is
</p>

<p align="center" style="font-style:italic;">
V = Z i,
</p>

<p>
where <i>Z = R + j X</i> is the impedance. The value of the resistance <i>R</i> and the
reactance <i>X</i> depend on the type of impedance. Different types of impedances
can be selected using the boolean parameters <code>inductive</code>, <code>use_R_in</code>,
<code>use_L_in</code>, and <code>use_C_in</code>. See
<a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Impedance"
>
Buildings.Electrical.Interfaces.Impedance</a> for more details.
</p>

<p>Extends from <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Impedance"
>Buildings.Electrical.Interfaces.Impedance</a> (Partial model representing a generalized impedance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td><a href="Buildings_Electrical_PhaseSystems_PartialPhaseSystem.html#Buildings.Electrical.PhaseSystems.PartialPhaseSystem"
>PartialPhaseSystem</a></td><td>Phase system</td></tr>
<tr><td>Boolean</td><td>inductive</td><td>true</td><td>If true, the load is inductive, otherwise it is capacitive</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>R</td><td>1</td><td>Resistance [Ohm]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>L</td><td>0</td><td>Inductance [H]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>C</td><td>0</td><td>Capacitance [F]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.InitMode"
>InitMode</a></td><td>initMode</td><td>Buildings.Electrical.Types.I...</td><td>Initialization mode for homotopy operator</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Variable load</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Resistance</td></tr>
<tr><td>Boolean</td><td>use_R_in</td><td>false</td><td>If true, R is specified by an input</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RMin</td><td>1e-4</td><td>Minimum value of the resistance [Ohm]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RMax</td><td>1e2</td><td>Maximum value of the resistance [Ohm]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Capacitance</td></tr>
<tr><td>Boolean</td><td>use_C_in</td><td>false</td><td>If true, C is specified by an input</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>CMin</td><td>1e-4</td><td>Minimum value of the capacitance [F]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>CMax</td><td>1e2</td><td>Maximum value of the capacitance [F]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Inductance</td></tr>
<tr><td>Boolean</td><td>use_L_in</td><td>false</td><td>If true, L is specified by an input</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>LMin</td><td>1e-4</td><td>Minimum value of the inductance [H]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>LMax</td><td>1e2</td><td>Maximum value of the inductance [H]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td>Phase system</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y</td><td>Fraction of the nominal power consumed [1]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Pow</td><td>Power consumed [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y_R</td><td>Input that sepecify variable R</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y_C</td><td>Input that sepecify variable C</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y_L</td><td>Input that sepecify variable L</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Impedance <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Model of a generic impedance&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Impedance"
>Buildings.Electrical.Interfaces.Impedance</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> PhaseSystem = <a href="Buildings_Electrical_PhaseSystems_OnePhase.html#Buildings.Electrical.PhaseSystems.OnePhase"
>PhaseSystems.OnePhase</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><a href="Buildings_Electrical_AC_OnePhase_Interfaces.html#Buildings.Electrical.AC.OnePhase.Interfaces.Terminal_n"
>Interfaces.Terminal_n</a> terminal);
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</a> omega <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Frequency of the quasi-stationary sine waves&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Reactance"
>Modelica.SIunits.Reactance</a> X(start = 1) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Complex component of the impedance&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  omega =<span style="color: red; font-weight: normal; font-style: normal;"> der</span>(<span style="color: red; font-weight: normal; font-style: normal;">PhaseSystem.thetaRef</span>(terminal.theta));

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>inductive<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    X = omega*L_internal;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    X = -1/(omega*C_internal);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

  terminal.v = {{R_internal,-X}*terminal.i, {X,R_internal}*terminal.i};
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Impedance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Inductive<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Electrical.AC.O837c4a1ca6c971dbctiveI.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Inductive" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Electrical.AC.OnePhase.Loads.Inductive"></a><a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads"
>Buildings.Electrical.AC.OnePhase.Loads</a>.Inductive</h2>
<p>
<b>Model of an inductive and resistive load</b>
<br>
<br><img src="Buildings.Electrical.AC.O837c4a1ca6c971dbctiveD.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Inductive">
</p>
<h3>Information</h3>


<p>
Model of an inductive load. It may be used to model an inductive motor.
</p>
<p>
The model computes the complex power vector as
<p align="center" style="font-style:italic;">
S = P + jQ = V &sdot; i<sup>*</sup>,
</p>
<p>
where <i>V</i> is the voltage phasor and <i>i<sup>*</sup></i> is the complex
conjugate of the current phasor. The voltage and current phasors are shifted
by an angle <i>&phi;</i>.
</p>

<p>
The load model takes as input the power consumed by the inductive load and
the power factor <i>pf=cos(&phi;)</i>. The power
can be either fixed using the parameter <code>P_nominal</code>, or
it is possible to specify a variable power using the inputs <code>y</code> or
<code>Pow</code>.

The power factor can be either specified by the parameter <code>pf</code>
or using the input connector <code>pf_in</code>.

The different modes can be selected with the parameter
<code>mode</code> and <code>use_pf_in</code>, see <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Load"
>
Buildings.Electrical.Interfaces.Load</a> and
<a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.InductiveLoad"
>
Buildings.Electrical.Interfaces.InductiveLoad</a> for more information.
</p>

<p>
Given the active power <i>P</i> and the power factor <i>pf</i>, the complex
power <i>Q</i> is computed as
</p>

<p align="center" style="font-style:italic;">
Q = P  tan(arccos(pf)).
</p>

<p>
The equations of the model can be rewritten as
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = (P V<sub>1</sub> + Q V<sub>2</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = (P V<sub>2</sub> - Q V<sub>1</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>

<p>
where <i>i<sub>1</sub></i>, <i>i<sub>2</sub></i>, <i>V<sub>1</sub></i>, and <i>V<sub>2</sub></i>
are the real and imaginary parts of the current and voltage phasors.
</p>
<p>
The nonlinearity of the model is due to the fact that the load consumes the power specified by the variables <i>P</i>
and <i>Q</i>, irrespectively of the voltage of the load.
</p>
<p>
When multiple loads are connected in a grid through cables that cause voltage drops,
the dimension of the system of nonlinear equations increases linearly with the number of loads.
This nonlinear system of equations introduces challenges during the initialization,
as Newton solvers may diverge if initialized far from a solution, as well during the simulation.
In this situation, the model can be parameterized to use a linear approximation
as discussed in the next section.
</p>

<h4>Linearized model</h4>
<p>
Given the constraints and the two-dimensional nature of the problem, it is difficult to
find a linearized version of the AC load model. A solution could be to divide the voltage
domain into sectors, and for each sector compute the best linear approximation.
However the selection of the proper approximation depending on the value of the
voltage can generate events that increase the simulation time. For these reasons, the
linearized model assumes a voltage that is equal to the nominal value
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = (P V<sub>1</sub> + Q V<sub>2</sub>)/V<sub>RMS</sub><sup>2</sup>,
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = (P V<sub>2</sub> - Q V<sub>1</sub>)/V<sub>RMS</sub><sup>2</sup>,
</p>
<p>
where <i>V<sub>RMS</sub></i> is the Root Mean Square voltage of the AC system.
Even though this linearized version of the load model introduces an approximation
error in the current, it satisfies the contraints related to the ratio of the
active and reactive powers.
</p>

<h4>Initialization</h4>
<p>
The initialization problem can be simplified using the homotopy operator. The homotopy operator
uses two different types of equations to compute the value of a variable: the actual one
and a simplified one. The actual equation is the one used during the normal operation.
During initialization, the simplified equation is first solved and then slowly replaced
with the actual equation to compute the initial values for the nonlinear systems of
equations. The load model uses the homotopy operator, with the linearized model being used
as the simplified equation. This numerical expedient has proven useful when simulating models
with more than ten connected loads.
</p>
<p>
The load model has a parameter <code>initMode</code> that can be used to select
the assumption to use during the initialization phase by the homotopy operator.
The choices are between a null current or the linearized model.
</p>



<p>Extends from <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.InductiveLoad"
>Buildings.Electrical.Interfaces.InductiveLoad</a> (Partial model of an inductive load).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td><a href="Buildings_Electrical_PhaseSystems_PartialPhaseSystem.html#Buildings.Electrical.PhaseSystems.PartialPhaseSystem"
>PartialPhaseSystem</a></td><td>Phase system</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Modelling assumption</td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>If true, the load model is linearized</td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.Load"
>Load</a></td><td>mode</td><td>Buildings.Electrical.Types.L...</td><td>Type of load model (e.g., steady state, dynamic, prescribed power consumption, etc.)</td></tr>
<tr><td>Boolean</td><td>use_pf_in</td><td>false</td><td>If true, the power factor is defined by an input</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal conditions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Power"
>Power</a></td><td>P_nominal</td><td>&nbsp;</td><td>Nominal power (negative if consumed, positive if generated) [W]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>V_nominal.start</td><td>110</td><td>Nominal voltage (V_nominal &gt;= 0) [V]</td></tr>
<tr><td>Real</td><td>pf</td><td>0.8</td><td>Power factor</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.InitMode"
>InitMode</a></td><td>initMode</td><td>Buildings.Electrical.Types.I...</td><td>Initialization mode for homotopy operator</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td>Phase system</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y</td><td>Fraction of the nominal power consumed [1]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Pow</td><td>Power consumed [W]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>pf_in</td><td>Power factor [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Inductive <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Model of an inductive and resistive load&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.InductiveLoad"
>Buildings.Electrical.Interfaces.InductiveLoad</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> PhaseSystem = <a href="Buildings_Electrical_PhaseSystems_OnePhase.html#Buildings.Electrical.PhaseSystems.OnePhase"
>PhaseSystems.OnePhase</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Electrical_AC_OnePhase_Interfaces.html#Buildings.Electrical.AC.OnePhase.Interfaces.Terminal_n"
>Interfaces.Terminal_n</a> terminal,
    V_nominal(start = 110));
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>mode == Buildings.Electrical.Types.Load.FixedZ_dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// psi = Z[2]*{P_nominal/V_nominal, 0}/omega;</span>
    <span style="color: #006400; font-weight: normal; font-style: normal;">// Steady state initialization</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(psi) =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(PhaseSystem.n);
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  omega =<span style="color: red; font-weight: normal; font-style: normal;"> der</span>(<span style="color: red; font-weight: normal; font-style: normal;">PhaseSystem.thetaRef</span>(terminal.theta));

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>mode == Buildings.Electrical.Types.Load.FixedZ_dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Use the dynamic phasorial representation</span>
    Z[1] = -pf*(V_nominal^2)/(P_nominal/pf);
    Z[2] = -<span style="color: red; font-weight: normal; font-style: normal;">Modelica.Fluid.Utilities.regRoot</span>(1-pf^2, delta=0.001)*(V_nominal^2)/(P_nominal/pf);

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Dynamics of the system</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(psi) + omega*<span style="color: red; font-weight: normal; font-style: normal;">j</span>(psi) + Z[1]*i = v;

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Magnetic flux</span>
    psi = Z[2]*{i[1], i[2]}/omega;

  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>

    <span style="color: #006400; font-weight: normal; font-style: normal;">// Use the power specified by the parameter or inputs</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>linearized<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= (v[2]*Q + v[1]*P)/(V_nominal^2), simplified= v[1]*Modelica.Constants.eps*1e3);
      i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= (v[2]*P - v[1]*Q)/(V_nominal^2), simplified= v[2]*Modelica.Constants.eps*1e3);
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      <span style="color: #006400; font-weight: normal; font-style: normal;">//PhaseSystem.phasePowers_vi(terminal.v, terminal.i) = PhaseSystem.phasePowers(P, Q);</span>
      <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initMode == Buildings.Electrical.Types.InitMode.zero_current<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
        i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  (v[2]*Q + v[1]*P)/(v[1]^2 + v[2]^2), simplified= 0.0);
        i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  (v[2]*P - v[1]*Q)/(v[1]^2 + v[2]^2), simplified= 0.0);
      <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
        i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  (v[2]*Q + v[1]*P)/(v[1]^2 + v[2]^2), simplified= (v[2]*Q + v[1]*P)/(V_nominal^2));
        i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  (v[2]*P - v[1]*Q)/(v[1]^2 + v[2]^2), simplified= (v[2]*P - v[1]*Q)/(V_nominal^2));
      <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;

    Z = {0,0};
    psi = {0,0};

  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Inductive;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Resistive<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Electrical.AC.O17a2f9c55fc96a86stiveI.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Resistive" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Electrical.AC.OnePhase.Loads.Resistive"></a><a href="Buildings_Electrical_AC_OnePhase_Loads.html#Buildings.Electrical.AC.OnePhase.Loads"
>Buildings.Electrical.AC.OnePhase.Loads</a>.Resistive</h2>
<p>
<b>Model of a resistive load</b>
<br>
<br><img src="Buildings.Electrical.AC.O17a2f9c55fc96a86stiveD.png" alt="Buildings.Electrical.AC.OnePhase.Loads.Resistive">
</p>
<h3>Information</h3>

<p>
Model of a resistive load. It may be used to model a load that has
a power factor of one.
</p>
<p>
The model computes the complex power vector as
<p align="center" style="font-style:italic;">
S = P + jQ = V &sdot; i<sup>*</sup>
</p>
<p>
where <i>V</i> is the voltage phasor and <i>i<sup>*</sup></i> is the complex
conjugate of the current phasor.
</p>

<p>
The load model takes as input the power consumed by the inductive load and
the power factor <i>pf=cos(&phi;)</i>. The power
can be either fixed using the parameter <code>P_nominal</code>, or
it is possible to specify a variable power using the inputs <code>y</code> or
<code>Pow</code>. The different modes can be selected with the parameter
<code>mode</code>, see <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Load"
>
Buildings.Electrical.Interfaces.Load</a> for more information.
</p>

<p>
The equations of the model can be rewritten as
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = (P V<sub>1</sub> + Q V<sub>2</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = (P V<sub>2</sub> - Q V<sub>1</sub>)/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>),
</p>

<p>
where <i>i<sub>1</sub></i>, <i>i<sub>2</sub></i>, <i>V<sub>1</sub></i>, and <i>V<sub>2</sub></i>
are the real and imaginary parts of the current and voltage phasors.
</p>

<p>
Since the model represents a load with a power factor of one, the complex
power is <i>Q = 0</i>. This leads to the following equations where
there are nonlinear equations that relate the current to the voltage
</p>

<p align="center" style="font-style:italic;">
i<sub>1</sub> = P V<sub>1</sub>/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>)
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = P V<sub>2</sub>/(V<sub>1</sub><sup>2</sup> + V<sub>2</sub><sup>2</sup>)
</p>

<p>
The non-linearity is due to the fact that the load consumes the power specified by the variable <i>P</i>,
irrespectively of the voltage of the load. The figure below shows the relationship
between the real part of the current phasor and the real and imaginary voltages of the load.
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Electrical/AC/OnePhase/Loads/NonlinearLoad_labels.png"/>
</p>

<p>
When multiple loads are connected in a grid through cables that cause voltage drops,
the dimension of the system of nonlinear equations increases linearly with the number of loads.
This nonlinear system of equations introduces challenges during the initialization,
as Newton solvers may diverge if initialized far from a solution, as well during the simulation.
In this situation, the model can be parameterized to use a linear approximation
as discussed in the next section.
</p>

<h4>Linearized model</h4>
<p>
Given the constraints and the two-dimensional nature of the problem, it is difficult to
find a linearized version of the AC load model. A solution could be to divide the voltage
domain into sectors, and for each sector compute the best linear approximation.
However, the selection of the proper approximation depending on the value of the
voltage can generate events that increase the simulation time. For these reasons, the
linearized model assumes a voltage that is equal to the nominal value
</p>
<p align="center" style="font-style:italic;">
i<sub>1</sub> = P V<sub>1</sub>/V<sub>RMS</sub><sup>2</sup>
</p>
<p align="center" style="font-style:italic;">
i<sub>2</sub> = P V<sub>2</sub>/V<sub>RMS</sub><sup>2</sup>
</p>
<p>
where <i>V<sub>RMS</sub></i> is the Root Mean Square voltage of the AC system.
Even though this linearized version of the load model introduces an approximation
error in the current, it satisfies the contraints related to the ratio of the
active and reactive powers.
</p>
<p>
The image below show the linearized function
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Electrical/AC/OnePhase/Loads/LinearLoad_labels.png"/>
</p>

<h4>Initialization</h4>
<p>
The initialization problem can be simplified using the homotopy operator. The homotopy operator
uses two different types of equations to compute the value of a variable: the actual one
 and a simplified one. The actual equation is the one used during the normal operation.
During initialization, the simplified equation is first solved and then slowly replaced
with the actual equation to compute the initial values for the nonlinear system of
equations. The load model uses the homotopy operator, with the linearized model being used
as the simplified equation. This numerical expedient has proven useful when simulating models
with more than ten connected loads.
</p>
<p>
The load model has a parameter <code>initMode</code> that can be used to select
the assumption to use during the initialization phase by the homotopy operator.
The choices are between a null current or the linearized model.
</p>


<p>Extends from <a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Load"
>Buildings.Electrical.Interfaces.Load</a> (Partial model for a generic load).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td><a href="Buildings_Electrical_PhaseSystems_PartialPhaseSystem.html#Buildings.Electrical.PhaseSystems.PartialPhaseSystem"
>PartialPhaseSystem</a></td><td>Phase system</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Modelling assumption</td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>If true, the load model is linearized</td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.Load"
>Load</a></td><td>mode</td><td>Buildings.Electrical.Types.L...</td><td>Type of load model (e.g., steady state, dynamic, prescribed power consumption, etc.)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal conditions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Power"
>Power</a></td><td>P_nominal</td><td>&nbsp;</td><td>Nominal power (negative if consumed, positive if generated) [W]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>V_nominal.start</td><td>110</td><td>Nominal voltage (V_nominal &gt;= 0) [V]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="Buildings_Electrical_Types.html#Buildings.Electrical.Types.InitMode"
>InitMode</a></td><td>initMode</td><td>Buildings.Electrical.Types.I...</td><td>Initialization mode for homotopy operator</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package PhaseSystem</td><td>Phase system</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>y</td><td>Fraction of the nominal power consumed [1]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Pow</td><td>Power consumed [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Resistive <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Model of a resistive load&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Electrical_Interfaces.html#Buildings.Electrical.Interfaces.Load"
>Buildings.Electrical.Interfaces.Load</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> PhaseSystem = <a href="Buildings_Electrical_PhaseSystems_OnePhase.html#Buildings.Electrical.PhaseSystems.OnePhase"
>PhaseSystems.OnePhase</a>,
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Electrical_AC_OnePhase_Interfaces.html#Buildings.Electrical.AC.OnePhase.Interfaces.Terminal_n"
>Interfaces.Terminal_n</a> terminal,
    V_nominal(start = 110));
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>linearized<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  v[1]*P/V_nominal^2, simplified=  v[1]*Modelica.Constants.eps*1e3);
    i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual=  v[2]*P/V_nominal^2, simplified=  v[2]*Modelica.Constants.eps*1e3);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initMode == Buildings.Electrical.Types.InitMode.zero_current<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= v[1]*P/(v[1]^2 + v[2]^2),  simplified= 0.0);
      i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= v[2]*P/(v[1]^2 + v[2]^2),  simplified= 0.0);
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      i[1] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= v[1]*P/(v[1]^2 + v[2]^2),
                       simplified= v[1]*P/V_nominal^2);
      i[2] = -<span style="color: red; font-weight: normal; font-style: normal;">homotopy</span>(actual= v[2]*P/(v[1]^2 + v[2]^2),
                       simplified= v[2]*P/V_nominal^2);
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Resistive;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:22:38 2015.
</address>
</body>
</html>
