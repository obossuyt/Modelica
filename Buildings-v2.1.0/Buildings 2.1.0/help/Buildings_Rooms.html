<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Rooms</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with models for rooms&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Rooms<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms"></a><a href="Buildings.html#Buildings"
>Buildings</a>.Rooms</h2>
<p>
<b>Package with models for rooms</b><br>
</p>
<h3>Information</h3>

<p>
This package contains models for the heat transfer in rooms
and through the building envelope.

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Rooms.UsersGuideS.png" alt="Buildings.Rooms.UsersGuide" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_UsersGuide.html#Buildings.Rooms.UsersGuide"
>UsersGuide</a>
</td>
<td>User&#39;s Guide</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.CFDS.png" alt="Buildings.Rooms.CFD" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms.html#Buildings.Rooms.CFD"
>CFD</a>
</td>
<td>Model of a room in which the air is computed using Computational Fluid Dynamics (CFD)</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.MixedAirS.png" alt="Buildings.Rooms.MixedAir" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms.html#Buildings.Rooms.MixedAir"
>MixedAir</a>
</td>
<td>Model of a room in which the air is completely mixed</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.ConstructionsS.png" alt="Buildings.Rooms.Constructions" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_Constructions.html#Buildings.Rooms.Constructions"
>Constructions</a>
</td>
<td>Package with models for constructions that are used in the room model</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.FLEXLABS.png" alt="Buildings.Rooms.FLEXLAB" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_FLEXLAB.html#Buildings.Rooms.FLEXLAB"
>FLEXLAB</a>
</td>
<td>Models that can be used to model the FLEXLAB</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.TypesS.png" alt="Buildings.Rooms.Types" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_Types.html#Buildings.Rooms.Types"
>Types</a>
</td>
<td>Package with type definitions</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.ExamplesS.png" alt="Buildings.Rooms.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_Examples.html#Buildings.Rooms.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.ExamplesS.png" alt="Buildings.Rooms.Validation" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_Validation.html#Buildings.Rooms.Validation"
>Validation</a>
</td>
<td>Collection of validation models</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassesS.png" alt="Buildings.Rooms.BaseClasses" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>BaseClasses</a>
</td>
<td>Package with base classes for Buildings.Rooms</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CFD<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.CFDI.png" alt="Buildings.Rooms.CFD" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.CFD"></a><a href="Buildings_Rooms.html#Buildings.Rooms"
>Buildings.Rooms</a>.CFD</h2>
<p>
<b>Model of a room in which the air is computed using Computational Fluid Dynamics (CFD)</b>
<br>
<br><img src="Buildings.Rooms.CFDD.png" alt="Buildings.Rooms.CFD">
</p>
<h3>Information</h3>

<p>
Room model that computes the room air flow using computational fluid dynamics (CFD). The CFD simulation is coupled to the thermal simulation of the room
and, through the fluid port, to the air conditioning system.
</p>
<p>
Currently, the supported CFD program is the
Fast Fluid Dynamics (FFD) program <a href="Buildings_Rooms.html#ZUO2010"
>(Zuo 2010)</a>.
See
<a href="Buildings_Rooms_UsersGuide.html#Buildings.Rooms.UsersGuide.CFD"
>Buildings.Rooms.UsersGuide.CFD</a>
for detailed explanations.
</p>
<h4>References</h4>
<p>
<a NAME="ZUO2010"/>
Wangda Zuo. <a href="http://docs.lib.purdue.edu/dissertations/AAI3413824/">
Advanced simulations of air distributions in buildings</a>.
Ph.D. Thesis, School of Mechanical Engineering, Purdue University, 2010.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RoomHeatMassBalance"
>Buildings.Rooms.BaseClasses.RoomHeatMassBalance</a> (Base model for a room).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.OpaqueSurface"
>OpaqueSurface</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Brick120</a></td><td>dummyCon</td><td>&nbsp;</td><td>Dummy construction to assign a parameter to the instance</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_GlazingSystems.html#Buildings.HeatTransfer.Data.GlazingSystems.SingleClear3"
>SingleClear3</a></td><td>dummyGlaSys</td><td>&nbsp;</td><td>Dummy construction to assign a parameter to the instance</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>lat</td><td>&nbsp;</td><td>Latitude [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>AFlo</td><td>&nbsp;</td><td>Floor area [m2]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hRoo</td><td>&nbsp;</td><td>Average room height [m]</td></tr>
<tr><td>Boolean</td><td>linearizeRadiation</td><td>true</td><td>Set to true to linearize emissive power</td></tr>
<tr><td>Real</td><td>uSha_fixed[nConExtWin]</td><td>zeros(nConExtWin)</td><td>Constant control signal for the shading device (0: unshaded; 1: fully shaded)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Convective heat transfer</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.InteriorConvection"
>InteriorConvection</a></td><td>intConMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for room-facing surfaces of opaque constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hIntFixed</td><td>3.0</td><td>Constant convection coefficient for room-facing surfaces of opaque constructions [W/(m2.K)]</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.ExteriorConvection"
>ExteriorConvection</a></td><td>extConMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for exterior facing surfaces of opaque constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hExtFixed</td><td>10.0</td><td>Constant convection coefficient for exterior facing surfaces of opaque constructions [W/(m2.K)]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>V*1.2/3600</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">CFD</td></tr>
<tr><td>Boolean</td><td>useCFD</td><td>true</td><td>Set to false to deactivate the CFD computation and use instead yFixed as output</td></tr>
<tr><td>String</td><td>sensorName[:]</td><td>&nbsp;</td><td>Names of sensors as declared in the CFD input file</td></tr>
<tr><td>String</td><td>portName[nPorts]</td><td>{&quot;port_&quot; + String(i) for i i...</td><td>Names of fluid ports as declared in the CFD input file</td></tr>
<tr><td>String</td><td>cfdFilNam</td><td>&nbsp;</td><td>CFD input file name</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Sampling</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>samplePeriod</td><td>&nbsp;</td><td>Sample period of component [s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of mass balance</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>VesselFluidPorts_b</a></td><td>ports[nPorts]</td><td>Fluid inlets and outlets</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heaPorAir</td><td>Heat port to air volume</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heaPorRad</td><td>Heat port for radiative heat gain and radiative temperature</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_conBou[nConBou]</td><td>Heat port at surface b of construction conBou</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_surBou[nSurBou]</td><td>Heat port of surface that is connected to the room air</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>qGai_flow[3]</td><td>Radiant, convective and latent heat input into room (positive if heat gain) [W/m2]</td></tr>
<tr><td><a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</a></td><td>weaBus</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>yCFD[nSen]</td><td>Sensor for output from CFD</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> CFD <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Model of a room in which the air is computed using Computational Fluid Dynamics (CFD)&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RoomHeatMassBalance"
>Buildings.Rooms.BaseClasses.RoomHeatMassBalance</a>(
  <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.CFDAirHeatMassBalance"
>BaseClasses.CFDAirHeatMassBalance</a> air(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>massDynamics = massDynamics,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>cfdFilNam = cfdFilNam,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>useCFD=useCFD,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>samplePeriod=samplePeriod,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>haveSensor=haveSensor,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>nSen=nSen,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>sensorName=sensorName,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>portName=portName,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>uSha_fixed=uSha_fixed,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>p_start=p_start));

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Assumptions</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> massDynamics=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Formulation of mass balance&quot;</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Initialization</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>Medium.AbsolutePressure</a> p_start = Medium.p_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Start value of pressure&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean useCFD = true <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Set to false to deactivate the CFD computation and use instead yFixed as output&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> samplePeriod(min=100*Modelica.Constants.eps) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sample period of component&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real uSha_fixed[nConExtWin] =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(nConExtWin) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Constant control signal for the shading device (0: unshaded; 1: fully shaded)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>String sensorName[:] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Names of sensors as declared in the CFD input file&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>String portName[nPorts] = {&quot;port_&quot; +<span style="color: red; font-weight: normal; font-style: normal;"> String</span>(i) <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:nPorts} <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Names of fluid ports as declared in the CFD input file&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>String cfdFilNam <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;CFD input file name&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> yCFD[nSen] <span style="color: blue; font-weight: normal; font-style: normal;">if </span>
       haveSensor <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Sensor for output from CFD&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.CFDHeatGain"
>BaseClasses.CFDHeatGain</a> heaGai(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>AFlo=AFlo) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Model to convert internal heat gains&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean haveSensor =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Utilities.Strings.length</span>(sensorName[1]) &gt; 0 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Flag, true if the model has at least one sensor&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">final </span><span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Integer nSen(min=0) =<span style="color: red; font-weight: normal; font-style: normal;"> size</span>(sensorName, 1) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Number of sensors that are connected to CFD output&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</a> conSha[nConExtWin](<span style="color: blue; font-weight: normal; font-style: normal;">final </span>k=uSha_fixed) <span style="color: blue; font-weight: normal; font-style: normal;">if </span>
       haveShade <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Constant signal for shade&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(qGai_flow, heaGai.qGai_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heaGai.QRad_flow, add.u2);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.QCon_flow, heaGai.QCon_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.QLat_flow, heaGai.QLat_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.yCFD, yCFD);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conSha.y, conExtWin.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conSha.y, bouConExtWin.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conSha.y, conExtWinRad.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(irRadGai.uSha,conSha.y);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conSha.y, radTem.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(conSha.y, shaSig.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.uSha,conSha.y);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>CFD;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MixedAir<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.MixedAirI.png" alt="Buildings.Rooms.MixedAir" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.MixedAir"></a><a href="Buildings_Rooms.html#Buildings.Rooms"
>Buildings.Rooms</a>.MixedAir</h2>
<p>
<b>Model of a room in which the air is completely mixed</b>
<br>
<br><img src="Buildings.Rooms.MixedAirD.png" alt="Buildings.Rooms.MixedAir">
</p>
<h3>Information</h3>

<p>
Room model that assumes the air to be completely mixed.
</p>
<p>
See
<a href="Buildings_Rooms_UsersGuide.html#Buildings.Rooms.UsersGuide"
>Buildings.Rooms.UsersGuide</a>
for detailed explanations.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RoomHeatMassBalance"
>Buildings.Rooms.BaseClasses.RoomHeatMassBalance</a> (Base model for a room), <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a> (Declarations for lumped volumes).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.OpaqueSurface"
>OpaqueSurface</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Brick120</a></td><td>dummyCon</td><td>&nbsp;</td><td>Dummy construction to assign a parameter to the instance</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_GlazingSystems.html#Buildings.HeatTransfer.Data.GlazingSystems.SingleClear3"
>SingleClear3</a></td><td>dummyGlaSys</td><td>&nbsp;</td><td>Dummy construction to assign a parameter to the instance</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>lat</td><td>&nbsp;</td><td>Latitude [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>AFlo</td><td>&nbsp;</td><td>Floor area [m2]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hRoo</td><td>&nbsp;</td><td>Average room height [m]</td></tr>
<tr><td>Boolean</td><td>linearizeRadiation</td><td>true</td><td>Set to true to linearize emissive power</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Convective heat transfer</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.InteriorConvection"
>InteriorConvection</a></td><td>intConMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for room-facing surfaces of opaque constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hIntFixed</td><td>3.0</td><td>Constant convection coefficient for room-facing surfaces of opaque constructions [W/(m2.K)]</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.ExteriorConvection"
>ExteriorConvection</a></td><td>extConMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for exterior facing surfaces of opaque constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hExtFixed</td><td>10.0</td><td>Constant convection coefficient for exterior facing surfaces of opaque constructions [W/(m2.K)]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>V*1.2/3600</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td>Real</td><td>mSenFac</td><td>1</td><td>Factor for scaling the sensible thermal mass of the volume</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>VesselFluidPorts_b</a></td><td>ports[nPorts]</td><td>Fluid inlets and outlets</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heaPorAir</td><td>Heat port to air volume</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heaPorRad</td><td>Heat port for radiative heat gain and radiative temperature</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_conBou[nConBou]</td><td>Heat port at surface b of construction conBou</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_surBou[nSurBou]</td><td>Heat port of surface that is connected to the room air</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>qGai_flow[3]</td><td>Radiant, convective and latent heat input into room (positive if heat gain) [W/m2]</td></tr>
<tr><td><a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</a></td><td>weaBus</td><td>&nbsp;</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>uSha[nConExtWin]</td><td>Control signal for the shading device (removed if no shade is present)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MixedAir <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Model of a room in which the air is completely mixed&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RoomHeatMassBalance"
>Buildings.Rooms.BaseClasses.RoomHeatMassBalance</a>(
  <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.MixedAirHeatMassBalance"
>Buildings.Rooms.BaseClasses.MixedAirHeatMassBalance</a> air(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>energyDynamics=energyDynamics,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>massDynamics = massDynamics,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>p_start=p_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>T_start=T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>X_start=X_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>C_start=C_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>C_nominal=C_nominal,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal=m_flow_nominal,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>homotopyInitialization=homotopyInitialization,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>conMod=intConMod,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>hFixed=hIntFixed),
    datConExt(
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_a_start =         T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_b_start =         T_start),
    datConExtWin(
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_a_start =            T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_b_start =            T_start),
    datConBou(
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_a_start =         T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_b_start =         T_start),
    datConPar(
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_a_start =         T_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">each </span>T_b_start =         T_start));
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.MixedAirHeatGain"
>Buildings.Rooms.BaseClasses.MixedAirHeatGain</a> heaGai(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Rooms_BaseClasses_Medium.html#Buildings.Rooms.BaseClasses.RoomHeatMassBalance.Medium"
>Medium</a>, <span style="color: blue; font-weight: normal; font-style: normal;">final </span>AFlo=AFlo) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Model to convert internal heat gains&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha[nConExtWin](<span style="color: blue; font-weight: normal; font-style: normal;">each </span>min=0, <span style="color: blue; font-weight: normal; font-style: normal;">each </span>max=1) <span style="color: blue; font-weight: normal; font-style: normal;">if </span>
       haveShade <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Control signal for the shading device (removed if no shade is present)&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heaGai.qGai_flow, qGai_flow);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heaGai.QRad_flow, add.u2);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(heaGai.QLat_flow, air.QLat_flow);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.heaPorAir, heaGai.QCon_flow);

  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(uSha, conExtWin.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(uSha, bouConExtWin.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(uSha, conExtWinRad.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(irRadGai.uSha,uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(uSha, radTem.uSha);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(uSha, shaSig.u);
  <span style="color: red; font-weight: normal; font-style: normal;">connect</span>(air.uSha,uSha);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MixedAir;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:27:19 2015.
</address>
</body>
</html>
