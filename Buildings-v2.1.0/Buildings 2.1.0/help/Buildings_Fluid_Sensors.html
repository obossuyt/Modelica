<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.Sensors</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with sensor models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- begin header -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- end header -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Sensors<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.Sensors"></a><a href="Buildings_Fluid.html#Buildings.Fluid"
>Buildings.Fluid</a>.Sensors</h2>
<p>
<b>Package with sensor models</b><br>
</p>
<h3>Information</h3>

<p>
Package <code>Sensors</code> consists of idealized sensor components that
provide variables of a medium as
output signals. These signals can be, e.g., further processed
with components of the
<a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks.html#Modelica.Blocks"
>
Modelica.Blocks</a>
library.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_SensorsPackage.html#Modelica.Icons.SensorsPackage"
>Modelica.Icons.SensorsPackage</a> (Icon for packages containing sensors).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.UsersGuideS.png" alt="Buildings.Fluid.Sensors.UsersGuide" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>UsersGuide</a>
</td>
<td>User&#39;s Guide</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.DensityS.png" alt="Buildings.Fluid.Sensors.Density" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.Density"
>Density</a>
</td>
<td>Ideal one port density sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.DensityTwoPortS.png" alt="Buildings.Fluid.Sensors.DensityTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.DensityTwoPort"
>DensityTwoPort</a>
</td>
<td>Ideal two port density sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.EnthalpyFlowRateS.png" alt="Buildings.Fluid.Sensors.EnthalpyFlowRate" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.EnthalpyFlowRate"
>EnthalpyFlowRate</a>
</td>
<td>Ideal enthalphy flow rate sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Lbffc65370a9de5eawRateS.png" alt="Buildings.Fluid.Sensors.LatentEnthalpyFlowRate" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.LatentEnthalpyFlowRate"
>LatentEnthalpyFlowRate</a>
</td>
<td>Ideal enthalphy flow rate sensor that outputs the latent enthalpy flow rate only</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.MassFlowRateS.png" alt="Buildings.Fluid.Sensors.MassFlowRate" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFlowRate"
>MassFlowRate</a>
</td>
<td>Ideal sensor for mass flow rate</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.MassFractionS.png" alt="Buildings.Fluid.Sensors.MassFraction" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFraction"
>MassFraction</a>
</td>
<td>Ideal one port mass fraction sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Md81f541b809781a9oPortS.png" alt="Buildings.Fluid.Sensors.MassFractionTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFractionTwoPort"
>MassFractionTwoPort</a>
</td>
<td>Ideal two port mass fraction sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.PressureS.png" alt="Buildings.Fluid.Sensors.Pressure" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.Pressure"
>Pressure</a>
</td>
<td>Ideal pressure sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.RelativeHumidityS.png" alt="Buildings.Fluid.Sensors.RelativeHumidity" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.RelativeHumidity"
>RelativeHumidity</a>
</td>
<td>Ideal one port relative humidity sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Rd67ba12a3932b7cboPortS.png" alt="Buildings.Fluid.Sensors.RelativeHumidityTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.RelativeHumidityTwoPort"
>RelativeHumidityTwoPort</a>
</td>
<td>Ideal two port relative humidity sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.RelativePressureS.png" alt="Buildings.Fluid.Sensors.RelativePressure" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.RelativePressure"
>RelativePressure</a>
</td>
<td>Ideal relative pressure sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Ra57f73acc57bf7f3atureS.png" alt="Buildings.Fluid.Sensors.RelativeTemperature" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.RelativeTemperature"
>RelativeTemperature</a>
</td>
<td>Ideal relative temperature sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Sd8c0214459fbde48wRateS.png" alt="Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate"
>SensibleEnthalpyFlowRate</a>
</td>
<td>Ideal enthalphy flow rate sensor that outputs the sensible enthalpy flow rate only</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.SpecificEnthalpyS.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpy" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SpecificEnthalpy"
>SpecificEnthalpy</a>
</td>
<td>Ideal one port specific enthalpy sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.S0953a63adc594a2doPortS.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpyTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SpecificEnthalpyTwoPort"
>SpecificEnthalpyTwoPort</a>
</td>
<td>Ideal two port sensor for the specific enthalpy</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.SpecificEntropyS.png" alt="Buildings.Fluid.Sensors.SpecificEntropy" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SpecificEntropy"
>SpecificEntropy</a>
</td>
<td>Ideal one port specific entropy sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.S08db80dec91469f7oPortS.png" alt="Buildings.Fluid.Sensors.SpecificEntropyTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SpecificEntropyTwoPort"
>SpecificEntropyTwoPort</a>
</td>
<td>Ideal two port sensor for the specific entropy</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.TemperatureS.png" alt="Buildings.Fluid.Sensors.Temperature" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.Temperature"
>Temperature</a>
</td>
<td>Ideal one port temperature sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.T8e9fdae128e70870oPortS.png" alt="Buildings.Fluid.Sensors.TemperatureTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureTwoPort"
>TemperatureTwoPort</a>
</td>
<td>Ideal two port temperature sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.Tf9e5d48a814aaf17oPortS.png" alt="Buildings.Fluid.Sensors.TemperatureWetBulbTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureWetBulbTwoPort"
>TemperatureWetBulbTwoPort</a>
</td>
<td>Ideal wet bulb temperature sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.TraceSubstancesS.png" alt="Buildings.Fluid.Sensors.TraceSubstances" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TraceSubstances"
>TraceSubstances</a>
</td>
<td>Ideal one port trace substances sensor</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.T08b0a06d625012a8oPortS.png" alt="Buildings.Fluid.Sensors.TraceSubstancesTwoPort" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TraceSubstancesTwoPort"
>TraceSubstancesTwoPort</a>
</td>
<td>Ideal two port sensor for trace substance</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.VolumeFlowRateS.png" alt="Buildings.Fluid.Sensors.VolumeFlowRate" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.VolumeFlowRate"
>VolumeFlowRate</a>
</td>
<td>Ideal sensor for volume flow rate</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.ConversionsS.png" alt="Buildings.Fluid.Sensors.Conversions" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors_Conversions.html#Buildings.Fluid.Sensors.Conversions"
>Conversions</a>
</td>
<td>Package with conversions for sensor models</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.ExamplesS.png" alt="Buildings.Fluid.Sensors.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors_Examples.html#Buildings.Fluid.Sensors.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.Sensors.BaseClassesS.png" alt="Buildings.Fluid.Sensors.BaseClasses" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses"
>BaseClasses</a>
</td>
<td>Package with base classes for Buildings.Fluid.Sensors</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Density<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.DensityI.png" alt="Buildings.Fluid.Sensors.Density" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.Density"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.Density</h2>
<p>
<b>Ideal one port density sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.DensityD.png" alt="Buildings.Fluid.Sensors.Density">
</p>
<h3>Information</h3>

<p>
This model outputs the density of the fluid connected to its port.
The sensor is ideal, i.e. it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>d</td><td>Density in port medium [kg/m3]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Density <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port density sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> d(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;Density&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;kg/m3&quot;,
                                          min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Density in port medium&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  d =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(
       state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
         p=port.p,
         h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.h_outflow),
         X=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.Xi_outflow)));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Density;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DensityTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.DensityTwoPortI.png" alt="Buildings.Fluid.Sensors.DensityTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.DensityTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.DensityTwoPort</h2>
<p>
<b>Ideal two port density sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.DensityTwoPortD.png" alt="Buildings.Fluid.Sensors.DensityTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the density of the fluid flowing from
<code>port_a</code> to <code>port_b</code>.
</p>
<p>
The sensor is ideal, i.e., it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Density</a></td><td>d_start</td><td>Medium.density(state=Medium....</td><td>Initial or guess value of output (=state) [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Temperature used to compute d_start [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Pressure used to compute d_start [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Mass fraction used to compute d_start [1]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>d</td><td>Density of the passing fluid [kg/m3]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> DensityTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal two port density sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> d(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;Density&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;kg/m3&quot;,
                                          min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Density of the passing fluid&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d_start=
     <span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(
       p=p_start, T=T_start, X=X_start)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (=state)&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_start=Medium.T_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature used to compute d_start&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> p_start=Medium.p_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure used to compute d_start&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> X_start[Medium.nX]=Medium.X_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction used to compute d_start&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> dMed(start=d_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium density to which the sensor is exposed&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d_a_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Density of inflowing fluid at port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d_b_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Density of inflowing fluid at port_b, or rho_a_inflow if uni-directional flow&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(d) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      d = d_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     d_a_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(
       state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     d_b_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(
       state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=port_a.h_outflow, X=port_a.Xi_outflow));
     dMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
       x=port_a.m_flow, y1=d_a_inflow, y2=d_b_inflow, x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     dMed =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(
       state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     d_a_inflow = dMed;
     d_b_inflow = dMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(d) = (dMed-d)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    d = dMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>DensityTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE EnthalpyFlowRate<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.EnthalpyFlowRateI.png" alt="Buildings.Fluid.Sensors.EnthalpyFlowRate" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.EnthalpyFlowRate"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.EnthalpyFlowRate</h2>
<p>
<b>Ideal enthalphy flow rate sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.EnthalpyFlowRateD.png" alt="Buildings.Fluid.Sensors.EnthalpyFlowRate">
</p>
<h3>Information</h3>

<p>
This model outputs the enthalphy flow rate of the medium in the flow
between fluid ports. The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
If the parameter <code>tau</code> is non-zero, then the measured
specific enthalpy <i>h<sub>out</sub></i> that is used to
compute the enthalpy flow rate
<i>H&#775; = m&#775; h<sub>out</sub></i>
is computed using a first order differential equation.
See <a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>
<p>
For a sensor that measures the latent enthalpy flow rate, use
<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.LatentEnthalpyFlowRate"
>
Buildings.Fluid.Sensors.LatentEnthalpyFlowRate</a>.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_out_start</td><td>Medium.specificEnthalpy_pTX(...</td><td>Initial or guess value of measured specific enthalpy [J/kg]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>H_flow</td><td>Enthalpy flow rate, positive if from port_a to port_b [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> EnthalpyFlowRate <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal enthalphy flow rate sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> H_flow(unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Enthalpy flow rate, positive if from port_a to port_b&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out_start=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificEnthalpy_pTX</span>(
      p=Medium.p_default,
      T=Medium.T_default,
      X=Medium.X_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of measured specific enthalpy&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMed_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium enthalpy to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium enthalpy that is used to compute the enthalpy flow rate&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      h_out = h_out_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    hMed_out =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                 x=port_a.m_flow,
                 y1=port_b.h_outflow,
                 y2=port_a.h_outflow,
                 x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    hMed_out = port_b.h_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Specific enthalpy measured by sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = (hMed_out-h_out)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    h_out = hMed_out;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Sensor output signal</span>
  H_flow = port_a.m_flow * h_out;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>EnthalpyFlowRate;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE LatentEnthalpyFlowRate<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Lbffc65370a9de5eawRateI.png" alt="Buildings.Fluid.Sensors.LatentEnthalpyFlowRate" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.LatentEnthalpyFlowRate"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.LatentEnthalpyFlowRate</h2>
<p>
<b>Ideal enthalphy flow rate sensor that outputs the latent enthalpy flow rate only</b>
<br>
<br><img src="Buildings.Fluid.Sensors.EnthalpyFlowRateD.png" alt="Buildings.Fluid.Sensors.LatentEnthalpyFlowRate">
</p>
<h3>Information</h3>

<p>
This model outputs the <i>latent</i> enthalphy flow rate of the medium in the flow
between its fluid ports. In particular, if the total enthalpy flow rate is
</p>
<p align="center" style="font-style:italic;">
  H&#775;<sub>tot</sub> = H&#775;<sub>sen</sub> + H&#775;<sub>lat</sub>,
</p>
<p>
where
<i>H&#775;<sub>sen</sub> = m&#775; (1-X<sub>w</sub>) c<sub>p,air</sub></i>,
then this sensor outputs <i>H&#775; = H&#775;<sub>lat</sub></i>.
</p>
<p>
If the parameter <code>tau</code> is non-zero, then the measured
specific latent enthalpy <i>h<sub>out</sub></i> that is used to
compute the latent enthalpy flow rate
<i>H&#775;<sub>lat</sub> = m&#775; h<sub>out</sub></i>
is computed using a first order differential equation.
See <a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>
<p>
For a sensor that measures
<i>H&#775;<sub>tot</sub></i>, use
<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.EnthalpyFlowRate"
>
Buildings.Fluid.Sensors.EnthalpyFlowRate</a>.<br/>
For a sensor that measures
<i>H&#775;<sub>sen</sub></i>, use
<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate"
>
Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate</a>.
</p>
<p>
The sensor is ideal, i.e., it does not influence the fluid.
The sensor can only be used with medium models that implement the function
<code>enthalpyOfNonCondensingGas(T)</code>.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a> (Computes the index of a substance in the mass fraction vector Xi), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;water&quot;</td><td>Name of species substance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_out_start</td><td>Medium.specificEnthalpy_pTX(...</td><td>Initial or guess value of measured specific latent enthalpy [J/kg]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>H_flow</td><td>Latent enthalpy flow rate, positive if from port_a to port_b [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> LatentEnthalpyFlowRate <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal enthalphy flow rate sensor that outputs the latent enthalpy flow rate only&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a>);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a>(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>substanceName=&quot;water&quot;);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> H_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Latent enthalpy flow rate, positive if from port_a to port_b&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out_start=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificEnthalpy_pTX</span>(
      p=Medium.p_default, T=Medium.T_default, X=Medium.X_default)
    -<span style="color: red; font-weight: normal; font-style: normal;">Medium.enthalpyOfNonCondensingGas</span>(T=Medium.T_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of measured specific latent enthalpy&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMed_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium latent enthalpy to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium latent enthalpy that is used to compute the enthalpy flow rate&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> XiActual[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium mass fraction to which sensor is exposed to&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.SpecificEnthalpy"
>Medium.SpecificEnthalpy</a> hActual <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium enthalpy to which sensor is exposed to&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
 <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute initial state</span>
 <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      h_out = h_out_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
 <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     XiActual =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                 x=port_a.m_flow,
                 y1=port_b.Xi_outflow,
                 y2=port_a.Xi_outflow,
                 x_small=m_flow_small);
     hActual =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                 x=port_a.m_flow,
                 y1=port_b.h_outflow,
                 y2=port_a.h_outflow,
                 x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     XiActual = port_b.Xi_outflow;
     hActual = port_b.h_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Specific enthalpy measured by sensor.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute H_flow as difference between total enthalpy and enthalpy on non-condensing gas.</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// This is needed to compute the liquid vs. gas fraction of water, using the equations</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// provided by the medium model</span>
  hMed_out = (hActual -
     (1-XiActual[i_x]) *<span style="color: red; font-weight: normal; font-style: normal;"> Medium.enthalpyOfNonCondensingGas</span>(
       T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=hActual, X=XiActual))));
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = (hMed_out-h_out)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    h_out = hMed_out;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Sensor output signal</span>
  H_flow = port_a.m_flow * h_out;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>LatentEnthalpyFlowRate;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MassFlowRate<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.MassFlowRateI.png" alt="Buildings.Fluid.Sensors.MassFlowRate" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.MassFlowRate"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.MassFlowRate</h2>
<p>
<b>Ideal sensor for mass flow rate</b>
<br>
<br><img src="Buildings.Fluid.Sensors.MassFlowRateD.png" alt="Buildings.Fluid.Sensors.MassFlowRate">
</p>
<h3>Information</h3>

<p>
This model outputs the mass flow rate flowing from
<code>port_a</code> to <code>port_b</code>.
The sensor is ideal, i.e., it does not influence the fluid.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialFlowSensor</a> (Partial component to model sensors that measure flow properties), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>0</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>0</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>m_flow</td><td>Mass flow rate from port_a to port_b [kg/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MassFlowRate <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal sensor for mass flow rate&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialFlowSensor</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_nominal = 0,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>m_flow_small = 0);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> m_flow(quantity=&quot;MassFlowRate&quot;,
                                               <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;kg/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass flow rate from port_a to port_b&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  m_flow = port_a.m_flow;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MassFlowRate;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MassFraction<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.MassFractionI.png" alt="Buildings.Fluid.Sensors.MassFraction" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.MassFraction"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.MassFraction</h2>
<p>
<b>Ideal one port mass fraction sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.MassFractionD.png" alt="Buildings.Fluid.Sensors.MassFraction">
</p>
<h3>Information</h3>

<p>
This model outputs the mass fraction of the fluid connected to its port.
The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a> (Computes the index of a substance in the mass fraction vector Xi), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;water&quot;</td><td>Name of species substance</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the sensor</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>X</td><td>Mass fraction in port [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MassFraction <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port mass fraction sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a>);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a>(substanceName = &quot;water&quot;);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> X(min=-1e-3,
                                          max=1.001,
                                          unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass fraction in port&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> XiVec[Medium.nXi](
      quantity=Medium.extraPropertiesNames) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction vector, needed because indexed argument for the operator inStream is not supported&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  XiVec =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port.Xi_outflow);
  X = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>i_x &gt; Medium.nXi<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>(1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>(XiVec))<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>XiVec[i_x];
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MassFraction;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MassFractionTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Md81f541b809781a9oPortI.png" alt="Buildings.Fluid.Sensors.MassFractionTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.MassFractionTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.MassFractionTwoPort</h2>
<p>
<b>Ideal two port mass fraction sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.Md81f541b809781a9oPortD.png" alt="Buildings.Fluid.Sensors.MassFractionTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the mass fraction of the passing fluid.
The sensor is ideal, i.e. it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a> (Computes the index of a substance in the mass fraction vector Xi), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;water&quot;</td><td>Name of species substance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start</td><td>Medium.X_default[i_x]</td><td>Initial or guess value of output (= state) [kg/kg]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>X</td><td>Mass fraction of the passing fluid [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> MassFractionTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal two port mass fraction sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a>);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a>(substanceName = &quot;water&quot;);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> X_start=Medium.X_default[i_x] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> X(min=-1e-3,
                                          max=1.001,
                                          start=X_start,
                                          unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction of the passing fluid&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> XMed(start=X_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> XiVec[Medium.nXi](
      quantity=Medium.extraPropertiesNames) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Trace substances vector, needed because indexed argument for the operator inStream is not supported&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Assign initial conditions</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(X) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      X = X_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    XiVec =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
              x=port_a.m_flow,
              y1=port_b.Xi_outflow,
              y2=port_a.Xi_outflow,
              x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    XiVec = port_b.Xi_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  XMed = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>i_x &gt; Medium.nXi<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>(1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>(XiVec))<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>XiVec[i_x];
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(X)  = (XMed-X)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    X = XMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>MassFractionTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Pressure<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.PressureI.png" alt="Buildings.Fluid.Sensors.Pressure" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.Pressure"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.Pressure</h2>
<p>
<b>Ideal pressure sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.PressureD.png" alt="Buildings.Fluid.Sensors.Pressure">
</p>
<h3>Information</h3>

<p>
This model outputs the absolute pressure of the fluid connected to its port.
The sensor is ideal, i.e., it does not influence the fluid.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>p</td><td>Pressure at port [Pa]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Pressure <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal pressure sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> p(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;Pressure&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;Pa&quot;,
                                          min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Pressure at port&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  p = port.p;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Pressure;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RelativeHumidity<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.RelativeHumidityI.png" alt="Buildings.Fluid.Sensors.RelativeHumidity" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.RelativeHumidity"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.RelativeHumidity</h2>
<p>
<b>Ideal one port relative humidity sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.RelativeHumidityD.png" alt="Buildings.Fluid.Sensors.RelativeHumidity">
</p>
<h3>Information</h3>

<p>
This model outputs the relative humidity of the fluid connected to its port.
The sensor is ideal, i.e. it does not influence the fluid.
</p>
<p>
Note that this sensor can only be used with media that contain the variable <code>phi</code>,
which is typically the case for moist air models.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>phi</td><td>Relative humidity in port medium [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> RelativeHumidity <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port relative humidity sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> phi(unit=&quot;1&quot;, min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative humidity in port medium&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Temperature of the medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> Xi[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Mass fraction of the medium&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  Xi =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port.Xi_outflow);
  T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature_phX</span>(
      p=port.p,
      h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.h_outflow),
      X=Xi);

  phi =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.phi_pTX</span>(
    p=port.p,
    T=T,
    X_w=Xi[1]);

<span style="color: blue; font-weight: normal; font-style: normal;">end </span>RelativeHumidity;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RelativeHumidityTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Rd67ba12a3932b7cboPortI.png" alt="Buildings.Fluid.Sensors.RelativeHumidityTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.RelativeHumidityTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.RelativeHumidityTwoPort</h2>
<p>
<b>Ideal two port relative humidity sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.Rd67ba12a3932b7cboPortD.png" alt="Buildings.Fluid.Sensors.RelativeHumidityTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the relative humidity of the fluid flowing from
<code>port_a</code> to <code>port_b</code>.
The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
Note that this sensor can only be used with media that contain the variable <code>phi</code>,
which is typically the case for moist air models.
</p>
<p>
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td>Real</td><td>phi_start</td><td>0.5</td><td>Initial or guess value of output (= state) [1]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>phi</td><td>Relative humidity of the passing fluid [1]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> RelativeHumidityTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal two port relative humidity sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> phi(unit=&quot;1&quot;,
                                            min=0,
                                            start=phi_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative humidity of the passing fluid&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real phi_start(unit=&quot;1&quot;, min=0, max=1)=0.5 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real phiMed(unit=&quot;1&quot;, min=0, start=phi_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative humidity to which the sensor is exposed to&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_a <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of the medium flowing from port_a to port_b&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> Xi_a[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction of the medium flowing from port_a to port_b&quot;</span>;
  Real phi_a(unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative humidity of the medium flowing from port_a to port_b&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_b <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of the medium flowing from port_b to port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> Xi_b[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction of the medium flowing from port_b to port_a&quot;</span>;
  Real phi_b(unit=&quot;1&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative humidity of the medium flowing from port_b to port_a&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(phi) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      phi = phi_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Since the sensor does not affect the medium, we can use</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// port_b.Xi_outflow = inStream(port_a.Xi_outflow).</span>
  Xi_a = port_b.Xi_outflow;

  T_a=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature_phX</span>(
      p=port_a.p,
      h=port_b.h_outflow,
      X=Xi_a);

  phi_a =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.phi_pTX</span>(
    p=port_a.p,
    T=T_a,
    X_w=Xi_a[1]);

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    phi_b =<span style="color: red; font-weight: normal; font-style: normal;"> Buildings.Utilities.Psychrometrics.Functions.phi_pTX</span>(
      p=port_b.p,
      T=T_b,
      X_w=Xi_b[1]);
    T_b=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature_phX</span>(
      p=port_b.p,
      h=port_a.h_outflow,
      X=Xi_b);
    Xi_b = port_a.Xi_outflow;
    phiMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
               x=port_a.m_flow,
               y1=phi_a,
               y2=phi_b,
               x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    phi_b = 0;
    T_b = 273.15;
    Xi_b =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nXi);
    phiMed = phi_a;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(phi) = (phiMed-phi)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    phi = phiMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>RelativeHumidityTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RelativePressure<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.RelativePressureI.png" alt="Buildings.Fluid.Sensors.RelativePressure" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.RelativePressure"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.RelativePressure</h2>
<p>
<b>Ideal relative pressure sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.RelativePressureD.png" alt="Buildings.Fluid.Sensors.RelativePressure">
</p>
<h3>Information</h3>

<p>
The relative pressure <code>port_a.p - port_b.p</code> is determined between
the two ports of this component and is provided as output signal. The
sensor should be connected in parallel with other equipment, no flow
through the sensor is allowed.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.TranslationalSensor"
>Modelica.Icons.TranslationalSensor</a> (Icon representing a linear measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the sensor</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector of stream a</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector of stream b</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>p_rel</td><td>Relative pressure of port_a minus port_b [Pa]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> RelativePressure <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal relative pressure sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.TranslationalSensor"
>Modelica.Icons.TranslationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
    <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium in the sensor&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a(m_flow(min=0),
                                p(start=Medium.p_default),
                                <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_Sensors_Medium.html#Buildings.Fluid.Sensors.RelativePressure.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector of stream a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> port_b(m_flow(min=0),
                                p(start=Medium.p_default),
                                <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_Sensors_Medium.html#Buildings.Fluid.Sensors.RelativePressure.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector of stream b&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> p_rel(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;Pressure&quot;,
                                              <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;Pa&quot;,
                                              displayUnit=&quot;Pa&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Relative pressure of port_a minus port_b&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Zero flow equations for connectors</span>
  port_a.m_flow = 0;
  port_b.m_flow = 0;

  <span style="color: #006400; font-weight: normal; font-style: normal;">// No contribution of specific quantities</span>
  port_a.h_outflow = 0;
  port_b.h_outflow = 0;
  port_a.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nXi);
  port_b.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nXi);
  port_a.C_outflow  =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nC);
  port_b.C_outflow  =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nC);

  <span style="color: #006400; font-weight: normal; font-style: normal;">// Relative pressure</span>
  p_rel = port_a.p - port_b.p;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>RelativePressure;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RelativeTemperature<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Ra57f73acc57bf7f3atureI.png" alt="Buildings.Fluid.Sensors.RelativeTemperature" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.RelativeTemperature"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.RelativeTemperature</h2>
<p>
<b>Ideal relative temperature sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.Ra57f73acc57bf7f3atureD.png" alt="Buildings.Fluid.Sensors.RelativeTemperature">
</p>
<h3>Information</h3>

<p>
The relative temperature <code>T(port_a) - T(port_b)</code> is determined between
the two ports of this component and is provided as output signal. The
sensor should be connected in parallel with other equipment.
There is no flow through the sensor.
</p>
<p>
Note that this sensor should only be connected to fluid volumes, such as
<a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>
Buildings.Fluid.MixingVolumes.MixingVolume</a>. Otherwise, numerical
problems may occur if one of the mass flow rates are close to zero.
See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.TranslationalSensor"
>Modelica.Icons.TranslationalSensor</a> (Icon representing a linear measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the sensor</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector of stream a</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector of stream b</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>T_rel</td><td>Temperature difference of port_a minus port_b [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> RelativeTemperature <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal relative temperature sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.TranslationalSensor"
>Modelica.Icons.TranslationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
    <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Medium in the sensor&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a(m_flow(min=0),
                                p(start=Medium.p_default),
                                <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_Sensors_Medium.html#Buildings.Fluid.Sensors.RelativeTemperature.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector of stream a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> port_b(m_flow(min=0),
                                p(start=Medium.p_default),
                                <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_Sensors_Medium.html#Buildings.Fluid.Sensors.RelativeTemperature.Medium"
>Medium</a>) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fluid connector of stream b&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> T_rel(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;K&quot;,
                                              displayUnit = &quot;K&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature difference of port_a minus port_b&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Zero flow equations for connectors</span>
  port_a.m_flow = 0;
  port_b.m_flow = 0;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// No contribution of specific quantities</span>
  port_a.h_outflow = 0;
  port_b.h_outflow = 0;
  port_a.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nXi);
  port_b.Xi_outflow =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nXi);
  port_a.C_outflow  =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nC);
  port_b.C_outflow  =<span style="color: red; font-weight: normal; font-style: normal;"> zeros</span>(Medium.nC);
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Relative temperature</span>
  T_rel =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
            p=port_a.p, h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port_a.h_outflow), X=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port_a.Xi_outflow))) -
          <span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
            p=port_b.p, h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port_b.h_outflow), X=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port_b.Xi_outflow)));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>RelativeTemperature;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SensibleEnthalpyFlowRate<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Sd8c0214459fbde48wRateI.png" alt="Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.SensibleEnthalpyFlowRate</h2>
<p>
<b>Ideal enthalphy flow rate sensor that outputs the sensible enthalpy flow rate only</b>
<br>
<br><img src="Buildings.Fluid.Sensors.Sd8c0214459fbde48wRateD.png" alt="Buildings.Fluid.Sensors.SensibleEnthalpyFlowRate">
</p>
<h3>Information</h3>

<p>
This model outputs the <i>sensible</i> enthalphy flow rate of the medium in the flow
between its fluid ports. In particular, if the total enthalpy flow rate is
</p>
<p align="center" style="font-style:italic;">
  H&#775;<sub>tot</sub> = H&#775;<sub>sen</sub> + H&#775;<sub>lat</sub>,
</p>
<p>
where
<i>H&#775;<sub>sen</sub> = m&#775; (1-X<sub>w</sub>) c<sub>p,air</sub></i>,
then this sensor outputs <i>H&#775; = H&#775;<sub>sen</sub></i>.
</p>

<p>
If the parameter <code>tau</code> is non-zero, then the measured
specific sensible enthalpy <i>h<sub>out</sub></i> that is used to
compute the sensible enthalpy flow rate
<i>H&#775;<sub>sen</sub> = m&#775; h<sub>out</sub></i>
is computed using a first order differential equation.
See <a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>
For a sensor that measures
<i>H&#775;<sub>tot</sub></i>, use
<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.EnthalpyFlowRate"
>
Buildings.Fluid.Sensors.EnthalpyFlowRate</a>.<br/>
For a sensor that measures
<i>H&#775;<sub>lat</sub></i>, use
<a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.LatentEnthalpyFlowRate"
>
Buildings.Fluid.Sensors.LatentEnthalpyFlowRate</a>.
</p>

<p>
The sensor is ideal, i.e., it does not influence the fluid.
The sensor can only be used with medium models that implement the function
<code>enthalpyOfNonCondensingGas(T)</code>.</p>


<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a> (Computes the index of a substance in the mass fraction vector Xi), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;water&quot;</td><td>Name of species substance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_out_start</td><td>Medium.enthalpyOfNonCondensi...</td><td>Initial or guess value of measured specific sensible enthalpy [J/kg]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>H_flow</td><td>Sensible enthalpy flow rate, positive if from port_a to port_b [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SensibleEnthalpyFlowRate <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal enthalphy flow rate sensor that outputs the sensible enthalpy flow rate only&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">replaceable </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium =
        <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</a>);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexMassFraction"
>Buildings.Fluid.BaseClasses.IndexMassFraction</a>(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>substanceName=&quot;water&quot;);
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> H_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;W&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Sensible enthalpy flow rate, positive if from port_a to port_b&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out_start=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.enthalpyOfNonCondensingGas</span>(T=Medium.T_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of measured specific sensible enthalpy&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMed_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium sensible enthalpy to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium sensible enthalpy that is used to compute the enthalpy flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> XiActual[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium mass fraction to which sensor is exposed to&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.SpecificEnthalpy"
>Medium.SpecificEnthalpy</a> hActual <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium enthalpy to which sensor is exposed to&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
 <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute initial state</span>
 <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      h_out = h_out_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     XiActual =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                  x=port_a.m_flow,
                  y1=port_b.Xi_outflow,
                  y2=port_a.Xi_outflow,
                  x_small=m_flow_small);
     hActual =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                 x=port_a.m_flow,
                 y1=port_b.h_outflow,
                 y2=port_a.h_outflow,
                 x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     XiActual = port_b.Xi_outflow;
     hActual = port_b.h_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Specific enthalpy measured by sensor</span>
  hMed_out = (1-XiActual[i_x]) *<span style="color: red; font-weight: normal; font-style: normal;"> Medium.enthalpyOfNonCondensingGas</span>(
      T=<span style="color: red; font-weight: normal; font-style: normal;">Medium.temperature</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=hActual, X=XiActual)));
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = (hMed_out-h_out)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    h_out = hMed_out;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Sensor output signal</span>
  H_flow = port_a.m_flow * h_out;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SensibleEnthalpyFlowRate;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpecificEnthalpy<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.SpecificEnthalpyI.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpy" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.SpecificEnthalpy"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.SpecificEnthalpy</h2>
<p>
<b>Ideal one port specific enthalpy sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.SpecificEnthalpyD.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpy">
</p>
<h3>Information</h3>

<p>
This model outputs the specific enthalpy of the fluid connected to its port.
The sensor is ideal, i.e. it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>h_out</td><td>Specific enthalpy in port medium [J/kg]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SpecificEnthalpy <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port specific enthalpy sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> h_out(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;SpecificEnergy&quot;,
                                              <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;J/kg&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific enthalpy in port medium&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  h_out =<span style="color: red; font-weight: normal; font-style: normal;"> inStream</span>(port.h_outflow);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpecificEnthalpy;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpecificEnthalpyTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.S0953a63adc594a2doPortI.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpyTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.SpecificEnthalpyTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.SpecificEnthalpyTwoPort</h2>
<p>
<b>Ideal two port sensor for the specific enthalpy</b>
<br>
<br><img src="Buildings.Fluid.Sensors.S0953a63adc594a2doPortD.png" alt="Buildings.Fluid.Sensors.SpecificEnthalpyTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the specific enthalpy of a passing fluid.
The sensor is ideal, i.e. it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_out_start</td><td>Medium.specificEnthalpy_pTX(...</td><td>Initial or guess value of output (= state) [J/kg]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>h_out</td><td>Specific enthalpy of the passing fluid [J/kg]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SpecificEnthalpyTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal two port sensor for the specific enthalpy&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h_out_start=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificEnthalpy_pTX</span>(p=Medium.p_default, T=Medium.T_default, X=Medium.X_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> h_out(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;SpecificEnergy&quot;,
                                              <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;J/kg&quot;,
                                              start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific enthalpy of the passing fluid&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> hMed_out(start=h_out_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium enthalpy to which the sensor is exposed&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      h_out = h_out_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    hMed_out =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
                 x=port_a.m_flow,
                 y1=port_b.h_outflow,
                 y2=port_a.h_outflow,
                 x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    hMed_out = port_b.h_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(h_out) = (hMed_out-h_out)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    h_out = hMed_out;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpecificEnthalpyTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpecificEntropy<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.SpecificEntropyI.png" alt="Buildings.Fluid.Sensors.SpecificEntropy" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.SpecificEntropy"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.SpecificEntropy</h2>
<p>
<b>Ideal one port specific entropy sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.SpecificEntropyD.png" alt="Buildings.Fluid.Sensors.SpecificEntropy">
</p>
<h3>Information</h3>

<p>
This model outputs the specific entropy of the fluid connected to its port.
The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>s</td><td>Specific entropy in port medium [J/(kg.K)]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SpecificEntropy <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port specific entropy sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> s(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;SpecificEntropy&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;J/(kg.K)&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific entropy in port medium&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  s =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEntropy</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
          p=port.p, h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.h_outflow), X=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.Xi_outflow)));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpecificEntropy;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SpecificEntropyTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.S08db80dec91469f7oPortI.png" alt="Buildings.Fluid.Sensors.SpecificEntropyTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.SpecificEntropyTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.SpecificEntropyTwoPort</h2>
<p>
<b>Ideal two port sensor for the specific entropy</b>
<br>
<br><img src="Buildings.Fluid.Sensors.S08db80dec91469f7oPortD.png" alt="Buildings.Fluid.Sensors.SpecificEntropyTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the specific entropy of the passing fluid.
The sensor is ideal, i.e., it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</a></td><td>s_start</td><td>Medium.specificEntropy_pTX(p...</td><td>Initial or guess value of output (= state) [J/(kg.K)]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>s</td><td>Specific entropy of the passing fluid [J/(kg.K)]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> SpecificEntropyTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal two port sensor for the specific entropy&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>Modelica.SIunits.SpecificEntropy</a> s_start=
    <span style="color: red; font-weight: normal; font-style: normal;">Medium.specificEntropy_pTX</span>(p=Medium.p_default, T=Medium.T_default, X=Medium.X_default) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> s(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;SpecificEntropy&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;J/(kg.K)&quot;,
                                          start=s_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific entropy of the passing fluid&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>Modelica.SIunits.SpecificEntropy</a> sMed(start=s_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium entropy to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.SpecificEntropy"
>Medium.SpecificEntropy</a> s_a_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific entropy of inflowing fluid at port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.SpecificEntropy"
>Medium.SpecificEntropy</a> s_b_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Specific entropy of inflowing fluid at port_b, or s_a_inflow if uni-directional flow&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(s) = 0;
    <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      s = s_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     s_a_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEntropy</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     s_b_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEntropy</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=port_a.h_outflow, X=port_a.Xi_outflow));
     sMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
           x=port_a.m_flow,
           y1=s_a_inflow,
           y2=s_b_inflow,
           x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     sMed =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.specificEntropy</span>(state=
           <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     s_a_inflow = sMed;
     s_b_inflow = sMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(s) = (sMed-s)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    s = sMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>SpecificEntropyTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Temperature<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.TemperatureI.png" alt="Buildings.Fluid.Sensors.Temperature" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.Temperature"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.Temperature</h2>
<p>
<b>Ideal one port temperature sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.TemperatureD.png" alt="Buildings.Fluid.Sensors.Temperature">
</p>
<h3>Information</h3>

<p>
This model outputs the temperature of the fluid connected to its port.
The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>T</td><td>Temperature in port medium [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> Temperature <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port temperature sensor&quot;</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> T(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;K&quot;,
                                          min=0,
                                          displayUnit = &quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature in port medium&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  T =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
        p=port.p, h=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.h_outflow), X=<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.Xi_outflow)));
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>Temperature;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TemperatureTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.T8e9fdae128e70870oPortI.png" alt="Buildings.Fluid.Sensors.TemperatureTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.TemperatureTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.TemperatureTwoPort</h2>
<p>
<b>Ideal two port temperature sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.T8e9fdae128e70870oPortD.png" alt="Buildings.Fluid.Sensors.TemperatureTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the temperature of the medium in the flow
between its fluid ports. The sensor does not influence the fluid.
</p>
<h4>Typical use and important parameters</h4>
<p>
If the parameter <code>tau</code> is non-zero, then its output <i>T</i>
converges to the temperature of the incoming fluid using
a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>
<p>
If <code>transferHeat = true</code>, then heat transfer with the ambient is 
approximated and <i>T</i> converges towards the fixed ambient
temperature <i>T<sub>Amb</sub></i> using a first order approximation
with a time constant of <code>tauHeaTra</code>.
Note that no energy is exchanged with the fluid as the
sensor does not influence the fluid temperature.
</p>
<p>
Setting <code>transferHeat = true</code> is useful, for example,
if the sensor is used to measure the fluid temperature in
a system with on/off control on the mass flow rate.
If <code>transferHeat</code> were <code>false</code>, then the sensor output <i>T</i>
would remain constant if the mass flow rate is set to zero, and hence
the controller may never switch the mass flow rate on again.
</p>
<p>
In general, applications in which the sensor output is not used to switch
the mass flow rate on should set <code>transferHeat=false</code>.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Initial or guess value of output (= state) [K]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Heat transfer</td></tr>
<tr><td>Boolean</td><td>transferHeat</td><td>false</td><td>if true, temperature T converges towards TAmb when no flow</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TAmb</td><td>Medium.T_default</td><td>Fixed ambient temperature for heat transfer [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tauHeaTra</td><td>1200</td><td>Time constant for heat transfer, default 20 minutes [s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>T</td><td>Temperature of the passing fluid [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> TemperatureTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal two port temperature sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> T(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                          <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;K&quot;,
                                          displayUnit = &quot;degC&quot;,
                                          min = 0,
                                          start=T_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of the passing fluid&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_start=Medium.T_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;

  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Boolean transferHeat = false <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;if true, temperature T converges towards TAmb when no flow&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TAmb=Medium.T_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Fixed ambient temperature for heat transfer&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tauHeaTra(min=1)=1200 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Time constant for heat transfer, default 20 minutes&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real tauHeaTraInv(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;1/s&quot;)=
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>tauHeaTra&lt;1E-10<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>1/tauHeaTra <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Dummy parameter to avoid division by tauLoss&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real tauInv(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit = &quot;1/s&quot;) = <span style="color: blue; font-weight: normal; font-style: normal;">if </span>tau&lt;1E-10<span style="color: blue; font-weight: normal; font-style: normal;"> then </span>0<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>1/tau <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Dummy parameter to avoid division by tau&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Medium.Temperature</a> TMed(start=T_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium temperature to which the sensor is exposed&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Medium.Temperature</a> T_a_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Temperature of inflowing fluid at port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Medium.Temperature</a> T_b_inflow <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature of inflowing fluid at port_b, or T_a_inflow if uni-directional flow&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(T) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      T = T_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     T_a_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     T_b_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=port_a.h_outflow, X=port_a.Xi_outflow));
     TMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
              x=port_a.m_flow,
              y1=T_a_inflow,
              y2=T_b_inflow,
              x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     TMed =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature</span>(state=
              <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     T_a_inflow = TMed;
     T_b_inflow = TMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>transferHeat<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(T) = (TMed-T)*k*tauInv + (TAmb-T)*tauHeaTraInv;
    <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(T) = (TMed-T)*k*tauInv;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    T = TMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>TemperatureTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TemperatureWetBulbTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.Tf9e5d48a814aaf17oPortI.png" alt="Buildings.Fluid.Sensors.TemperatureWetBulbTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.TemperatureWetBulbTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.TemperatureWetBulbTwoPort</h2>
<p>
<b>Ideal wet bulb temperature sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.Tf9e5d48a814aaf17oPortD.png" alt="Buildings.Fluid.Sensors.TemperatureWetBulbTwoPort">
</p>
<h3>Information</h3>

<p>
This sensor outputs the wet bulb temperature of the medium in the flow
between its fluid ports. The sensor is ideal, i.e., it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TWetBul_start</td><td>Medium.T_default</td><td>Initial or guess value of wet bulb temperature (used to compute initial output signal)) [K]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>T</td><td>Wet bulb temperature in port medium [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> TemperatureWetBulbTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal wet bulb temperature sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> T(
    start=TWetBul_start,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
    <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;K&quot;,
    displayUnit = &quot;degC&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Wet bulb temperature in port medium&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TWetBul_start = Medium.T_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of wet bulb temperature (used to compute initial output signal))&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Medium.Temperature</a> TMedWetBul(start=TWetBul_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium wet bulb temperature to which the sensor is exposed&quot;</span>;
  <a href="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi"
>Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi</a> wetBulMod(
    <span style="color: blue; font-weight: normal; font-style: normal;">redeclare </span><span style="color: blue; font-weight: normal; font-style: normal;">package</span> Medium = <a href="Buildings_Fluid_Interfaces_Medium.html#Buildings.Fluid.Interfaces.PartialTwoPort.Medium"
>Medium</a>,
    TWetBul(start=TWetBul_start)) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Block for wet bulb temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</a> h <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Specific enthalpy&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>Medium.MassFraction</a> Xi[Medium.nXi] <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Species vector, needed because indexed argument for the operator inStream is not supported&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Initialization of wet bulb temperature</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(T) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
            initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      T = TWetBul_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    h  =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
           x=port_a.m_flow,
           y1=port_b.h_outflow,
           y2=port_a.h_outflow,
           x_small=m_flow_small);
    Xi =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
           x=port_a.m_flow,
           y1=port_b.Xi_outflow,
           y2=port_a.Xi_outflow,
           x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    h = port_b.h_outflow;
    Xi = port_b.Xi_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Compute wet bulb temperature</span>
  wetBulMod.TDryBul =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.temperature_phX</span>(p=port_a.p, h=h, X=<span style="color: red; font-weight: normal; font-style: normal;">cat</span>(1,Xi,{1-<span style="color: red; font-weight: normal; font-style: normal;">sum</span>(Xi)}));
  wetBulMod.Xi = Xi;
  wetBulMod.p  = port_a.p;
  TMedWetBul = wetBulMod.TWetBul;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(T) = (TMedWetBul-T)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    T = TMedWetBul;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>TemperatureWetBulbTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TraceSubstances<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.TraceSubstancesI.png" alt="Buildings.Fluid.Sensors.TraceSubstances" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.TraceSubstances"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.TraceSubstances</h2>
<p>
<b>Ideal one port trace substances sensor</b>
<br>
<br><img src="Buildings.Fluid.Sensors.TraceSubstancesD.png" alt="Buildings.Fluid.Sensors.TraceSubstances">
</p>
<h3>Information</h3>

<p>
This model outputs the trace substances contained in the fluid connected to its port.
The sensor is ideal, i.e., it does not influence the fluid.
</p>
<p>
Read the
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a>
prior to using this model with one fluid port.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a> (Partial component to model a sensor that measures a potential variable), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the sensor</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;CO2&quot;</td><td>Name of trace substance</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port</td><td>&nbsp;</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>C</td><td>Trace substance in port medium</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> TraceSubstances <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal one port trace substances sensor&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialAbsoluteSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>String substanceName = &quot;CO2&quot; <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Name of trace substance&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> C(min=0) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Trace substance in port medium&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real s[:]= {
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>(<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Utilities.Strings.isEqual</span>(string1=Medium.extraPropertiesNames[i],
                                            string2=substanceName,
                                            caseSensitive=false))<span style="color: blue; font-weight: normal; font-style: normal;">
    then </span>1<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0 <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:Medium.nC} <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Vector with zero everywhere except where species is&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(<span style="color: red; font-weight: normal; font-style: normal;">max</span>(s) &gt; 0.9, &quot;Trace substance &#39;&quot; + substanceName + &quot;&#39; is not present in medium &#39;&quot;
         + Medium.mediumName + &quot;&#39;.\n&quot;
         + &quot;Check sensor parameter and medium model.&quot;);
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// We obtain the species concentration with a vector multiplication</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// because Dymola 7.3 cannot find the derivative in the model</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Buildings.Examples.VAVSystemCTControl.mo</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// if we set C = CVec[ind];</span>
  C = s*<span style="color: red; font-weight: normal; font-style: normal;">inStream</span>(port.C_outflow);
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>TraceSubstances;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TraceSubstancesTwoPort<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.T08b0a06d625012a8oPortI.png" alt="Buildings.Fluid.Sensors.TraceSubstancesTwoPort" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.TraceSubstancesTwoPort"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.TraceSubstancesTwoPort</h2>
<p>
<b>Ideal two port sensor for trace substance</b>
<br>
<br><img src="Buildings.Fluid.Sensors.T08b0a06d625012a8oPortD.png" alt="Buildings.Fluid.Sensors.TraceSubstancesTwoPort">
</p>
<h3>Information</h3>

<p>
This model outputs the trace substance of the passing fluid.
The sensor is ideal, i.e., it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then its output
is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr><td>String</td><td>substanceName</td><td>&quot;CO2&quot;</td><td>Name of trace substance</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td>Real</td><td>C_start</td><td>0</td><td>Initial or guess value of output (= state)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>C</td><td>Trace substance of the passing fluid</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> TraceSubstancesTwoPort <span style="color: #006400; font-weight: normal; font-style: normal;">
  &quot;Ideal two port sensor for trace substance&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> C(min=0,
                                          start=C_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Trace substance of the passing fluid&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>String substanceName = &quot;CO2&quot; <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Name of trace substance&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real C_start(min=0) = 0 <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of output (= state)&quot;</span>;

<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  Real CMed(min=0, start=C_start, nominal=<span style="color: red; font-weight: normal; font-style: normal;">sum</span>(Medium.C_nominal)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium trace substance to which the sensor is exposed&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span>Real s[:]= {
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>(<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Utilities.Strings.isEqual</span>(string1=Medium.extraPropertiesNames[i],
                                            string2=substanceName,
                                            caseSensitive=false))<span style="color: blue; font-weight: normal; font-style: normal;">
    then </span>1<span style="color: blue; font-weight: normal; font-style: normal;"> else </span>0 <span style="color: blue; font-weight: normal; font-style: normal;">for </span>i<span style="color: blue; font-weight: normal; font-style: normal;"> in </span>1:Medium.nC} <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Vector with zero everywhere except where species is&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: red; font-weight: normal; font-style: normal;">assert</span>(<span style="color: red; font-weight: normal; font-style: normal;">max</span>(s) &gt; 0.9, &quot;Trace substance &#39;&quot; + substanceName + &quot;&#39; is not present in medium &#39;&quot;
         + Medium.mediumName + &quot;&#39;.\n&quot;
         + &quot;Check sensor parameter and medium model.&quot;);

  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(C) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      C = C_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     CMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
              x=port_a.m_flow,
              y1=s*port_b.C_outflow,
              y2=s*port_a.C_outflow,
              x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     CMed = s*port_b.C_outflow;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of sensor</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(C) = (CMed-C)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    C = CMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>TraceSubstancesTwoPort;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE VolumeFlowRate<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.Sensors.VolumeFlowRateI.png" alt="Buildings.Fluid.Sensors.VolumeFlowRate" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.Sensors.VolumeFlowRate"></a><a href="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors"
>Buildings.Fluid.Sensors</a>.VolumeFlowRate</h2>
<p>
<b>Ideal sensor for volume flow rate</b>
<br>
<br><img src="Buildings.Fluid.Sensors.VolumeFlowRateD.png" alt="Buildings.Fluid.Sensors.VolumeFlowRate">
</p>
<h3>Information</h3>

<p>
This model outputs the volume flow rate flowing from
<code>port_a</code> to <code>port_b</code>.
The sensor is ideal, i.e., it does not influence the fluid.
If the parameter <code>tau</code> is non-zero, then the measured
density that is used to convert the mass flow rate into
volumetric flow rate is computed using a first order differential equation.
Setting <code>tau=0</code> is <i>not</i> recommend. See
<a href="Buildings_Fluid_Sensors_UsersGuide.html#Buildings.Fluid.Sensors.UsersGuide"
>
Buildings.Fluid.Sensors.UsersGuide</a> for an explanation.
</p>

<p>Extends from <a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a> (Partial component to model sensors that measure flow properties using a dynamic model), <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a> (Icon representing a round measurement device).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau</td><td>1</td><td>Time constant at nominal flow rate [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate, used for regularization near zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</a></td><td>initType</td><td>Modelica.Blocks.Types.Init.I...</td><td>Type of initialization (InitialState and InitialOutput are identical)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Density</a></td><td>d_start</td><td>Medium.density(Medium.setSta...</td><td>Initial or guess value of density [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Temperature used to compute d_start [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Pressure used to compute d_start [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Mass fraction used to compute d_start [1]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>true</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*m_flow_nominal</td><td>For bi-directional flow, temperature is regularized in the region |m_flow| &lt; m_flow_small (m_flow_small &gt; 0 required) [kg/s]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>V_flow</td><td>Volume flow rate from port_a to port_b [m3/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue; font-weight: normal; font-style: normal;">model</span> VolumeFlowRate <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Ideal sensor for volume flow rate&quot;</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="Buildings_Fluid_Sensors_BaseClasses.html#Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor"
>Buildings.Fluid.Sensors.BaseClasses.PartialDynamicFlowSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.RotationalSensor"
>Modelica.Icons.RotationalSensor</a>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a>
    d_start=<span style="color: red; font-weight: normal; font-style: normal;">Medium.density</span>(<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_pTX</span>(p_start, T_start, X_start)) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Initial or guess value of density&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_start=Medium.T_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Temperature used to compute d_start&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> p_start=Medium.p_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Pressure used to compute d_start&quot;</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> X_start[Medium.nX]=Medium.X_default <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Mass fraction used to compute d_start&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> V_flow(<span style="color: blue; font-weight: normal; font-style: normal;">final </span>quantity=&quot;VolumeFlowRate&quot;,
                                               <span style="color: blue; font-weight: normal; font-style: normal;">final </span>unit=&quot;m3/s&quot;) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Volume flow rate from port_a to port_b&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> dMed(start=d_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Medium temperature to which the sensor is exposed&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d_a_inflow(start=d_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Density of inflowing fluid at port_a&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d_b_inflow(start=d_start) <span style="color: #006400; font-weight: normal; font-style: normal;">
    &quot;Density of inflowing fluid at port_b, or rho_a_inflow if uni-directional flow&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Density"
>Medium.Density</a> d(start=d_start) <span style="color: #006400; font-weight: normal; font-style: normal;">&quot;Density of the passing fluid&quot;</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">initial </span><span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: blue; font-weight: normal; font-style: normal;">if </span>initType == Modelica.Blocks.Types.Init.SteadyState<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      <span style="color: red; font-weight: normal; font-style: normal;">der</span>(d) = 0;
     <span style="color: blue; font-weight: normal; font-style: normal;">elseif </span>initType == Modelica.Blocks.Types.Init.InitialState<span style="color: blue; font-weight: normal; font-style: normal;"> or </span>
           initType == Modelica.Blocks.Types.Init.InitialOutput<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
      d = d_start;
    <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
<span style="color: blue; font-weight: normal; font-style: normal;">equation </span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>allowFlowReversal<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
     d_a_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_b.p, h=port_b.h_outflow, X=port_b.Xi_outflow));
     d_b_inflow =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(state=
                    <span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(p=port_a.p, h=port_a.h_outflow, X=port_a.Xi_outflow));
     dMed =<span style="color: red; font-weight: normal; font-style: normal;"> Modelica.Fluid.Utilities.regStep</span>(
              x=port_a.m_flow,
              y1=d_a_inflow,
              y2=d_b_inflow,
              x_small=m_flow_small);
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
     dMed =<span style="color: red; font-weight: normal; font-style: normal;"> Medium.density</span>(state=<span style="color: red; font-weight: normal; font-style: normal;">Medium.setState_phX</span>(
              p=port_b.p,
              h=port_b.h_outflow,
              X=port_b.Xi_outflow));
     d_a_inflow = dMed;
     d_b_inflow = dMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Output signal of density sensor that is used to compute</span>
  <span style="color: #006400; font-weight: normal; font-style: normal;">// the volume flow rate</span>
  <span style="color: blue; font-weight: normal; font-style: normal;">if </span>dynamic<span style="color: blue; font-weight: normal; font-style: normal;"> then</span>
    <span style="color: red; font-weight: normal; font-style: normal;">der</span>(d) = (dMed-d)*k/tau;
  <span style="color: blue; font-weight: normal; font-style: normal;">else</span>
    d = dMed;
  <span style="color: blue; font-weight: normal; font-style: normal;">end if</span>;
  <span style="color: #006400; font-weight: normal; font-style: normal;">// Volume flow rate</span>
  V_flow = port_a.m_flow/d;
<span style="color: blue; font-weight: normal; font-style: normal;">end </span>VolumeFlowRate;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Mon Jul 13 14:25:55 2015.
</address>
</body>
</html>
